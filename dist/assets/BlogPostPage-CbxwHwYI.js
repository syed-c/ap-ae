import{u as v,j as e}from"./chunk-CPh6voF3.js";import{b as H,L as m}from"./chunk-Drd-rt-S.js";import{s as w,B as x,ai as Q,aq as z,i as C,t as W,a8 as K,m as O,Q as J,b4 as Y,b5 as V,b6 as G,p as X,Y as I,x as Z,n as ee,o as se,P as te,b3 as ae}from"./index-DflORfjh.js";import{P as F}from"./chunk-D3ia1n3Z.js";import{S as y}from"./chunk-DXeotKgJ.js";import{B as re}from"./chunk-C-nCkXKs.js";import{S as _}from"./chunk-CQtADEjB.js";import{g as M,c as le}from"./chunk-D4Vl1TkM.js";import{u as ne}from"./chunk-D4pwncBY.js";import{P as ie}from"./chunk-CScGTjGl.js";import{A as oe,a as de,b as ce,c as me}from"./chunk-BMzWzDrf.js";import{S as xe}from"./chunk-D2ZJfdpI.js";import"./chunk-CffrGP6S.js";import"./chunk-B8auUmee.js";import"./chunk-DK8nT4cj.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";import"./chunk-BrfF1Wgp.js";import"./chunk-CKWDY2Lf.js";function U({clinicIds:g=[],clinicSlugs:h=[],locationLabel:a,headingText:f}){const o=Array.isArray(g)?g.filter(Boolean):[],j=Array.isArray(h)?h.filter(Boolean):[],{data:N,isLoading:L}=v({queryKey:["blog-top-clinics",{ids:o,slugs:j}],queryFn:async()=>{if(!o.length&&!j.length)return[];const c=w.from("clinics").select(`
          id,
          name,
          slug,
          cover_image_url,
          rating,
          review_count,
          verification_status,
          claim_status,
          city:cities(name, slug, state:states(abbreviation))
        `).eq("is_active",!0),{data:A}=o.length?await c.in("id",o):await c.in("slug",j),S=A||[],T=new Map(S.map(l=>[l.id,l])),B=new Map(S.map(l=>[l.slug,l]));return(o.length?o.map(l=>T.get(l)).filter(Boolean):j.map(l=>B.get(l)).filter(Boolean)).map(l=>{const d=l.city?.state?.abbreviation,$=l.city?.name?`${l.city.name}${d?`, ${d}`:""}`:a||"United States",q=l.claim_status==="claimed"&&l.verification_status==="verified";return{id:l.id,name:l.name,slug:l.slug,type:"clinic",specialty:"Dental Clinic",location:$,rating:Number(l.rating)||0,reviewCount:l.review_count||0,image:l.cover_image_url||void 0,isVerified:q,clinicName:l.name,clinicId:l.id}})},enabled:o.length>0||j.length>0});if(L)return e.jsx("div",{className:"space-y-4 my-8 not-prose",children:[1,2,3].map(c=>e.jsx(_,{className:"h-24 w-full rounded-xl"},c))});if(!N?.length)return null;const k=f||`Top ${N.length} Dentists${a?` in ${a}`:""}`;return e.jsxs("div",{className:"my-10 not-prose",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:k}),e.jsx("div",{className:"space-y-4",children:N.map(c=>e.jsx(ie,{profile:c,variant:"list"},c.id))})]})}function E({faqs:g,headingText:h}){if(!g?.length)return null;const a=h||"Frequently Asked Questions";return e.jsxs("div",{className:"my-8 not-prose",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:a}),e.jsx(oe,{type:"single",collapsible:!0,className:"space-y-3",children:g.map((f,o)=>e.jsxs(de,{value:`faq-${o}`,className:"bg-card border border-border rounded-xl px-4 data-[state=open]:bg-muted/30",children:[e.jsx(ce,{className:"text-left font-semibold hover:no-underline py-4",children:f.question}),e.jsx(me,{className:"text-muted-foreground pb-4 leading-relaxed",children:f.answer})]},o))})]})}const Ie=()=>{const{postSlug:g}=H(),h=g||"",{data:a,isLoading:f}=v({queryKey:["blog-post",h],queryFn:async()=>{const{data:t}=await w.from("blog_posts").select("*").eq("slug",h).eq("status","published").maybeSingle();return t}}),{data:o}=v({queryKey:["related-posts",a?.category],queryFn:async()=>{if(!a?.category)return[];const{data:t}=await w.from("blog_posts").select("*").eq("status","published").eq("category",a.category).neq("slug",h).order("published_at",{ascending:!1}).limit(3);return t||[]},enabled:!!a?.category}),{data:j}=v({queryKey:["popular-states-sidebar"],queryFn:async()=>{const{data:t}=await w.from("states").select("name, slug").eq("is_active",!0).order("display_order").limit(5);return t||[]}}),{data:N}=v({queryKey:["popular-treatments-sidebar"],queryFn:async()=>{const{data:t}=await w.from("treatments").select("name, slug").eq("is_active",!0).order("display_order").limit(6);return t||[]}});if(ne(!f&&!!a),f)return e.jsx(F,{children:e.jsxs("div",{className:"container py-8",children:[e.jsx(_,{className:"h-96 rounded-3xl mb-8"}),e.jsxs("div",{className:"max-w-3xl mx-auto space-y-4",children:[e.jsx(_,{className:"h-12 w-3/4"}),e.jsx(_,{className:"h-6 w-1/2"}),e.jsx(_,{className:"h-64 w-full"})]})]})});if(!a)return e.jsx(F,{children:e.jsx(y,{children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h1",{className:"font-display text-3xl font-bold mb-4",children:"Post Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"The blog post you're looking for doesn't exist."}),e.jsx(x,{asChild:!0,className:"rounded-xl font-bold",children:e.jsx(m,{to:"/blog",children:"Back to Blog"})})]})})});const k=[{label:"Home",href:"/"},{label:"Blog",href:"/blog"},{label:a.title}],c=t=>{if(!t)return null;if(Array.isArray(t))return t;if(typeof t=="object"&&t!==null){const s=t;if(Array.isArray(s.blocks))return s.blocks;if(s.type==="json"&&Array.isArray(s.body))return s.body}return null},A=c(a.content),S=A?A.map(t=>[t.headingText,t.content,t.imageAlt].filter(Boolean).join(" ")).join(`
`):M(a.content),T=le(S),B=t=>/<[a-z][\s\S]*>/i.test(t)&&!t.includes("<!-- DENTIST_LIST:")&&!t.includes("<!-- FAQ_LIST:"),R=t=>{const s=[],r=t.split(`
`);let n=[],i=0;const b=()=>{if(n.length>0){const u=n.join(`
`);u.trim()&&s.push(e.jsx("div",{children:l(u)},`text-${i++}`)),n=[]}};for(const u of r){const P=u.match(/<!-- DENTIST_LIST:(.+?) -->/);if(P){b();try{const p=JSON.parse(P[1]);s.push(e.jsx(U,{clinicIds:p.clinicIds||[],locationLabel:p.locationLabel},`dentist-${i++}`))}catch(p){console.error("Failed to parse dentist list data:",p)}continue}const D=u.match(/<!-- FAQ_LIST:(.+?) -->/);if(D){b();try{const p=JSON.parse(D[1]);s.push(e.jsx(E,{faqs:p.faqs||[]},`faq-${i++}`))}catch(p){console.error("Failed to parse FAQ list data:",p)}continue}n.push(u)}return b(),s},l=t=>t.split(`
`).map((s,r)=>{if(s.startsWith("# "))return e.jsx("h1",{className:"text-3xl font-bold mt-8 mb-4",children:d(s.slice(2))},r);if(s.startsWith("## "))return e.jsx("h2",{className:"text-2xl font-bold mt-8 mb-4",children:d(s.slice(3))},r);if(s.startsWith("### "))return e.jsx("h3",{className:"text-xl font-bold mt-6 mb-3",children:d(s.slice(4))},r);if(s.startsWith("- **")){const n=s.match(/- \*\*(.+?)\*\*:?\s*(.*)/);if(n)return e.jsxs("li",{className:"ml-6 mb-2",children:[e.jsx("strong",{className:"text-foreground",children:n[1]}),n[2]&&e.jsxs("span",{children:[": ",d(n[2])]})]},r)}else{if(s.startsWith("- "))return e.jsx("li",{className:"ml-6 mb-2",children:d(s.slice(2))},r);if(s.match(/^\d+\.\s/))return e.jsx("li",{className:"ml-6 mb-2 list-decimal",children:d(s.replace(/^\d+\.\s/,""))},r);if(s.match(/^!\[.*?\]\(.*?\)$/)){const n=s.match(/^!\[(.*?)\]\((.*?)\)$/);if(n)return e.jsxs("figure",{className:"my-6",children:[e.jsx("img",{src:n[2],alt:n[1],className:"w-full rounded-xl",loading:"lazy"}),n[1]&&e.jsx("figcaption",{className:"text-sm text-muted-foreground text-center mt-2",children:n[1]})]},r)}else return s.trim()===""?e.jsx("div",{className:"h-4"},r):e.jsx("p",{className:"mb-4 leading-relaxed",children:d(s)},r)}return e.jsx("p",{className:"mb-4 leading-relaxed",children:s},r)}),d=t=>{const s=[];let r=0;const n=/(\[([^\]]+)\]\(([^)]+)\)|\*\*([^*]+)\*\*)/g;let i;for(;(i=n.exec(t))!==null;){if(i.index>r&&s.push(t.slice(r,i.index)),i[2]&&i[3]){const b=i[3],u=b.startsWith("http");s.push(u?e.jsx("a",{href:b,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:i[2]},`link-${i.index}`):e.jsx(m,{to:b,className:"text-primary hover:underline",children:i[2]},`link-${i.index}`))}else i[4]&&s.push(e.jsx("strong",{children:i[4]},`bold-${i.index}`));r=i.index+i[0].length}return r<t.length&&s.push(t.slice(r)),s.length>0?s:t},$=t=>t.map((s,r)=>{if(s.type==="dentist-list")return e.jsx(U,{clinicIds:s.clinicIds||[],clinicSlugs:s.clinicSlugs||[],locationLabel:s.locationLabel,headingText:s.headingText},s.id||`dentist-${r}`);if(s.type==="faq-list")return e.jsx(E,{faqs:s.faqs||[],headingText:s.headingText},s.id||`faq-${r}`);if(s.type==="image"&&s.imageUrl)return e.jsxs("figure",{className:"my-6 not-prose",children:[e.jsx("img",{src:s.imageUrl,alt:s.imageAlt||"Blog image",className:"w-full rounded-xl",loading:"lazy"}),s.imageAlt&&e.jsx("figcaption",{className:"text-sm text-muted-foreground text-center mt-2",children:s.imageAlt})]},s.id||`img-${r}`);if(s.type==="heading"){const n=s.headingLevel||"h2",i=n==="h1"?"text-3xl font-bold mt-8 mb-4":n==="h3"?"text-xl font-bold mt-6 mb-3":"text-2xl font-bold mt-8 mb-4";return e.jsxs("div",{children:[s.headingText?e.jsx(n,{className:i,children:d(s.headingText)}):null,s.content?e.jsx("div",{children:l(s.content)}):null]},s.id||`heading-${r}`)}return null}),q=t=>{const s=c(t);if(s?.length)return $(s);const r=M(t);return B(r)?e.jsx("div",{className:"blog-content",dangerouslySetInnerHTML:{__html:r}}):R(r)};return e.jsxs(F,{children:[e.jsx(Q,{title:a.seo_title||a.title,description:a.seo_description||a.excerpt||`Read "${a.title}" on AppointPanda's dental health blog.`,canonical:`/blog/${a.slug}/`,ogType:"article",ogImage:a.featured_image_url||void 0,author:a.author_name||"AppointPanda Team",publishedAt:a.published_at||void 0,modifiedAt:a.updated_at||void 0,keywords:a.tags||["dental health","oral care"]}),e.jsx(z,{type:"article",headline:a.title,description:a.excerpt||a.seo_description||"",image:a.featured_image_url||"",url:`/blog/${a.slug}/`,datePublished:a.published_at||"",dateModified:a.updated_at||a.published_at||"",author:a.author_name||"AppointPanda Team"}),e.jsx(z,{type:"breadcrumb",items:k.map(t=>({name:t.label,url:t.href}))}),e.jsx(y,{size:"sm",className:"border-b border-border bg-muted/30",children:e.jsx(re,{items:k})}),e.jsxs(y,{size:"lg",children:[e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("article",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"card-modern p-6 md:p-8 mb-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[a.category&&e.jsx(C,{className:"bg-primary text-primary-foreground rounded-full px-4 py-1",children:a.category}),e.jsxs("span",{className:"text-sm text-muted-foreground flex items-center gap-1.5",children:[e.jsx(W,{className:"h-4 w-4"}),T," min read"]})]}),e.jsx("h1",{className:"font-display text-2xl md:text-3xl lg:text-4xl font-bold mb-6 leading-tight",children:a.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 pb-6 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center",children:e.jsx(K,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:a.author_name||"AppointPanda Team"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Dental Health Expert"})]})]}),a.published_at&&e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2 ml-auto",children:[e.jsx(O,{className:"h-4 w-4"}),J(new Date(a.published_at),"MMMM d, yyyy")]})]})]}),a.featured_image_url&&e.jsxs("div",{className:"card-modern overflow-hidden mb-6",children:[e.jsx("div",{className:"relative aspect-video",children:e.jsx("img",{src:a.featured_image_url,alt:a.title,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"p-3 bg-muted/30 border-t border-border",children:e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Featured image for: ",a.title]})})]}),e.jsxs("div",{className:"card-modern p-6 md:p-8",children:[a.excerpt&&e.jsx("div",{className:"bg-primary/5 border-l-4 border-primary rounded-r-xl p-4 mb-8",children:e.jsx("p",{className:"text-lg text-muted-foreground italic leading-relaxed",children:a.excerpt})}),e.jsx("div",{className:"prose prose-lg max-w-none text-foreground blog-content",children:a.content?e.jsx("div",{className:"leading-relaxed",children:q(a.content)}):e.jsx("p",{className:"text-muted-foreground",children:"No content available."})}),a.tags&&a.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-8 pt-6 border-t border-border",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground mr-2",children:"Tags:"}),a.tags.map(t=>e.jsxs(C,{variant:"secondary",className:"rounded-full",children:["#",t]},t))]}),e.jsxs("div",{className:"flex items-center gap-4 mt-6 pt-6 border-t border-border",children:[e.jsxs("span",{className:"font-bold text-sm flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4"}),"Share this article:"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{variant:"outline",size:"icon",className:"rounded-full h-10 w-10 hover:bg-blue-500/10 hover:border-blue-500/50",onClick:()=>window.open(`https://facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`,"_blank"),children:e.jsx(Y,{className:"h-4 w-4"})}),e.jsx(x,{variant:"outline",size:"icon",className:"rounded-full h-10 w-10 hover:bg-sky-500/10 hover:border-sky-500/50",onClick:()=>window.open(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}&text=${encodeURIComponent(a.title)}`,"_blank"),children:e.jsx(V,{className:"h-4 w-4"})}),e.jsx(x,{variant:"outline",size:"icon",className:"rounded-full h-10 w-10 hover:bg-blue-700/10 hover:border-blue-700/50",onClick:()=>window.open(`https://linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(window.location.href)}&title=${encodeURIComponent(a.title)}`,"_blank"),children:e.jsx(G,{className:"h-4 w-4"})})]})]})]})]}),e.jsxs("aside",{className:"space-y-6",children:[e.jsxs("div",{className:"card-modern p-6 bg-gradient-to-br from-primary/10 to-primary/5 border-primary/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-2xl bg-primary/20 flex items-center justify-center",children:e.jsx(X,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:"Find a Dentist"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Near you"})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Ready to book an appointment? Find verified dental professionals in your city."}),e.jsx(x,{asChild:!0,className:"w-full rounded-xl font-bold",children:e.jsxs(m,{to:"/search",children:["Browse Dentists",e.jsx(I,{className:"ml-2 h-4 w-4"})]})})]}),e.jsxs("div",{className:"card-modern p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Z,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-bold",children:"Browse by Location"})]}),e.jsx("div",{className:"space-y-2",children:j?.map(t=>e.jsxs(m,{to:`/${t.slug}`,className:"flex items-center justify-between p-3 rounded-xl bg-muted/50 hover:bg-primary/10 transition-colors group",children:[e.jsx("span",{className:"font-medium group-hover:text-primary",children:t.name}),e.jsx(I,{className:"h-4 w-4 text-muted-foreground group-hover:text-primary"})]},t.slug))})]}),e.jsxs("div",{className:"card-modern p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ee,{className:"h-5 w-5 text-gold"}),e.jsx("h3",{className:"font-bold",children:"Popular Services"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:N?.map(t=>e.jsx(m,{to:`/services/${t.slug}`,className:"px-3 py-1.5 text-sm rounded-full bg-muted hover:bg-primary/10 hover:text-primary transition-colors",children:t.name},t.slug))})]}),e.jsxs("div",{className:"card-modern p-6 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(se,{className:"h-5 w-5 text-emerald-500"}),e.jsx("h3",{className:"font-bold",children:"Why AppointPanda?"})]}),e.jsxs("ul",{className:"space-y-3 text-sm",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"h-5 w-5 rounded-full bg-emerald-500/20 flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-emerald-500 text-xs",children:"✓"})}),e.jsx("span",{children:"6,600+ verified dental clinics"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"h-5 w-5 rounded-full bg-emerald-500/20 flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-emerald-500 text-xs",children:"✓"})}),e.jsx("span",{children:"Book appointments in 60 seconds"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"h-5 w-5 rounded-full bg-emerald-500/20 flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-emerald-500 text-xs",children:"✓"})}),e.jsx("span",{children:"Read real patient reviews"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"h-5 w-5 rounded-full bg-emerald-500/20 flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-emerald-500 text-xs",children:"✓"})}),e.jsx("span",{children:"Compare prices & insurance"})]})]})]}),e.jsxs("div",{className:"card-modern p-6 border-coral/20 bg-coral/5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(te,{className:"h-5 w-5 text-coral"}),e.jsx("h3",{className:"font-bold",children:"Need Help?"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Our team can help you find the right dentist for your needs."}),e.jsx(x,{asChild:!0,variant:"outline",className:"w-full rounded-xl font-bold border-coral/30 hover:bg-coral/10",children:e.jsx(m,{to:"/contact",children:"Contact Us"})})]})]})]}),e.jsx("div",{className:"mt-8",children:e.jsx(x,{asChild:!0,variant:"outline",className:"rounded-xl font-bold",children:e.jsxs(m,{to:"/blog",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Back to Blog"]})})})]}),o&&o.length>0&&e.jsx(y,{variant:"muted",size:"lg",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("h2",{className:"font-display text-2xl font-bold mb-6",children:"Related Articles"}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:o.map(t=>e.jsxs(m,{to:`/blog/${t.slug}`,className:"card-modern overflow-hidden group card-hover",children:[e.jsx("div",{className:"h-40 relative overflow-hidden",children:t.featured_image_url?e.jsx("img",{src:t.featured_image_url,alt:t.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/20 to-accent/20"})}),e.jsxs("div",{className:"p-5",children:[e.jsx(C,{variant:"secondary",className:"rounded-full mb-2",children:t.category}),e.jsx("h3",{className:"font-display font-bold group-hover:text-primary transition-colors line-clamp-2",children:t.title})]})]},t.id))})]})}),e.jsx(y,{variant:"primary",size:"md",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"font-display text-3xl md:text-4xl font-bold mb-4",children:"Ready to Find Your Perfect Dentist?"}),e.jsx("p",{className:"text-primary-foreground/80 mb-8 max-w-xl mx-auto",children:"Browse our directory of verified dental professionals across the UAE."}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[e.jsx(x,{asChild:!0,size:"lg",variant:"secondary",className:"rounded-2xl font-bold",children:e.jsxs(m,{to:"/search",children:["Find a Dentist",e.jsx(I,{className:"ml-2 h-5 w-5"})]})}),e.jsx(x,{asChild:!0,size:"lg",variant:"outline",className:"rounded-2xl font-bold bg-transparent border-white/30 text-white hover:bg-white/10",children:e.jsx(m,{to:"/services",children:"Browse Services"})})]})]})})]})};export{Ie as default};
