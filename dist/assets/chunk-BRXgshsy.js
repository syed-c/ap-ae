import{j as e,u as N}from"./chunk-CPh6voF3.js";import{r as o}from"./chunk-CffrGP6S.js";import{l as c,a4 as w,i as S,y as B,ap as _,n as A,o as k,v as O,aF as R,aG as E,B as C,X as D,s as P}from"./index-DflORfjh.js";import{m as F}from"./chunk-xExVBHTi.js";const U=[{label:"Under 100 AED",value:100,icon:"ðŸ’µ"},{label:"Under 500 AED",value:500,icon:"ðŸ’°"},{label:"Under 1,000 AED",value:1e3,icon:"ðŸ’Ž"},{label:"Under 2,500 AED",value:2500,icon:"ðŸ†"},{label:"Under 5,000 AED",value:5e3,icon:"â­"},{label:"Any Budget",value:null,icon:"ðŸŽ¯"}],I=[{label:"Any",value:0},{label:"3+ â­",value:3},{label:"4+ â­",value:4},{label:"4.5+ â­",value:4.5}];function q({filters:r,onFiltersChange:s,availableServices:t=[],locationName:l,treatmentName:d,totalResults:n=0,className:i}){o.useState(!0);const[m,u]=o.useState(!1),x=(r.maxBudget!==null?1:0)+(r.minRating>0?1:0)+(r.verifiedOnly?1:0)+r.selectedServices.length,g=o.useCallback(a=>{s({...r,maxBudget:a})},[r,s]),h=o.useCallback(a=>{s({...r,minRating:a})},[r,s]),p=o.useCallback(a=>{const y=r.selectedServices.includes(a)?r.selectedServices.filter(j=>j!==a):[...r.selectedServices,a];s({...r,selectedServices:y})},[r,s]),f=o.useCallback(()=>{s({...r,verifiedOnly:!r.verifiedOnly})},[r,s]),b=o.useCallback(()=>{s({maxBudget:null,minRating:0,verifiedOnly:!1,selectedServices:[]})},[s]),v=m?t:t.slice(0,6);return e.jsxs(F.aside,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:c("bg-card border border-border rounded-3xl overflow-hidden shadow-lg",i),children:[e.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-primary/5 px-5 py-4 border-b border-border",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-9 w-9 rounded-xl bg-primary/20 flex items-center justify-center",children:e.jsx(w,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-foreground text-sm",children:"Smart Filters"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"AI-Powered Matching"})]})]}),x>0&&e.jsxs(S,{className:"bg-primary text-primary-foreground text-xs",children:[x," active"]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(B,{className:"h-3 w-3 text-primary"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-foreground",children:n})," clinics",l&&e.jsxs(e.Fragment,{children:[" in ",e.jsx("strong",{className:"text-foreground",children:l})]}),d&&e.jsxs(e.Fragment,{children:[" for ",e.jsx("strong",{className:"text-primary",children:d})]})]})]})]}),e.jsxs("div",{className:"p-5 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(_,{className:"h-4 w-4 text-primary"}),e.jsx("h4",{className:"font-bold text-sm text-foreground",children:"Budget Range"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:U.map(a=>e.jsxs("button",{onClick:()=>g(a.value),className:c("flex items-center gap-2 px-3 py-2.5 rounded-xl text-xs font-bold transition-all border",r.maxBudget===a.value?"bg-primary text-primary-foreground border-primary shadow-md shadow-primary/20":"bg-muted/50 text-foreground border-transparent hover:border-primary/30 hover:bg-muted"),children:[e.jsx("span",{children:a.icon}),e.jsx("span",{children:a.label})]},a.value??"any"))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(A,{className:"h-4 w-4 text-gold fill-gold"}),e.jsx("h4",{className:"font-bold text-sm text-foreground",children:"Minimum Rating"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:I.map(a=>e.jsx("button",{onClick:()=>h(a.value),className:c("px-3 py-2 rounded-xl text-xs font-bold transition-all border",r.minRating===a.value?"bg-primary text-primary-foreground border-primary":"bg-muted/50 text-foreground border-transparent hover:border-primary/30"),children:a.label},a.value))})]}),e.jsx("div",{children:e.jsxs("button",{onClick:f,className:c("w-full flex items-center justify-between px-4 py-3 rounded-xl border transition-all",r.verifiedOnly?"bg-primary/10 border-primary/30 text-primary":"bg-muted/50 border-transparent hover:border-primary/30 text-foreground"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{className:"font-bold text-sm",children:"Verified Only"})]}),e.jsx("div",{className:c("h-5 w-9 rounded-full transition-colors relative",r.verifiedOnly?"bg-primary":"bg-muted"),children:e.jsx("div",{className:c("absolute top-0.5 h-4 w-4 rounded-full bg-white shadow transition-transform",r.verifiedOnly?"translate-x-4":"translate-x-0.5")})})]})}),t.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(O,{className:"h-4 w-4 text-primary"}),e.jsx("h4",{className:"font-bold text-sm text-foreground",children:"Services"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(a=>e.jsx("button",{onClick:()=>p(a.slug),className:c("px-3 py-1.5 rounded-full text-xs font-bold transition-all border",r.selectedServices.includes(a.slug)?"bg-primary text-primary-foreground border-primary":"bg-muted/50 text-foreground border-transparent hover:border-primary/30"),children:a.name},a.id))}),t.length>6&&e.jsx("button",{onClick:()=>u(!m),className:"mt-2 text-xs text-primary font-bold flex items-center gap-1 hover:underline",children:m?e.jsxs(e.Fragment,{children:["Show Less ",e.jsx(R,{className:"h-3 w-3"})]}):e.jsxs(e.Fragment,{children:["Show All (",t.length,") ",e.jsx(E,{className:"h-3 w-3"})]})})]}),x>0&&e.jsxs(C,{variant:"ghost",size:"sm",onClick:b,className:"w-full text-muted-foreground hover:text-foreground",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Clear All Filters"]})]})]})}function G(r){const[s,t]=o.useState({maxBudget:null,minRating:0,verifiedOnly:!1,selectedServices:[],...r}),l=o.useCallback(d=>d.filter(n=>!(s.maxBudget!==null&&n.price_from&&n.price_from>s.maxBudget||s.minRating>0&&(n.rating||0)<s.minRating||s.verifiedOnly&&!n.isVerified)),[s]);return{filters:s,setFilters:t,applyFilters:l}}function V(r,s,t,l){const n=r==="homepage"?"pinned_clinics_homepage":r==="state"&&s?`pinned_clinics_state_${s}`:r==="city"&&s&&t?`pinned_clinics_city_${s}_${t}`:r==="service"&&l?`pinned_clinics_service_${l}`:null;return N({queryKey:["pinned-profiles",n],queryFn:async()=>{if(!n)return[];const{data:i}=await P.from("global_settings").select("value").eq("key",n).maybeSingle();if(!i?.value)return[];try{const m=typeof i.value=="string"?JSON.parse(i.value):i.value;return Array.isArray(m)?m:[]}catch{return[]}},enabled:!!n,staleTime:5*60*1e3})}function z(r,s){if(!s.length)return r;const t=new Map(s.map((l,d)=>[l.id,d]));return[...r].sort((l,d)=>{const n=t.get(l.id),i=t.get(d.id);return n!==void 0&&i!==void 0?n-i:n!==void 0?-1:i!==void 0?1:0})}export{q as B,G as a,z as s,V as u};
