import{u,j as e}from"./chunk-CPh6voF3.js";import{r as d}from"./chunk-CffrGP6S.js";import{ah as te,ai as ae,a as m,a2 as D,a3 as I,a5 as L,a6 as A,a7 as E,I as ie,B as x,i as re,p as R,x as ne,n as H,Y as ce,s as p}from"./index-DflORfjh.js";import{C as v,a as b,b as C,c as K,d as w}from"./chunk-Dwq_v72W.js";import{S as le}from"./chunk-FxOzQZIr.js";import{T as de,a as oe,b as Y,c as j,d as me,e as f}from"./chunk-NLs5Ye4A.js";import{L as S}from"./chunk-Drd-rt-S.js";import{P as xe}from"./chunk-D3ia1n3Z.js";import{C as O}from"./chunk-BCvbbygb.js";import{B as he}from"./chunk-HiDpIwK7.js";import"./chunk-B8auUmee.js";import"./chunk-DK8nT4cj.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";function Te(){const{data:$}=te("tools/dental-cost-calculator"),[a,G]=d.useState(""),[n,Q]=d.useState(""),[g,B]=d.useState(""),[o,F]=d.useState(null),[h,W]=d.useState(50),[_,z]=d.useState(""),{data:k}=u({queryKey:["tool-treatments"],queryFn:async()=>{const{data:s}=await p.from("treatments").select("id, name, slug").eq("is_active",!0).order("name");return s||[]}}),{data:M}=u({queryKey:["tool-states"],queryFn:async()=>{const{data:s}=await p.from("states").select("id, name, abbreviation").eq("is_active",!0).order("name");return s||[]}}),{data:V}=u({queryKey:["tool-cities",n],queryFn:async()=>{let s=p.from("cities").select("id, name, slug").eq("is_active",!0).order("name");n&&(s=s.eq("state_id",n));const{data:r}=await s.limit(200);return r||[]}}),{data:y}=u({queryKey:["tool-pricing",a,n,g],queryFn:async()=>{if(!a)return null;let s=p.from("clinic_treatments").select("price_from, price_to, clinic_id, clinics!inner(id, name, slug, rating, review_count, city_id, is_active, cities!inner(name, state_id, states!inner(abbreviation)))").eq("treatment_id",a).eq("clinics.is_active",!0).not("price_from","is",null);g?s=s.eq("clinics.city_id",g):n&&(s=s.eq("clinics.cities.state_id",n));const{data:r}=await s.limit(100);if(!r||r.length===0)return null;const l=r.map(t=>({from:t.price_from,to:t.price_to||t.price_from,clinic:t.clinics})),P=l.map(t=>t.from),J=l.map(t=>t.to),X=Math.min(...P),Z=Math.max(...J),ee=Math.round(P.reduce((t,T)=>t+T,0)/P.length),se=l.filter(t=>t.clinic?.rating).sort((t,T)=>(T.clinic.rating||0)-(t.clinic.rating||0)).slice(0,5);return{minPrice:X,maxPrice:Z,avgPrice:ee,count:r.length,topClinics:se}},enabled:!!a}),{data:c}=u({queryKey:["tool-budget-ranges",a],queryFn:async()=>{if(!a)return[];const{data:s}=await p.from("budget_ranges").select("id, label, price_min, price_max").eq("treatment_id",a).eq("is_active",!0).order("price_min");return s||[]},enabled:!!a}),i=d.useMemo(()=>{if(!y)return null;const s=y.avgPrice;let r=s,l=0;return o&&h>0&&(l=Math.round(s*(h/100)),r=s-l),{...y,outOfPocket:r,insurancePays:l}},[y,o,h]),U=_?V?.filter(s=>s.name.toLowerCase().includes(_.toLowerCase())):V,N=k?.find(s=>s.id===a),q=M?.find(s=>s.id===n);return e.jsxs(xe,{children:[e.jsx(ae,{title:$?.meta_title||"Dental Cost Calculator | Real Dentist Prices | AppointPanda",description:$?.meta_description||"Get real cost estimates from verified dentists. Compare prices for dental implants, crowns, cleanings and more in your city.",canonical:"/tools/dental-cost-calculator/"}),e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 mb-4",children:e.jsx(O,{className:"h-8 w-8 text-primary"})}),e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Dental Cost Calculator"}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Get real cost estimates from verified dentists on our platform. Prices are submitted directly by dental offices."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs(v,{className:"lg:col-span-2",children:[e.jsxs(b,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5"}),"Calculate Your Cost"]}),e.jsx(K,{children:"Select a treatment and location to see real prices from dentists"})]}),e.jsxs(w,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Select Treatment"}),e.jsxs(D,{value:a,onValueChange:s=>{G(s)},children:[e.jsx(I,{className:"w-full",children:e.jsx(L,{placeholder:"Choose a dental treatment"})}),e.jsx(A,{children:k?.map(s=>e.jsx(E,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Emirate"}),e.jsxs(D,{value:n,onValueChange:s=>{Q(s),B("")},children:[e.jsx(I,{children:e.jsx(L,{placeholder:"Select emirate"})}),e.jsx(A,{children:M?.map(s=>e.jsx(E,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Area"}),e.jsxs(D,{value:g,onValueChange:B,children:[e.jsx(I,{children:e.jsx(L,{placeholder:"Select area"})}),e.jsxs(A,{children:[e.jsx("div",{className:"px-2 pb-2",children:e.jsx(ie,{placeholder:"Search cities...",value:_,onChange:s=>z(s.target.value),className:"h-8"})}),U?.slice(0,50).map(s=>e.jsx(E,{value:s.id,children:s.name},s.id))]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{children:"Do you have dental insurance?"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(x,{variant:o===!0?"default":"outline",onClick:()=>F(!0),children:"Yes"}),e.jsx(x,{variant:o===!1?"default":"outline",onClick:()=>F(!1),children:"No"})]}),o&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{children:["Estimated Coverage: ",h,"%"]}),e.jsx(le,{value:[h],onValueChange:s=>W(s[0]),min:0,max:100,step:10}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Major procedures typically 50%, preventive care 80-100%"})]})]}),c&&c.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{children:["Budget Ranges for ",N?.name]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(s=>e.jsx(re,{variant:"outline",className:"py-1.5 px-3",children:s.label},s.id))})]})]})]}),e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(C,{children:"Price Estimate"})}),e.jsx(w,{children:i?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center p-6 bg-primary/5 rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Average Price"}),e.jsxs("p",{className:"text-4xl font-bold text-primary",children:[i.avgPrice.toLocaleString()," AED"]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Range: ",i.minPrice.toLocaleString()," – ",i.maxPrice.toLocaleString()," AED"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Based on ",i.count," dentist",i.count!==1?"s":""]})]}),o&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Insurance Pays"}),e.jsxs("span",{className:"font-medium text-green-600",children:["-",i.insurancePays.toLocaleString()," AED"]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-3",children:[e.jsx("span",{className:"font-medium",children:"Your Out-of-Pocket"}),e.jsxs("span",{className:"font-bold text-lg",children:[i.outOfPocket.toLocaleString()," AED"]})]})]}),e.jsx(x,{className:"w-full",asChild:!0,children:e.jsxs(S,{to:`/search?treatment=${N?.slug||""}&state=${q?.abbreviation||""}`,children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Find Dentists in Your Budget"]})})]}):a&&c&&c.length>0?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center p-6 bg-primary/5 rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Estimated Price Range"}),e.jsxs("p",{className:"text-3xl font-bold text-primary",children:["$",Math.min(...c.map(s=>s.price_min)).toLocaleString()," – $",Math.max(...c.map(s=>s.price_max)).toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Based on platform budget ranges"})]}),e.jsx("div",{className:"space-y-2",children:c.map(s=>e.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-muted/30 rounded-lg text-sm",children:[e.jsx("span",{className:"font-medium",children:s.label}),e.jsxs("span",{className:"text-muted-foreground",children:["$",s.price_min," – $",s.price_max]})]},s.id))}),e.jsx(x,{className:"w-full",asChild:!0,children:e.jsxs(S,{to:`/search?treatment=${N?.slug||""}`,children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Find Dentists for This Treatment"]})})]}):a?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ne,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No pricing data available for this treatment yet."}),e.jsx("p",{className:"text-sm mt-2",children:"Try selecting a different treatment."}),e.jsx(x,{className:"mt-4 w-full",variant:"outline",asChild:!0,children:e.jsxs(S,{to:"/search",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Browse All Dentists"]})})]}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(O,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Select a treatment to see cost estimates"})]})})]})]}),i?.topClinics&&i.topClinics.length>0&&e.jsxs(v,{className:"mt-8",children:[e.jsxs(b,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),"Top-Rated Dentists for ",N?.name]}),e.jsxs(K,{children:["Verified dentists offering this treatment",q?` in ${q.name}`:""]})]}),e.jsx(w,{children:e.jsxs(de,{children:[e.jsx(oe,{children:e.jsxs(Y,{children:[e.jsx(j,{children:"Dentist"}),e.jsx(j,{children:"Location"}),e.jsx(j,{className:"text-right",children:"Price Range"}),e.jsx(j,{className:"text-right",children:"Rating"}),e.jsx(j,{})]})}),e.jsx(me,{children:i.topClinics.map((s,r)=>e.jsxs(Y,{children:[e.jsx(f,{className:"font-medium",children:s.clinic?.name}),e.jsxs(f,{className:"text-muted-foreground",children:[s.clinic?.cities?.name,", ",s.clinic?.cities?.states?.abbreviation]}),e.jsxs(f,{className:"text-right",children:["$",s.from," ",s.to>s.from?`– $${s.to}`:""]}),e.jsx(f,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(H,{className:"h-3.5 w-3.5 fill-amber-400 text-amber-400"}),s.clinic?.rating?.toFixed(1)]})}),e.jsx(f,{children:e.jsx(x,{size:"sm",variant:"ghost",asChild:!0,children:e.jsxs(S,{to:`/clinic/${s.clinic?.slug||s.clinic?.id}`,children:["View ",e.jsx(ce,{className:"h-4 w-4 ml-1"})]})})})]},r))})]})})]}),e.jsxs(v,{className:"mt-8",children:[e.jsx(b,{children:e.jsx(C,{children:"Frequently Asked Questions"})}),e.jsxs(w,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Where does this pricing data come from?"}),e.jsx("p",{className:"text-muted-foreground",children:"All prices are submitted directly by verified dental offices on our platform. They reflect real pricing offered to patients."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Why do costs vary by location?"}),e.jsx("p",{className:"text-muted-foreground",children:"Dental costs depend on local cost of living, overhead expenses, and market competition. Urban areas typically have higher costs."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"How can I get an accurate quote?"}),e.jsx("p",{className:"text-muted-foreground",children:"Request a consultation from 2-3 dentists in your area through AppointPanda for the most accurate pricing."})]})]})]})]})]})}export{Te as default};
