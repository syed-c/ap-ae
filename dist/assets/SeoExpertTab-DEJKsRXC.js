import{u as W,b as Ne,c as ye,j as e}from"./chunk-CPh6voF3.js";import{r as m}from"./chunk-CffrGP6S.js";import{C as n,d,a as h,b as u,c as y}from"./chunk-Dwq_v72W.js";import{s as P,b as A,a9 as Ee,bc as ke,B as x,aa as Le,ab as Ge,ac as Be,o as me,F as Oe,C as se,aK as M,L as U,p as he,a4 as De,a2 as I,a3 as E,a5 as k,a6 as L,a7 as N,G as ue,T as je,E as ve,y as te,i as j,x as qe,Q as Re,S as ze,b7 as ge,a as H,al as Ke,Z as Me,I as pe}from"./index-DflORfjh.js";import{T as Ue,a as He,b as G,c as B}from"./chunk-k8HiDHrE.js";import{T as Ve,a as $e,b as ae,c as w,d as Qe,e as b}from"./chunk-NLs5Ye4A.js";import{P as fe}from"./chunk-DSDQubI6.js";import{A as We,a as C,b as _,c as S}from"./chunk-BMzWzDrf.js";import{B as Ze}from"./chunk-Bl7VVhKV.js";import{B as be}from"./chunk-B_ghW3Ra.js";import{T as O}from"./chunk-DbdCK11k.js";import{F as Q}from"./chunk-BaL04tya.js";import{C as we}from"./chunk-BFhD_ct7.js";import{F as le}from"./chunk-BP9BFbSw.js";import{L as Ye}from"./chunk-B0x3dbdo.js";import{B as Je}from"./chunk-BiqSGqdV.js";import{R as Xe}from"./chunk-BOvFDp2b.js";import{E as es}from"./chunk-CbETxTmt.js";import"./chunk-B8auUmee.js";import"./chunk-DK8nT4cj.js";import"./chunk-Drd-rt-S.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";import"./chunk-CKWDY2Lf.js";function ss(){return W({queryKey:["seo-expert-policies"],queryFn:async()=>{const{data:i,error:t}=await P.functions.invoke("seo-expert",{body:{action:"get_policies"}});if(t)throw t;return i.policies},staleTime:1e3*60*60})}function ts(i){return W({queryKey:["seo-expert-stats",i],queryFn:async()=>{const{data:t,error:r}=await P.functions.invoke("seo-expert",{body:{action:"get_stats",page_types:i}});if(r)throw r;return{stats:t.stats,pageTypes:t.page_types,latestAudit:t.latest_audit,policiesLastUpdated:t.google_policies_last_updated}}})}function as(i){return W({queryKey:["seo-expert-issues",i],queryFn:async()=>{const{data:t,error:r}=await P.functions.invoke("seo-expert",{body:{action:"get_issues",category:i.category,page_type:i.pageType,state_filter:i.stateFilter,city_filter:i.cityFilter,severity:i.severity,limit:i.limit||100,offset:i.offset||0}});if(r)throw r;return{issues:t.issues,totalCount:t.total_count,googlePolicy:t.google_policy}},enabled:!!i.category})}function ls(){return W({queryKey:["seo-expert-filter-options"],queryFn:async()=>{const{data:i,error:t}=await P.functions.invoke("seo-expert",{body:{action:"get_filter_options"}});if(t)throw t;return{states:i.states,cities:i.cities}}})}function is(){const i=Ne();return ye({mutationFn:async t=>{const{data:r,error:g}=await P.functions.invoke("seo-expert",{body:{action:"full_audit",page_types:t.pageTypes,state_filter:t.stateFilter,city_filter:t.cityFilter,limit:t.limit||5e4}});if(g)throw g;return{runId:r.run_id,summary:r.summary,results:r.results}},onSuccess:t=>{i.invalidateQueries({queryKey:["seo-expert-stats"]}),i.invalidateQueries({queryKey:["seo-expert-issues"]}),A.success(`Audit complete! ${t.summary.pages_with_issues} pages need attention.`)},onError:t=>{A.error(`Audit failed: ${t instanceof Error?t.message:"Unknown error"}`)}})}function rs(){const i=Ne();return ye({mutationFn:async t=>{const{data:r,error:g}=await P.functions.invoke("seo-expert",{body:{action:"fix_issues",page_ids:t.pageIds,issue_category:t.issueCategory,page_type:t.pageType,custom_prompt:t.customPrompt,limit:t.limit||10}});if(g)throw g;return{fixedCount:r.fixed_count,failedCount:r.failed_count,results:r.results}},onSuccess:t=>{i.invalidateQueries({queryKey:["seo-expert-stats"]}),i.invalidateQueries({queryKey:["seo-expert-issues"]}),A.success(`Fixed ${t.fixedCount} pages. ${t.failedCount} failed.`)},onError:t=>{A.error(`Fix failed: ${t instanceof Error?t.message:"Unknown error"}`)}})}const V={state:"Location Pages (States)",city:"Location Pages (Cities)",city_treatment:"Service-Location Pages",treatment:"Service Pages",clinic:"Clinic Profiles",blog:"Blog Posts",static:"Static Pages",dentist:"Dentist Profiles"},$=[{id:"meta_title",label:"Meta Title Issues",icon:Q,color:"text-coral"},{id:"meta_description",label:"Meta Description Issues",icon:Q,color:"text-gold"},{id:"h1",label:"H1 Heading Issues",icon:ve,color:"text-primary"},{id:"content",label:"Content Issues",icon:be,color:"text-teal"},{id:"duplicate",label:"Duplicate Content",icon:we,color:"text-coral"}];function Ls(){const[i,t]=m.useState("dashboard"),[r,g]=m.useState([]),[Z,ie]=m.useState(""),[Y,re]=m.useState(""),[c,D]=m.useState(""),[p,J]=m.useState([]),[X,Ce]=m.useState(""),[T,q]=m.useState(!1),[ce,R]=m.useState(0);m.useState(null);const{data:l,isLoading:cs,refetch:ne}=ts(r.length>0?r:void 0),{data:o,isLoading:ns}=ss(),{data:de}=ls(),{data:v,isLoading:_e,refetch:ee}=as({category:c,pageType:r[0],stateFilter:Z,cityFilter:Y,limit:100}),z=is(),oe=rs(),Se=()=>{z.mutate({pageTypes:r.length>0?r:void 0,stateFilter:Z||void 0,cityFilter:Y||void 0,limit:5e3})},Ae=async()=>{if(p.length===0){A.error("Please select pages to fix");return}q(!0),R(0);const s=10,a=Math.ceil(p.length/s);let f=0,xe=0;for(let F=0;F<a;F++){const Ie=p.slice(F*s,(F+1)*s);try{const K=await oe.mutateAsync({pageIds:Ie,issueCategory:c,customPrompt:X||void 0});f+=K.fixedCount,xe+=K.failedCount}catch(K){console.error("Batch fix error:",K)}R((F+1)/a*100)}q(!1),J([]),ee(),ne(),A.success(`Fixed ${f} pages. ${xe} failed.`)},Pe=async(s,a=50)=>{q(!0),R(0);try{const f=await oe.mutateAsync({issueCategory:s,pageType:r[0],customPrompt:X||void 0,limit:a});R(100),ee(),ne()}catch(f){console.error("Fix all error:",f)}q(!1)},Te=s=>{switch(s){case"critical":return e.jsx(j,{variant:"destructive",children:"Critical"});case"high":return e.jsx(j,{className:"bg-coral/20 text-coral",children:"High"});case"medium":return e.jsx(j,{className:"bg-gold/20 text-gold",children:"Medium"});default:return e.jsx(j,{variant:"outline",children:"Low"})}},Fe=s=>s>=80?e.jsx(j,{className:"bg-teal/20 text-teal",children:s}):s>=60?e.jsx(j,{className:"bg-gold/20 text-gold",children:s}):e.jsx(j,{className:"bg-coral/20 text-coral",children:s});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-primary to-teal flex items-center justify-center",children:e.jsx(Ze,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-display font-bold text-foreground",children:"SEO Expert Bot"}),e.jsx("p",{className:"text-muted-foreground",children:"AI-powered SEO auditing & optimization following Google's latest guidelines"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ee,{children:[e.jsx(ke,{asChild:!0,children:e.jsxs(x,{variant:"outline",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Google Policies"]})}),e.jsxs(Le,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsx(Ge,{children:e.jsxs(Be,{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-5 w-5 text-primary"}),"Google SEO Policies & Guidelines"]})}),o&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-primary/10 border border-primary/20",children:[e.jsxs("p",{className:"text-sm font-medium",children:["Last Updated: ",o.lastUpdated]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"The SEO Expert Bot follows all these policies when auditing and fixing your pages."})]}),e.jsxs(We,{type:"single",collapsible:!0,children:[e.jsxs(C,{value:"updates",children:[e.jsx(_,{children:"Recent Core Updates"}),e.jsx(S,{children:e.jsx("ul",{className:"space-y-2",children:o.coreUpdates.map((s,a)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[e.jsx(Oe,{className:"h-4 w-4 mt-0.5 text-primary"}),s]},a))})})]}),e.jsxs(C,{value:"eeat",children:[e.jsx(_,{children:"E-E-A-T Guidelines"}),e.jsx(S,{children:e.jsx("ul",{className:"space-y-2",children:o.contentGuidelines.eeat.map((s,a)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[e.jsx(se,{className:"h-4 w-4 mt-0.5 text-teal"}),s]},a))})})]}),e.jsxs(C,{value:"meta-title",children:[e.jsx(_,{children:"Meta Title Rules"}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Length:"})," ",o.contentGuidelines.onPage.meta_title.minLength,"-",o.contentGuidelines.onPage.meta_title.maxLength," characters"]}),e.jsx("ul",{className:"space-y-1",children:o.contentGuidelines.onPage.meta_title.rules.map((s,a)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[e.jsx(M,{className:"h-4 w-4 mt-0.5 text-teal"}),s]},a))})]})})]}),e.jsxs(C,{value:"meta-desc",children:[e.jsx(_,{children:"Meta Description Rules"}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Length:"})," ",o.contentGuidelines.onPage.meta_description.minLength,"-",o.contentGuidelines.onPage.meta_description.maxLength," characters"]}),e.jsx("ul",{className:"space-y-1",children:o.contentGuidelines.onPage.meta_description.rules.map((s,a)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[e.jsx(M,{className:"h-4 w-4 mt-0.5 text-teal"}),s]},a))})]})})]}),e.jsxs(C,{value:"content",children:[e.jsx(_,{children:"Content Guidelines"}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Minimum:"})," ",o.contentGuidelines.onPage.content.minWords," words | ",e.jsx("strong",{children:"Ideal:"})," ",o.contentGuidelines.onPage.content.idealWords,"+ words"]}),e.jsx("ul",{className:"space-y-1",children:o.contentGuidelines.onPage.content.rules.map((s,a)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[e.jsx(M,{className:"h-4 w-4 mt-0.5 text-teal"}),s]},a))})]})})]}),e.jsxs(C,{value:"technical",children:[e.jsx(_,{children:"Technical SEO"}),e.jsx(S,{children:e.jsx("ul",{className:"space-y-1",children:o.contentGuidelines.technical.rules.map((s,a)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[e.jsx(M,{className:"h-4 w-4 mt-0.5 text-teal"}),s]},a))})})]})]})]})]})]}),e.jsxs(x,{onClick:Se,disabled:z.isPending,children:[z.isPending?e.jsx(U,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(he,{className:"h-4 w-4 mr-2"}),z.isPending?"Auditing...":"Run Full Audit"]})]})]}),e.jsx(n,{className:"card-modern",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Filters:"})]}),e.jsxs(I,{value:r[0]||"all",onValueChange:s=>g(s==="all"?[]:[s]),children:[e.jsx(E,{className:"w-48",children:e.jsx(k,{placeholder:"All Page Types"})}),e.jsxs(L,{children:[e.jsx(N,{value:"all",children:"All Page Types"}),l?.pageTypes?.map(s=>e.jsx(N,{value:s,children:V[s]||s},s))]})]}),e.jsxs(I,{value:Z||"all",onValueChange:s=>ie(s==="all"?"":s),children:[e.jsx(E,{className:"w-40",children:e.jsx(k,{placeholder:"All States"})}),e.jsxs(L,{children:[e.jsx(N,{value:"all",children:"All States"}),de?.states?.map(s=>e.jsxs(N,{value:s.slug,children:[s.name," (",s.abbreviation,")"]},s.slug))]})]}),e.jsxs(I,{value:Y||"all",onValueChange:s=>re(s==="all"?"":s),children:[e.jsx(E,{className:"w-40",children:e.jsx(k,{placeholder:"All Cities"})}),e.jsxs(L,{children:[e.jsx(N,{value:"all",children:"All Cities"}),de?.cities?.slice(0,100).map(s=>e.jsxs(N,{value:s.slug,children:[s.name,", ",s.state_abbr]},s.slug))]})]}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>{g([]),ie(""),re("")},children:"Clear Filters"})]})})}),l&&e.jsxs("div",{className:"grid grid-cols-6 gap-4",children:[e.jsx(n,{className:"card-modern",children:e.jsxs(d,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-primary/10 flex items-center justify-center",children:e.jsx(ue,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:l.stats.total_pages.toLocaleString()}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Pages"})]})]})}),e.jsx(n,{className:"card-modern",children:e.jsxs(d,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-teal/10 flex items-center justify-center",children:e.jsx(je,{className:"h-6 w-6 text-teal"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:l.stats.avg_seo_score}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg SEO Score"})]})]})}),e.jsx(n,{className:"card-modern",children:e.jsxs(d,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-coral/10 flex items-center justify-center",children:e.jsx(O,{className:"h-6 w-6 text-coral"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:l.stats.needs_optimization.toLocaleString()}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Need Fixes"})]})]})}),e.jsx(n,{className:"card-modern",children:e.jsxs(d,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-gold/10 flex items-center justify-center",children:e.jsx(Q,{className:"h-6 w-6 text-gold"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:l.stats.issues.thin_content+l.stats.issues.no_content}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Thin Content"})]})]})}),e.jsx(n,{className:"card-modern",children:e.jsxs(d,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-coral/10 flex items-center justify-center",children:e.jsx(we,{className:"h-6 w-6 text-coral"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:l.stats.issues.duplicate_content}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Duplicates"})]})]})}),e.jsx(n,{className:"card-modern",children:e.jsxs(d,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-teal/10 flex items-center justify-center",children:e.jsx(se,{className:"h-6 w-6 text-teal"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:l.stats.optimized.toLocaleString()}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Optimized"})]})]})})]}),e.jsxs(Ue,{value:i,onValueChange:t,children:[e.jsxs(He,{className:"grid w-full grid-cols-5 rounded-xl",children:[e.jsxs(G,{value:"dashboard",className:"rounded-xl",children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),"Dashboard"]}),e.jsxs(G,{value:"issues",className:"rounded-xl",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Issues"]}),e.jsxs(G,{value:"fix",className:"rounded-xl",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Fix Issues"]}),e.jsxs(G,{value:"reports",className:"rounded-xl",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Reports"]}),e.jsxs(G,{value:"integrations",className:"rounded-xl",children:[e.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Integrations"]})]}),e.jsx(B,{value:"dashboard",className:"mt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(n,{className:"card-modern",children:[e.jsxs(h,{children:[e.jsxs(u,{className:"text-lg flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5 text-coral"}),"Issues by Category"]}),e.jsx(y,{children:"Click to view and fix issues"})]}),e.jsx(d,{className:"space-y-3",children:$.map(s=>{const a=s.id==="meta_title"?(l?.stats.issues.no_meta_title||0)+(l?.stats.issues.meta_title_too_long||0)+(l?.stats.issues.meta_title_too_short||0):s.id==="meta_description"?(l?.stats.issues.no_meta_description||0)+(l?.stats.issues.meta_desc_too_long||0)+(l?.stats.issues.meta_desc_too_short||0):s.id==="h1"?(l?.stats.issues.no_h1||0)+(l?.stats.issues.h1_too_long||0):s.id==="content"?(l?.stats.issues.no_content||0)+(l?.stats.issues.thin_content||0):l?.stats.issues.duplicate_content||0;return e.jsxs(x,{variant:"outline",className:"w-full justify-between h-auto py-3",onClick:()=>{D(s.id),t("issues")},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s.icon,{className:`h-5 w-5 ${s.color}`}),e.jsx("span",{children:s.label})]}),e.jsx(j,{variant:a>0?"destructive":"secondary",children:a.toLocaleString()})]},s.id)})})]}),e.jsxs(n,{className:"card-modern",children:[e.jsxs(h,{children:[e.jsxs(u,{className:"text-lg flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5 text-primary"}),"Pages by Type"]}),e.jsx(y,{children:"Distribution of indexed pages"})]}),e.jsx(d,{children:e.jsx("div",{className:"space-y-3",children:Object.entries(l?.stats.by_type||{}).map(([s,a])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s==="clinic"?e.jsx(Je,{className:"h-4 w-4 text-muted-foreground"}):s==="city"||s==="state"?e.jsx(qe,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Q,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:V[s]||s})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{value:a/(l?.stats.total_pages||1)*100,className:"w-24 h-2"}),e.jsx("span",{className:"text-sm font-medium w-16 text-right",children:a.toLocaleString()})]})]},s))})})]}),l?.latestAudit&&e.jsxs(n,{className:"card-modern col-span-2",children:[e.jsx(h,{children:e.jsxs(u,{className:"text-lg flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5 text-teal"}),"Latest Audit Results"]})}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-muted/50",children:[e.jsx("p",{className:"text-2xl font-bold",children:l.latestAudit.total_pages}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pages Audited"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-muted/50",children:[e.jsx("p",{className:"text-2xl font-bold",children:l.latestAudit.processed_pages}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Processed"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-teal/10",children:[e.jsx("p",{className:"text-2xl font-bold text-teal",children:l.latestAudit.fixed_pages}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fixed"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-muted/50",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed"}),e.jsx("p",{className:"text-sm font-medium",children:l.latestAudit.completed_at?Re(new Date(l.latestAudit.completed_at),"PPp"):"In Progress"})]})]})})]})]})}),e.jsx(B,{value:"issues",className:"mt-4",children:e.jsxs(n,{className:"card-modern",children:[e.jsxs(h,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(u,{className:"text-lg",children:c?$.find(s=>s.id===c)?.label:"All Issues"}),e.jsxs(y,{children:[v?.totalCount||0," pages with issues"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(I,{value:c||"all",onValueChange:s=>D(s==="all"?"":s),children:[e.jsx(E,{className:"w-48",children:e.jsx(k,{placeholder:"Select Issue Type"})}),e.jsxs(L,{children:[e.jsx(N,{value:"all",children:"All Issues"}),$.map(s=>e.jsx(N,{value:s.id,children:s.label},s.id))]})]}),e.jsx(x,{variant:"outline",size:"icon",onClick:()=>ee(),children:e.jsx(Xe,{className:"h-4 w-4"})})]})]}),e.jsx(d,{className:"p-0",children:_e?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(U,{className:"h-6 w-6 animate-spin"})}):e.jsx(ze,{className:"h-[500px]",children:e.jsxs(Ve,{children:[e.jsx($e,{children:e.jsxs(ae,{children:[e.jsx(w,{className:"w-10",children:e.jsx(ge,{checked:p.length===(v?.issues?.length||0)&&(v?.issues?.length||0)>0,onCheckedChange:s=>{J(s?v?.issues?.map(a=>a.id)||[]:[])}})}),e.jsx(w,{children:"Page"}),e.jsx(w,{children:"Type"}),e.jsx(w,{children:"Issues"}),e.jsx(w,{children:"Score"}),e.jsx(w,{className:"text-right",children:"Actions"})]})}),e.jsxs(Qe,{children:[v?.issues?.map(s=>e.jsxs(ae,{children:[e.jsx(b,{children:e.jsx(ge,{checked:p.includes(s.id),onCheckedChange:a=>{J(a?[...p,s.id]:p.filter(f=>f!==s.id))}})}),e.jsx(b,{children:e.jsxs("div",{className:"max-w-xs",children:[e.jsx("p",{className:"font-mono text-sm truncate",children:s.slug}),s.current_title&&e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s.current_title})]})}),e.jsx(b,{children:e.jsx(j,{variant:"outline",children:V[s.page_type]||s.page_type})}),e.jsx(b,{children:e.jsxs("div",{className:"space-y-1",children:[s.issues.slice(0,2).map((a,f)=>e.jsxs("div",{className:"flex items-center gap-2",children:[Te(a.severity),e.jsx("span",{className:"text-xs truncate max-w-32",children:a.issue})]},f)),s.issues.length>2&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",s.issues.length-2," more"]})]})}),e.jsx(b,{children:Fe(s.seo_score)}),e.jsx(b,{className:"text-right",children:e.jsx(x,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx("a",{href:s.slug,target:"_blank",rel:"noopener noreferrer",children:e.jsx(es,{className:"h-4 w-4"})})})})]},s.id)),(!v?.issues||v.issues.length===0)&&e.jsx(ae,{children:e.jsx(b,{colSpan:6,className:"text-center text-muted-foreground py-8",children:c?"No issues found for this category":"Select an issue category to view"})})]})]})})})]})}),e.jsx(B,{value:"fix",className:"mt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(n,{className:"card-modern",children:[e.jsxs(h,{children:[e.jsxs(u,{className:"text-lg flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5 text-primary"}),"AI Fix Configuration"]}),e.jsx(y,{children:"Configure how the AI should fix issues"})]}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{children:"Issue Category"}),e.jsxs(I,{value:c||"all",onValueChange:s=>D(s==="all"?"":s),children:[e.jsx(E,{children:e.jsx(k,{placeholder:"Select issue type to fix"})}),e.jsx(L,{children:$.map(s=>e.jsx(N,{value:s.id,children:s.label},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{children:"Custom AI Instructions (Optional)"}),e.jsx(Ke,{placeholder:"Add specific instructions for the AI... e.g., 'Focus on local keywords for this city' or 'Include specific dental services mentioned'",value:X,onChange:s=>Ce(s.target.value),rows:4}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"The AI will follow Google SEO policies automatically. Add custom instructions for specific requirements."})]}),T&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Fixing progress..."}),e.jsxs("span",{children:[Math.round(ce),"%"]})]}),e.jsx(fe,{value:ce})]}),e.jsxs("div",{className:"flex gap-2",children:[p.length>0&&e.jsxs(x,{onClick:Ae,disabled:T||!c,className:"flex-1",children:[T?e.jsx(U,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(te,{className:"h-4 w-4 mr-2"}),"Fix Selected (",p.length,")"]}),e.jsxs(x,{variant:"outline",onClick:()=>Pe(c,50),disabled:T||!c,className:"flex-1",children:[T?e.jsx(U,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Fix Next 50 Pages"]})]})]})]}),e.jsxs(n,{className:"card-modern",children:[e.jsxs(h,{children:[e.jsxs(u,{className:"text-lg flex items-center gap-2",children:[e.jsx(me,{className:"h-5 w-5 text-teal"}),"Google Policy Reference"]}),e.jsx(y,{children:"The AI follows these policies when fixing issues"})]}),e.jsxs(d,{children:[c&&o?.contentGuidelines.onPage[c]&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:e.jsxs("p",{className:"font-medium text-sm",children:[c==="meta_title"&&"Length: 30-60 characters",c==="meta_description"&&"Length: 70-155 characters",c==="h1"&&"One H1 per page, 20-70 characters",c==="content"&&"Minimum: 300 words, Ideal: 800+ words"]})}),e.jsx("ul",{className:"space-y-2",children:o.contentGuidelines.onPage[c]?.rules?.map((s,a)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx(se,{className:"h-4 w-4 mt-0.5 text-teal flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:s})]},a))})]}),!c&&e.jsx("p",{className:"text-muted-foreground text-sm",children:"Select an issue category to see relevant Google policies"})]})]})]})}),e.jsx(B,{value:"reports",className:"mt-4",children:e.jsxs(n,{className:"card-modern",children:[e.jsxs(h,{children:[e.jsxs(u,{className:"text-lg flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5 text-primary"}),"Audit Reports"]}),e.jsx(y,{children:"Detailed breakdown of SEO health by page type"})]}),e.jsx(d,{children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(l?.stats.by_type||{}).map(([s,a])=>e.jsxs(n,{className:"border",children:[e.jsx(h,{className:"pb-2",children:e.jsxs(u,{className:"text-base flex items-center justify-between",children:[e.jsx("span",{children:V[s]||s}),e.jsxs(j,{variant:"outline",children:[a," pages"]})]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-2 text-sm",children:e.jsxs(x,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{g([s]),D("content"),t("issues")},children:["View ",s," Issues"]})})})]},s))})})]})}),e.jsx(B,{value:"integrations",className:"mt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(n,{className:"card-modern",children:[e.jsxs(h,{children:[e.jsxs(u,{className:"text-lg flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5 text-primary"}),"Google Search Console"]}),e.jsx(y,{children:"Connect to fetch real search performance data"})]}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-gold/10 border border-gold/20",children:[e.jsxs("p",{className:"text-sm font-medium text-gold flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"Coming Soon"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Google Search Console integration will allow the SEO Expert Bot to:"}),e.jsxs("ul",{className:"text-xs text-muted-foreground mt-2 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Fetch actual search queries and rankings"}),e.jsx("li",{children:"Identify pages losing traffic"}),e.jsx("li",{children:"Optimize based on real click-through rates"}),e.jsx("li",{children:"Detect indexing issues automatically"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{children:"Google Search Console API Key"}),e.jsx(pe,{placeholder:"Enter your GSC API key...",disabled:!0})]}),e.jsx(x,{disabled:!0,className:"w-full",children:"Connect Search Console"})]})]}),e.jsxs(n,{className:"card-modern",children:[e.jsxs(h,{children:[e.jsxs(u,{className:"text-lg flex items-center gap-2",children:[e.jsx(je,{className:"h-5 w-5 text-teal"}),"Google Analytics"]}),e.jsx(y,{children:"Connect for traffic-based optimization"})]}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-gold/10 border border-gold/20",children:[e.jsxs("p",{className:"text-sm font-medium text-gold flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"Coming Soon"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Google Analytics integration will enable:"}),e.jsxs("ul",{className:"text-xs text-muted-foreground mt-2 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Traffic-based page prioritization"}),e.jsx("li",{children:"Bounce rate optimization suggestions"}),e.jsx("li",{children:"Conversion tracking for SEO pages"}),e.jsx("li",{children:"User engagement analysis"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{children:"Google Analytics API Key"}),e.jsx(pe,{placeholder:"Enter your GA4 API key...",disabled:!0})]}),e.jsx(x,{disabled:!0,className:"w-full",children:"Connect Analytics"})]})]})]})})]})]})}export{Ls as default};
