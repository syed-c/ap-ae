import{u as R,j as e}from"./chunk-CPh6voF3.js";import{r as f}from"./chunk-CffrGP6S.js";import{L as $,x as C,w as V,C as w,i as j,p as K,I as X,a2 as Q,a3 as U,a5 as Y,a6 as Z,a7 as D,S as ee,E as ae,s as k}from"./index-DflORfjh.js";import{C as c,d as m,a as S,b as M,c as E}from"./chunk-Dwq_v72W.js";import{P as se}from"./chunk-DSDQubI6.js";import{T as te,a as re,b as T,c as A}from"./chunk-k8HiDHrE.js";import{T as ie,a as le,b as B,c as g,d as ne,e as p}from"./chunk-NLs5Ye4A.js";import{T as P}from"./chunk-DbdCK11k.js";import{F as L}from"./chunk-BaL04tya.js";import{L as ce}from"./chunk-Bpcq5jED.js";import{A as oe}from"./chunk-B0DPEAZ9.js";import{C as q}from"./chunk-CbEmr7WL.js";import"./chunk-B8auUmee.js";import"./chunk-DK8nT4cj.js";import"./chunk-Drd-rt-S.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";const de={jumeirah:{character:"upscale beachfront residential",demographics:"affluent families and expat professionals",landmarks:["Jumeirah Mosque","Kite Beach","La Mer"],narrative:"family-focused wellness"},"dubai-marina":{character:"cosmopolitan waterfront towers",demographics:"young professionals and international residents",landmarks:["Marina Walk","Dubai Marina Mall","Ain Dubai"],narrative:"modern lifestyle convenience"},deira:{character:"historic commercial district",demographics:"diverse multicultural community",landmarks:["Gold Souk","Deira City Centre","Creek"],narrative:"heritage-meets-accessibility"},"business-bay":{character:"modern commercial hub",demographics:"corporate professionals and urban residents",landmarks:["Dubai Canal","Bay Avenue","Marasi Drive"],narrative:"efficiency-first corporate care"},"downtown-dubai":{character:"premium urban landmark district",demographics:"tourists, luxury residents and business travelers",landmarks:["Burj Khalifa","Dubai Mall","Dubai Fountain"],narrative:"world-class premium dental"},"al-barsha":{character:"established residential and retail hub",demographics:"families, students and mid-range professionals",landmarks:["Mall of the Emirates","Barsha Park"],narrative:"value-driven family dentistry"},"healthcare-city":{character:"medical free zone and health hub",demographics:"medical tourists and specialist-seekers",landmarks:["DHCC","Mediclinic","Al Jalila Foundation"],narrative:"specialist medical destination"},jbr:{character:"beachfront leisure and tourism strip",demographics:"tourists, hotel residents and coastal lifestyle",landmarks:["The Walk","Bluewaters Island","JBR Beach"],narrative:"resort-style dental experience"},jlt:{character:"mid-range lakeside towers",demographics:"young professionals and small families",landmarks:["JLT Park","Cluster towers","Dubai Metro"],narrative:"affordable professional care"},"al-safa":{character:"leafy residential enclave near Jumeirah",demographics:"established families and villa residents",landmarks:["Safa Park","City Walk nearby"],narrative:"quiet neighborhood dentistry"},"bur-dubai":{character:"vibrant old-town cultural melting pot",demographics:"diverse residents, workers and heritage visitors",landmarks:["Dubai Museum","Meena Bazaar","Textile Souk"],narrative:"accessible multilingual care"},"international-city":{character:"affordable multicultural township",demographics:"budget-conscious residents and new immigrants",landmarks:["Dragon Mart","Central Park"],narrative:"budget-friendly community dental"},difc:{character:"premium financial free zone",demographics:"executives, finance professionals and diplomats",landmarks:["Gate Building","DIFC Art Nights","Gate Avenue"],narrative:"executive concierge dentistry"},"discovery-gardens":{character:"affordable garden-themed community",demographics:"families and mid-income residents",landmarks:["Ibn Battuta Mall nearby","Gardens community"],narrative:"community-centered family care"},jvc:{character:"emerging family-friendly community",demographics:"young families and first-time homeowners",landmarks:["JVC Park","Circle Mall"],narrative:"growing community wellness"},"al-nahda-dubai":{character:"border community shared with Sharjah",demographics:"cross-border commuters and mixed residents",landmarks:["Al Nahda Park","Sahara Centre nearby"],narrative:"convenient cross-emirate care"},"al-quoz":{character:"industrial-turned-creative district",demographics:"artists, gallery-goers and workers",landmarks:["Alserkal Avenue","Al Quoz Industrial"],narrative:"creative district healthcare"},"al-rashidiya":{character:"established residential near airport",demographics:"families, airport workers and long-term residents",landmarks:["Rashidiya Metro","near DXB Airport"],narrative:"airport-accessible dental care"},"dubai-hills":{character:"premium master-planned community",demographics:"affluent families and villa owners",landmarks:["Dubai Hills Mall","Dubai Hills Park","Golf Club"],narrative:"premium suburban wellness"},"al-mamzar":{character:"coastal residential near Sharjah border",demographics:"mixed-income families and beachgoers",landmarks:["Al Mamzar Beach Park","Mamzar Corniche"],narrative:"seaside community care"},"al-warqa":{character:"quiet suburban residential area",demographics:"local Emirati families and long-term residents",landmarks:["Al Warqa Park","Warqa City Mall"],narrative:"trusted neighborhood dentistry"}};function me(o,b){return o===0?"empty":o>=20&&b?"strong":o>=5?"moderate":"weak"}function H({health:o}){const h={strong:{label:"Strong",className:"bg-teal/20 text-teal border-teal/30"},moderate:{label:"Moderate",className:"bg-gold/20 text-gold border-gold/30"},weak:{label:"Weak",className:"bg-orange-500/20 text-orange-600 border-orange-500/30"},empty:{label:"Empty",className:"bg-destructive/20 text-destructive border-destructive/30"}}[o];return e.jsx(j,{className:h.className,children:h.label})}function Le(){const[o,b]=f.useState(""),[h,z]=f.useState("all"),{data:F,isLoading:G}=R({queryKey:["micro-location-coverage"],queryFn:async()=>{const{data:a}=await k.from("cities").select("id, name, slug, state_id, dentist_count, is_active, state:states(id, name, slug, abbreviation)").eq("is_active",!0).order("name"),{data:s}=await k.from("clinics").select("city_id").eq("is_active",!0),{data:x}=await k.from("seo_pages").select("slug, is_published, is_thin_content").eq("page_type","city"),i={};(s||[]).forEach(l=>{l.city_id&&(i[l.city_id]=(i[l.city_id]||0)+1)});const d={};return(x||[]).forEach(l=>{d[l.slug]={published:l.is_published,thin:l.is_thin_content}}),(a||[]).map(l=>{const u=l.state,y=`${u?.slug||""}/${l.slug}`,v=i[l.id]||0,t=d[y],N=de[l.slug],J=me(v,!!t?.published);return{id:l.id,name:l.name,slug:l.slug,emirate:u?.name||"Unknown",emirateSlug:u?.slug||"",emirateAbbr:u?.abbreviation||"",clinicCount:v,hasSeoContent:!!t?.published,isThinContent:t?.thin||!1,hasLocalContext:!!N,localContext:N,health:J,url:`/${u?.slug||""}/${l.slug}/`}})},staleTime:6e4}),n=F||[],r=f.useMemo(()=>{const a=n.length,s=n.filter(t=>t.health==="strong").length,x=n.filter(t=>t.health==="moderate").length,i=n.filter(t=>t.health==="weak").length,d=n.filter(t=>t.health==="empty").length,l=n.filter(t=>t.hasSeoContent).length,u=n.filter(t=>t.hasLocalContext).length,y=n.reduce((t,N)=>t+N.clinicCount,0),v=[...new Set(n.map(t=>t.emirate))];return{total:a,strong:s,moderate:x,weak:i,empty:d,withContent:l,withLocalContext:u,totalClinics:y,emirates:v}},[n]),I=f.useMemo(()=>n.filter(a=>!(h!=="all"&&a.emirate!==h||o&&!a.name.toLowerCase().includes(o.toLowerCase()))).sort((a,s)=>s.clinicCount-a.clinicCount),[n,h,o]),O=f.useMemo(()=>{const a={};return n.forEach(s=>{a[s.emirate]||(a[s.emirate]=[]),a[s.emirate].push(s)}),Object.entries(a).sort(([,s],[,x])=>x.length-s.length)},[n]);if(G)return e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx($,{className:"h-8 w-8 animate-spin text-primary"})});const _=r.total>0?Math.round((r.strong+r.moderate)/r.total*100):0,W=r.total>0?Math.round(r.withContent/r.total*100):0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-display font-bold text-foreground",children:"Micro-Location Coverage"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Area-level SEO health across all Emirates — clinic density, content status & local context coverage"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:[e.jsx(c,{children:e.jsxs(m,{className:"p-4 text-center",children:[e.jsx(C,{className:"h-5 w-5 text-primary mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-display font-bold",children:r.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Areas"})]})}),e.jsx(c,{children:e.jsxs(m,{className:"p-4 text-center",children:[e.jsx(V,{className:"h-5 w-5 text-teal mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-display font-bold",children:r.totalClinics}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Clinics"})]})}),e.jsx(c,{children:e.jsxs(m,{className:"p-4 text-center",children:[e.jsx(w,{className:"h-5 w-5 text-teal mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-display font-bold text-teal",children:r.strong}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Strong Areas"})]})}),e.jsx(c,{children:e.jsxs(m,{className:"p-4 text-center",children:[e.jsx(P,{className:"h-5 w-5 text-gold mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-display font-bold text-gold",children:r.moderate+r.weak}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Needs Work"})]})}),e.jsx(c,{children:e.jsxs(m,{className:"p-4 text-center",children:[e.jsx(L,{className:"h-5 w-5 text-primary mx-auto mb-1"}),e.jsxs("p",{className:"text-2xl font-display font-bold",children:[W,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Content Coverage"})]})}),e.jsx(c,{children:e.jsxs(m,{className:"p-4 text-center",children:[e.jsx(ce,{className:"h-5 w-5 text-primary mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-display font-bold",children:r.withLocalContext}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Local Context"})]})})]}),e.jsx(c,{children:e.jsxs(m,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Overall Coverage Health"}),e.jsxs("span",{className:"text-sm font-bold text-primary",children:[_,"%"]})]}),e.jsx(se,{value:_,className:"h-3"}),e.jsxs("div",{className:"flex justify-between mt-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:[r.strong," strong"]}),e.jsxs("span",{children:[r.moderate," moderate"]}),e.jsxs("span",{children:[r.weak," weak"]}),e.jsxs("span",{children:[r.empty," empty"]})]})]})}),e.jsxs(te,{defaultValue:"heatmap",children:[e.jsxs(re,{children:[e.jsx(T,{value:"heatmap",children:"Coverage Heatmap"}),e.jsx(T,{value:"table",children:"Area Details"}),e.jsx(T,{value:"gaps",children:"Content Gaps"})]}),e.jsx(A,{value:"heatmap",className:"space-y-4",children:O.map(([a,s])=>{const x=s.reduce((i,d)=>i+d.clinicCount,0);return e.jsxs(c,{children:[e.jsx(S,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(M,{className:"text-base",children:a}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(j,{variant:"outline",children:[s.length," areas"]}),e.jsxs(j,{variant:"outline",children:[x," clinics"]})]})]})}),e.jsx(m,{children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2",children:s.sort((i,d)=>d.clinicCount-i.clinicCount).map(i=>{const d=i.health==="strong"?"bg-teal/15 border-teal/30":i.health==="moderate"?"bg-gold/15 border-gold/30":i.health==="weak"?"bg-orange-500/15 border-orange-500/30":"bg-muted/50 border-border";return e.jsxs("div",{className:`rounded-xl border p-3 ${d} transition-all hover:scale-[1.02]`,children:[e.jsx("p",{className:"font-semibold text-xs truncate",children:i.name}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[i.clinicCount," clinics"]}),e.jsxs("div",{className:"flex gap-1",children:[i.hasSeoContent&&e.jsx(L,{className:"h-3 w-3 text-teal"}),i.hasLocalContext&&e.jsx(C,{className:"h-3 w-3 text-primary"})]})]})]},i.id)})})})]},a)})}),e.jsxs(A,{value:"table",className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(K,{className:"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(X,{placeholder:"Search areas...",value:o,onChange:a=>b(a.target.value),className:"pl-9"})]}),e.jsxs(Q,{value:h,onValueChange:z,children:[e.jsx(U,{className:"w-48",children:e.jsx(Y,{})}),e.jsxs(Z,{children:[e.jsx(D,{value:"all",children:"All Emirates"}),r.emirates.sort().map(a=>e.jsx(D,{value:a,children:a},a))]})]})]}),e.jsx(c,{children:e.jsx(ee,{className:"h-[500px]",children:e.jsxs(ie,{children:[e.jsx(le,{children:e.jsxs(B,{children:[e.jsx(g,{children:"Area"}),e.jsx(g,{children:"Emirate"}),e.jsx(g,{className:"text-center",children:"Clinics"}),e.jsx(g,{className:"text-center",children:"SEO Content"}),e.jsx(g,{className:"text-center",children:"Local Context"}),e.jsx(g,{className:"text-center",children:"Health"})]})}),e.jsx(ne,{children:I.map(a=>e.jsxs(B,{children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-sm",children:a.name}),e.jsx("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary",children:e.jsx(oe,{className:"h-3 w-3"})})]})}),e.jsx(p,{className:"text-sm text-muted-foreground",children:a.emirateAbbr}),e.jsx(p,{className:"text-center font-mono text-sm",children:a.clinicCount}),e.jsx(p,{className:"text-center",children:a.hasSeoContent?e.jsx(w,{className:"h-4 w-4 text-teal mx-auto"}):e.jsx(q,{className:"h-4 w-4 text-destructive/50 mx-auto"})}),e.jsx(p,{className:"text-center",children:a.hasLocalContext?e.jsx(w,{className:"h-4 w-4 text-teal mx-auto"}):e.jsx(q,{className:"h-4 w-4 text-muted-foreground/50 mx-auto"})}),e.jsx(p,{className:"text-center",children:e.jsx(H,{health:a.health})})]},a.id))})]})})})]}),e.jsxs(A,{value:"gaps",className:"space-y-4",children:[e.jsxs(c,{children:[e.jsxs(S,{children:[e.jsxs(M,{className:"text-base flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-gold"}),"Priority Content Gaps"]}),e.jsx(E,{children:"Areas with clinics but no SEO content — biggest missed opportunities"})]}),e.jsx(m,{children:e.jsx("div",{className:"space-y-2",children:n.filter(a=>a.clinicCount>0&&!a.hasSeoContent).sort((a,s)=>s.clinicCount-a.clinicCount).slice(0,20).map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl border bg-card hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-destructive/10 flex items-center justify-center",children:e.jsx(L,{className:"h-4 w-4 text-destructive"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:a.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.emirate," · ",a.clinicCount," clinics"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a.hasLocalContext?e.jsx(j,{variant:"outline",className:"text-xs",children:"Local context ready"}):e.jsx(j,{variant:"outline",className:"text-xs text-muted-foreground",children:"No local context"}),e.jsx(H,{health:a.health})]})]},a.id))})})]}),e.jsxs(c,{children:[e.jsxs(S,{children:[e.jsxs(M,{className:"text-base flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4 text-primary"}),"Missing Local Context"]}),e.jsx(E,{children:"Areas without neighborhood-specific content hooks for unique page generation"})]}),e.jsx(m,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:n.filter(a=>!a.hasLocalContext).sort((a,s)=>s.clinicCount-a.clinicCount).map(a=>e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg border bg-muted/30",children:[e.jsx(C,{className:"h-3 w-3 text-muted-foreground shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium truncate",children:a.name}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:a.emirate})]})]},a.id))})})]})]})]})]})}export{Le as default};
