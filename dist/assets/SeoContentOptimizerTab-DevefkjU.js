import{j as e,b as es,u as Ve,c as xe}from"./chunk-CPh6voF3.js";import{r as w}from"./chunk-CffrGP6S.js";import{i as j,aF as Be,aG as qe,E as ve,aK as Qe,B as u,y as K,al as ss,p as Ce,S as be,Q as Oe,G as ke,X as B,w as Re,Y as ts,Z as as,T as is,I as rs,a2 as he,a3 as ue,a5 as pe,a6 as ge,a7 as c,b7 as je,C as W,b as v,x as ls,s as Y,t as ns,L as cs,a9 as os,aa as ds,ab as ms,ac as xs,ad as hs}from"./index-DflORfjh.js";import{C as p,a as q,b as Q,c as Z,d as b}from"./chunk-Dwq_v72W.js";import{P as Ue}from"./chunk-DSDQubI6.js";import{T as Pe,a as He,b as R,c as g,d as Ae,e as h}from"./chunk-NLs5Ye4A.js";import{T as us,a as ps,b as te,c as ae}from"./chunk-k8HiDHrE.js";import{C as gs,a as js,b as fs}from"./chunk-CEjy5RHq.js";import{L as Ns}from"./chunk-DR32GIZ2.js";import{C as bs}from"./chunk-BFhD_ct7.js";import{F as ye}from"./chunk-BaL04tya.js";import{H as We}from"./chunk-K8HBjO-X.js";import{H as ys}from"./chunk-DfRibLnA.js";import{B as vs}from"./chunk-B_ghW3Ra.js";import{C as Ke}from"./chunk-Bdl4gyLq.js";import{W as ws}from"./chunk-CFui2uTv.js";import{C as Se}from"./chunk-f2aNMA4v.js";import{A as _s}from"./chunk-C2VW2Ml6.js";import{T as ze}from"./chunk-DbdCK11k.js";import{C as Cs}from"./chunk-GLPyMM0F.js";import{S as Ge}from"./chunk-Beq7cUgv.js";import{C as ks}from"./chunk-wy0nNZZG.js";import{H as Fe}from"./chunk-C077LRJi.js";import{B as Ss}from"./chunk-Bl7VVhKV.js";import{E as Te}from"./chunk-CcezodbN.js";import"./chunk-B8auUmee.js";import"./chunk-DK8nT4cj.js";import"./chunk-Drd-rt-S.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";import"./chunk-CKWDY2Lf.js";const zs={meta_title:ve,meta_description:ye,h1:We,h2:ys,content:vs},Ps={critical:{bg:"bg-red-50 dark:bg-red-950/30",border:"border-red-200 dark:border-red-800",badge:"bg-red-600 text-white",icon:"text-red-600"},high:{bg:"bg-orange-50 dark:bg-orange-950/30",border:"border-orange-200 dark:border-orange-800",badge:"bg-orange-600 text-white",icon:"text-orange-600"},medium:{bg:"bg-yellow-50 dark:bg-yellow-950/30",border:"border-yellow-200 dark:border-yellow-800",badge:"bg-yellow-600 text-white",icon:"text-yellow-600"}};function fe({title:d,type:D,count:_,severity:o,description:T,googlePolicies:y,bestPractices:X,onFix:C,disabled:O=!1}){const[k,M]=w.useState(!1),[U,ie]=w.useState(""),[x,H]=w.useState(!1),[f,L]=w.useState(null),J=zs[D],G=Ps[o],V=(I,$)=>{navigator.clipboard.writeText(I),L($),setTimeout(()=>L(null),2e3)},we=()=>{C(U.trim()||void 0)};return _===0?null:e.jsx(p,{className:`${G.bg} ${G.border} border`,children:e.jsxs(gs,{open:k,onOpenChange:M,children:[e.jsx(js,{asChild:!0,children:e.jsx(q,{className:"cursor-pointer hover:bg-black/5 dark:hover:bg-white/5 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`h-10 w-10 rounded-lg bg-background flex items-center justify-center ${G.icon}`,children:e.jsx(J,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs(Q,{className:"text-lg flex items-center gap-2",children:[d,e.jsx(j,{className:G.badge,children:o})]}),e.jsx(Z,{className:"mt-1",children:T})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl font-bold",children:_}),k?e.jsx(Be,{className:"h-5 w-5 text-muted-foreground"}):e.jsx(qe,{className:"h-5 w-5 text-muted-foreground"})]})]})})}),e.jsx(fs,{children:e.jsxs(b,{className:"pt-0 space-y-4",children:[e.jsxs("div",{className:"rounded-lg bg-background p-4 space-y-3",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2 text-sm",children:[e.jsx(ve,{className:"h-4 w-4 text-primary"}),"Google SEO Policies"]}),e.jsx("ul",{className:"space-y-2",children:y.map((I,$)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx(Qe,{className:"h-4 w-4 text-teal mt-0.5 flex-shrink-0"}),e.jsx("span",{children:I})]},$))})]}),e.jsxs("div",{className:"rounded-lg bg-background p-4 space-y-3",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2 text-sm",children:[e.jsx(Ns,{className:"h-4 w-4 text-gold"}),"Best Practices for Optimization"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:X.map((I,$)=>e.jsxs("div",{className:"flex items-start gap-2 p-2 rounded-md bg-muted/50 text-sm group cursor-pointer hover:bg-muted",onClick:()=>V(I,`practice-${$}`),children:[e.jsx("span",{className:"flex-1",children:I}),f===`practice-${$}`?e.jsx(Qe,{className:"h-4 w-4 text-teal flex-shrink-0"}):e.jsx(bs,{className:"h-4 w-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0"})]},$))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>H(!x),className:"w-full justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),"Add Custom Instructions (Optional)"]}),x?e.jsx(Be,{className:"h-4 w-4"}):e.jsx(qe,{className:"h-4 w-4"})]}),x&&e.jsx(ss,{placeholder:`Tell the AI exactly what you want for ${d.toLowerCase()}. For example:

"Include the city name at the beginning of each title"
"Make descriptions more action-oriented with CTAs"
"Focus on patient benefits rather than features"`,value:U,onChange:I=>ie(I.target.value),className:"min-h-[120px] text-sm"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:["AI will fix all ",_," pages following Google SEO policies"]}),e.jsxs(u,{onClick:we,disabled:O,children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Fix All ",_," Pages"]})]})]})})]})})}const Ne={meta_title:{title:"Missing Meta Titles",severity:"critical",description:"Pages without meta titles display URLs in search results, dramatically reducing click-through rates.",googlePolicies:["Each page must have a unique, descriptive title that accurately reflects page content","Title tags should be under 60 characters to avoid truncation in search results","Include primary keyword near the beginning of the title for better ranking signals","Avoid keyword stuffing - titles should read naturally for users","Brand name should typically appear at the end, separated by a pipe or dash"],bestPractices:["Format: [Primary Keyword] - [Secondary Info] | Brand",'Include location for local pages (e.g., "Dentist in Los Angeles")',"Use action words for service pages (Find, Get, Book)","Keep titles unique across all pages - no duplicates","Match user search intent in the title","Capitalize first letter of each major word"]},meta_description:{title:"Missing Meta Descriptions",severity:"high",description:"Pages without meta descriptions show random text snippets, reducing click-through rates by up to 30%.",googlePolicies:["Meta descriptions should accurately summarize page content in 155 characters or less","Each page needs a unique description - duplicates across pages hurt SEO","Include primary and secondary keywords naturally within the description","Write for users first, search engines second - focus on compelling copy","Avoid using quotes or special characters that may get truncated"],bestPractices:["Start with an action verb (Discover, Find, Book, Learn)","Include a clear value proposition or benefit","Add a call-to-action (Schedule today, View our services)","Include location for local SEO pages","Mention what makes the service unique","Use numbers when relevant (5-star rated, 20+ years experience)"]},h1:{title:"Missing H1 Headings",severity:"high",description:"Every page must have exactly one H1 heading that tells search engines and users the main topic.",googlePolicies:["Each page should have exactly ONE H1 heading - multiple H1s confuse crawlers","H1 should match the page title topic but not be an exact duplicate","H1 must be visible to users, not hidden with CSS","The H1 should appear near the top of the main content area","H1 should contain the primary target keyword naturally"],bestPractices:["Make H1 descriptive and specific to the page content",'Include location for local pages (e.g., "Best Dentists in Miami, FL")',"Keep H1 between 20-70 characters for optimal display","Use proper heading hierarchy (H1 → H2 → H3)","Make it compelling and benefit-focused for users",'Avoid generic H1s like "Welcome" or "Home"']},h2:{title:"Missing H2 Structure",severity:"medium",description:"Pages without proper H2 headings lack structure, making content harder to scan and reducing SEO value.",googlePolicies:["Use H2 headings to organize content into logical sections","H2s should follow a single H1 and precede H3 subheadings","Each H2 should introduce a distinct subtopic of the main content","Include relevant keywords in H2s where natural","H2s help search engines understand content hierarchy"],bestPractices:["Use 3-6 H2 headings per page for optimal structure","Include keywords naturally in H2s","Make H2s descriptive of the section content","Use questions as H2s for FAQ-style content","Common H2s: About, Services, Location, FAQs, Contact","Keep H2s concise but descriptive (5-10 words)"]},content:{title:"Thin or Missing Content",severity:"critical",description:"Pages with less than 300 words are flagged as thin content by Google, potentially hurting rankings.",googlePolicies:["Content must provide substantial value to users - avoid fluff or filler","Each page should have at least 300-500 words of unique, helpful content","Content must be original - do not duplicate from other pages or sites","Include relevant information that matches user search intent","Use proper formatting: headings, paragraphs, lists for readability"],bestPractices:["Include a compelling introduction (150+ words)","Add service/treatment descriptions for dental pages","Include location-specific information for local pages","Add 3-5 frequently asked questions with detailed answers","Use bullet points and lists for scannable content","Include trust signals (experience, credentials, reviews)","Add clear calls-to-action throughout","Optimize for featured snippets with structured answers"]}};function mt(){const d=es(),[D,_]=w.useState("overview"),[o,T]=w.useState([]),[y,X]=w.useState("all"),[C,O]=w.useState("all"),[k,M]=w.useState("all"),[U,ie]=w.useState(""),[x,H]=w.useState(null),[f,L]=w.useState(!1),[J,G]=w.useState(!1),[V,we]=w.useState({current:0,total:0,currentPage:""}),[I,$]=w.useState(null),S=w.useRef(!1),re=w.useRef(null);w.useEffect(()=>{re.current&&(re.current.scrollTop=re.current.scrollHeight)},[x?.logs]);const{data:i,refetch:Ts,isLoading:Ee}=Ve({queryKey:["seo-pages-optimizer"],queryFn:async()=>{const t=[];let r=0;for(;;){const{data:a,error:l}=await Y.from("seo_pages").select("*").order("seo_score",{ascending:!0,nullsFirst:!0}).range(r,r+1e3-1);if(l)throw l;const F=a||[];if(t.push(...F),F.length<1e3)break;r+=1e3}return t}}),n={missingTitle:i?.filter(s=>!s.meta_title).length||0,missingDescription:i?.filter(s=>!s.meta_description).length||0,missingH1:i?.filter(s=>!s.h1).length||0,thinContent:i?.filter(s=>s.is_thin_content).length||0,duplicates:i?.filter(s=>s.is_duplicate).length||0,lowScore:i?.filter(s=>(s.seo_score||0)<50).length||0,noContent:i?.filter(s=>!s.content||(s.word_count||0)<50).length||0,hasContent:i?.filter(s=>s.content&&(s.word_count||0)>=50).length||0,hasMeta:i?.filter(s=>s.meta_title&&s.meta_description).length||0,staticPages:i?.filter(s=>s.page_type==="static").length||0,needsOptimization:i?.filter(s=>s.needs_optimization).length||0,optimized:i?.filter(s=>s.is_optimized).length||0,total:i?.length||0},ee=n.missingTitle+n.missingDescription+n.missingH1+n.thinContent+n.duplicates+n.noContent,z=i?.filter(s=>!(y!=="all"&&s.page_type!==y||C==="missing_title"&&s.meta_title||C==="missing_description"&&s.meta_description||C==="missing_h1"&&s.h1||C==="thin_content"&&!s.is_thin_content||C==="no_content"&&s.content&&(s.word_count||0)>=50||C==="has_content"&&(!s.content||(s.word_count||0)<50)||C==="duplicate"&&!s.is_duplicate||C==="needs_fix"&&!s.needs_optimization||C==="low_score"&&(s.seo_score||100)>=50||k==="has_content"&&(!s.content||(s.word_count||0)<50)||k==="no_content"&&s.content&&(s.word_count||0)>=50||k==="has_meta"&&(!s.meta_title||!s.meta_description)||k==="no_meta"&&s.meta_title&&s.meta_description||k==="has_h1"&&!s.h1||k==="no_h1"&&s.h1||k==="optimized"&&!s.is_optimized||k==="not_optimized"&&s.is_optimized||U&&!s.slug.toLowerCase().includes(U.toLowerCase())&&!(s.title||"").toLowerCase().includes(U.toLowerCase())))||[],Ye=()=>{S.current=!0,v.info("Stopping optimization... Please wait for current page to complete.")},A=s=>{H(t=>t?{...t,logs:[...t.logs,{...s,timestamp:new Date}]}:null)},le=xe({mutationFn:async s=>{const{data:t,error:r}=await Y.functions.invoke("seo-content-optimizer",{body:{action:"audit_page",page_id:s}});if(r)throw r;return t},onSuccess:()=>{d.invalidateQueries({queryKey:["seo-pages-optimizer"]}),v.success("Page audited successfully")},onError:s=>v.error(s.message)}),ne=xe({mutationFn:async s=>{const{data:t,error:r}=await Y.functions.invoke("seo-content-optimizer",{body:{action:"optimize_page",page_id:s}});if(r)throw r;return t},onSuccess:s=>{d.invalidateQueries({queryKey:["seo-pages-optimizer"]}),d.invalidateQueries({queryKey:["seo-optimization-history"]}),v.success(`Page optimized! SEO Score: ${s.seo_score}`)},onError:s=>v.error(s.message)}),Me=async()=>{if(!i||i.length===0){v.info("No pages to audit");return}G(!0),S.current=!1;const s=i.length;let t=0,r=0;v.info(`Starting deep audit of ${s} pages...`);for(let a=0;a<i.length;a++){if(S.current){v.info(`Audit stopped after ${t} pages`);break}const l=i[a];we({current:a+1,total:s,currentPage:l.slug});try{await Y.functions.invoke("seo-content-optimizer",{body:{action:"audit_page",page_id:l.id}}),t++}catch{r++}a<i.length-1&&await new Promise(F=>setTimeout(F,500))}G(!1),S.current=!1,d.invalidateQueries({queryKey:["seo-pages-optimizer"]}),v.success(`Deep audit complete! Audited: ${t}, Errors: ${r}`)},se=xe({mutationFn:async s=>{L(!0),S.current=!1;const t=`run_${Date.now()}`;H({runId:t,status:"running",total:s.length,processed:0,fixed:0,errors:0,logs:[]}),A({page:"",action:"started",message:`Starting optimization of ${s.length} pages...`});const r={fixed:0,errors:0};for(let a=0;a<s.length;a++){if(S.current){A({page:"",action:"skipped",message:`Optimization stopped by user. Remaining ${s.length-a} pages skipped.`}),H(m=>m?{...m,status:"stopped"}:null);break}const l=s[a],F=i?.find(m=>m.id===l),P=F?.title||F?.slug||l;H(m=>m?{...m,processed:a,currentPage:F?.slug||l}:null),A({page:P,action:"started",message:`Optimizing: ${F?.slug}`});try{const{data:m,error:E}=await Y.functions.invoke("seo-content-optimizer",{body:{action:"optimize_page",page_id:l}});E?(r.errors++,A({page:P,action:"error",message:`Failed: ${E.message}`})):(r.fixed++,A({page:P,action:"completed",message:`Optimized successfully! Score: ${m?.seo_score||"N/A"}`,details:{new_title:m?.optimized?.meta_title,new_description:m?.optimized?.meta_description,new_h1:m?.optimized?.h1,content_added:!!m?.optimized?.intro_paragraph,score_change:`→ ${m?.seo_score||"N/A"}`}}))}catch(m){r.errors++,A({page:P,action:"error",message:`Error: ${m instanceof Error?m.message:"Unknown error"}`})}H(m=>m?{...m,processed:a+1,fixed:r.fixed,errors:r.errors}:null),a<s.length-1&&!S.current&&await new Promise(m=>setTimeout(m,1500))}return S.current||(H(a=>a?{...a,status:"completed"}:null),A({page:"",action:"completed",message:`Optimization complete! Fixed: ${r.fixed}, Errors: ${r.errors}`})),S.current=!1,L(!1),r},onSuccess:s=>{d.invalidateQueries({queryKey:["seo-pages-optimizer"]}),d.invalidateQueries({queryKey:["seo-optimization-history"]}),v.success(`Optimization complete! Fixed: ${s.fixed}, Errors: ${s.errors}`),T([])},onError:s=>{L(!1),S.current=!1,v.error(s.message)}}),Ie=()=>{const s=i?.filter(t=>!t.meta_title||!t.meta_description||!t.h1||t.is_thin_content||t.needs_optimization||!t.content||(t.word_count||0)<50).map(t=>t.id)||[];if(s.length===0){v.info("No issues to fix!");return}se.mutate(s)},Ze=()=>{if(o.length===0){v.info("No pages selected");return}se.mutate(o)},ce={missing_title:"meta_title",missing_description:"meta_description",missing_h1:"h1",thin_content:"content",no_content:"content"},_e=(s,t)=>{let r=[];switch(s){case"missing_title":case"meta_title":r=i?.filter(a=>!a.meta_title).map(a=>a.id)||[];break;case"missing_description":case"meta_description":r=i?.filter(a=>!a.meta_description).map(a=>a.id)||[];break;case"missing_h1":case"h1":r=i?.filter(a=>!a.h1).map(a=>a.id)||[];break;case"thin_content":case"content":r=i?.filter(a=>a.is_thin_content).map(a=>a.id)||[];break;case"no_content":r=i?.filter(a=>!a.content||(a.word_count||0)<50).map(a=>a.id)||[];break;case"low_score":r=i?.filter(a=>(a.seo_score||0)<50).map(a=>a.id)||[];break;case"h2":r=i?.filter(a=>a.content&&!a.content.includes("##")).map(a=>a.id)||[];break}if(r.length===0){v.info("No pages with this issue");return}ce[s]?$e.mutate({issueType:ce[s]||"content",pageIds:r,customPrompt:t}):se.mutate(r)},oe=(s,t)=>{const r=y==="all"?i:i?.filter(l=>l.page_type===y);let a=[];switch(s){case"meta_title":a=r?.filter(l=>!l.meta_title).map(l=>l.id)||[];break;case"meta_description":a=r?.filter(l=>!l.meta_description).map(l=>l.id)||[];break;case"h1":a=r?.filter(l=>!l.h1).map(l=>l.id)||[];break;case"content":a=r?.filter(l=>!l.content||(l.word_count||0)<50||l.is_thin_content).map(l=>l.id)||[];break;case"h2":a=r?.filter(l=>l.content&&!l.content.includes("##")).map(l=>l.id)||[];break}if(a.length===0){v.info(`No ${y!=="all"?y:""} pages with this issue`);return}t||ce[s]?$e.mutate({issueType:ce[s]||"content",pageIds:a,customPrompt:t}):se.mutate(a)},$e=xe({mutationFn:async({issueType:s,pageIds:t,customPrompt:r})=>{L(!0),S.current=!1;const a=`run_${Date.now()}`;H({runId:a,status:"running",total:t.length,processed:0,fixed:0,errors:0,logs:[]}),A({page:"",action:"started",message:`Starting ${s} optimization for ${t.length} pages${r?" with custom instructions":""}...`});const l={fixed:0,errors:0},F=5;for(let P=0;P<t.length;P+=F){if(S.current){A({page:"",action:"skipped",message:`Optimization stopped by user. Remaining ${t.length-P} pages skipped.`}),H(E=>E?{...E,status:"stopped"}:null);break}const m=t.slice(P,P+F);for(const E of m){const de=i?.find(N=>N.id===E),me=de?.title||de?.slug||E;H(N=>N?{...N,processed:P+m.indexOf(E),currentPage:de?.slug||E}:null),A({page:me,action:"started",message:`Optimizing: ${de?.slug}`});try{const{data:N,error:Le}=await Y.functions.invoke("seo-content-optimizer",{body:{action:"optimize_page",page_id:E,issue_type:s,custom_prompt:r}});Le?(l.errors++,A({page:me,action:"error",message:`Failed: ${Le.message}`})):(l.fixed++,A({page:me,action:"completed",message:`Optimized successfully! Score: ${N?.seo_score||"N/A"}`,details:{new_title:N?.optimized?.meta_title,new_description:N?.optimized?.meta_description,new_h1:N?.optimized?.h1,content_added:!!N?.optimized?.intro_paragraph,score_change:`→ ${N?.seo_score||"N/A"}`}}))}catch(N){l.errors++,A({page:me,action:"error",message:`Error: ${N instanceof Error?N.message:"Unknown error"}`})}H(N=>N?{...N,processed:P+m.indexOf(E)+1,fixed:l.fixed,errors:l.errors}:null),await new Promise(N=>setTimeout(N,1200))}}return S.current||(H(P=>P?{...P,status:"completed"}:null),A({page:"",action:"completed",message:`Optimization complete! Fixed: ${l.fixed}, Errors: ${l.errors}`})),S.current=!1,L(!1),l},onSuccess:s=>{d.invalidateQueries({queryKey:["seo-pages-optimizer"]}),d.invalidateQueries({queryKey:["seo-optimization-history"]}),v.success(`Optimization complete! Fixed: ${s.fixed}, Errors: ${s.errors}`)},onError:s=>{L(!1),S.current=!1,v.error(s.message)}}),Xe=s=>{switch(s){case"critical":return"text-red-600 bg-red-100";case"high":return"text-orange-600 bg-orange-100";case"medium":return"text-yellow-600 bg-yellow-100";default:return"text-blue-600 bg-blue-100"}},De=s=>s===null?e.jsx(j,{variant:"outline",children:"Not Audited"}):s>=80?e.jsx(j,{className:"bg-teal/20 text-teal",children:s}):s>=50?e.jsx(j,{className:"bg-gold/20 text-gold",children:s}):e.jsx(j,{className:"bg-coral/20 text-coral",children:s}),Je=s=>{switch(s){case"started":return e.jsx(cs,{className:"h-3 w-3 animate-spin text-primary"});case"completed":return e.jsx(W,{className:"h-3 w-3 text-teal"});case"error":return e.jsx(B,{className:"h-3 w-3 text-coral"});case"skipped":return e.jsx(ns,{className:"h-3 w-3 text-muted-foreground"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-display font-bold text-foreground",children:"SEO Content Optimizer"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"AI-powered deep content audit and optimization"})]}),e.jsx("div",{className:"flex gap-2",children:f||J?e.jsxs(u,{variant:"destructive",onClick:Ye,children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Stop Process"]}):e.jsxs(e.Fragment,{children:[e.jsxs(u,{variant:"outline",onClick:Me,disabled:Ee,children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Deep Audit"]}),e.jsxs(u,{onClick:Ie,disabled:ee===0,className:"bg-gradient-to-r from-primary to-teal",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Fix All Issues (",ee,")"]})]})})]}),J&&e.jsx(p,{className:"border-blue-300 bg-blue-50/50",children:e.jsxs(b,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx(Ce,{className:"h-5 w-5 text-blue-600 animate-pulse"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-blue-900",children:"Deep Audit in Progress"}),e.jsxs("p",{className:"text-sm text-blue-700 truncate max-w-[400px]",children:["Scanning: ",V.currentPage||"..."]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[V.current,"/",V.total]})})]}),e.jsx(Ue,{value:V.current/V.total*100,className:"h-2"})]})}),x&&(f||x.status==="completed"||x.status==="stopped")&&e.jsx(p,{className:`border-primary/30 ${x.status==="running"?"bg-primary/5":x.status==="stopped"?"bg-yellow-50":"bg-teal/5"}`,children:e.jsxs(b,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[x.status==="running"?e.jsx(K,{className:"h-5 w-5 text-primary animate-pulse"}):x.status==="stopped"?e.jsx(Ke,{className:"h-5 w-5 text-yellow-600"}):e.jsx(Se,{className:"h-5 w-5 text-teal"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:x.status==="running"?"AI Optimization in Progress":x.status==="stopped"?"Optimization Stopped":"Optimization Complete"}),x.status==="running"&&e.jsxs("p",{className:"text-sm text-muted-foreground truncate max-w-[400px]",children:["Processing: ",x.currentPage||"..."]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[x.processed,"/",x.total]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Fixed: ",e.jsx("span",{className:"text-teal",children:x.fixed})," | Errors: ",e.jsx("span",{className:"text-coral",children:x.errors})]})]})]}),e.jsx(Ue,{value:x.processed/x.total*100,className:"h-2 mb-4"}),e.jsxs("div",{className:"border rounded-lg bg-background/50",children:[e.jsxs("div",{className:"px-3 py-2 border-b flex items-center gap-2",children:[e.jsx(_s,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Live Activity Log"})]}),e.jsx(be,{className:"h-[150px]",ref:re,children:e.jsx("div",{className:"p-2 space-y-1",children:x.logs.map((s,t)=>e.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[e.jsx("span",{className:"text-muted-foreground w-16 flex-shrink-0",children:Oe(s.timestamp,"HH:mm:ss")}),Je(s.action),e.jsx("span",{className:`flex-1 ${s.action==="error"?"text-coral":s.action==="completed"?"text-teal":""}`,children:s.message}),s.details&&s.action==="completed"&&e.jsx(j,{variant:"outline",className:"text-[10px]",children:"+content"})]},t))})})]}),x.status!=="running"&&e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsx(u,{variant:"outline",size:"sm",onClick:()=>H(null),children:"Clear"})})]})}),e.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[e.jsx(p,{className:"card-modern cursor-pointer hover:border-primary/30 transition-colors",onClick:()=>{O("all"),M("all"),_("pages")},children:e.jsxs(b,{className:"p-3 flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx(ke,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold",children:n.total}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Total"})]})]})}),e.jsx(p,{className:"card-modern cursor-pointer hover:border-teal/30 transition-colors",onClick:()=>{M("has_content"),O("all"),_("pages")},children:e.jsxs(b,{className:"p-3 flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-teal/10 flex items-center justify-center",children:e.jsx(Se,{className:"h-4 w-4 text-teal"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold",children:n.hasContent}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Has Content"})]})]})}),e.jsx(p,{className:"card-modern cursor-pointer hover:border-coral/30 transition-colors",onClick:()=>{O("missing_title"),M("all"),_("pages")},children:e.jsxs(b,{className:"p-3 flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-coral/10 flex items-center justify-center",children:e.jsx(ze,{className:"h-4 w-4 text-coral"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold",children:n.missingTitle}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"No Title"})]})]})}),e.jsx(p,{className:"card-modern cursor-pointer hover:border-gold/30 transition-colors",onClick:()=>{O("missing_description"),M("all"),_("pages")},children:e.jsxs(b,{className:"p-3 flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-gold/10 flex items-center justify-center",children:e.jsx(ye,{className:"h-4 w-4 text-gold"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold",children:n.missingDescription}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"No Meta"})]})]})}),e.jsx(p,{className:"card-modern cursor-pointer hover:border-orange-300 transition-colors",onClick:()=>{O("missing_h1"),M("all"),_("pages")},children:e.jsxs(b,{className:"p-3 flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-orange-100 flex items-center justify-center",children:e.jsx(Cs,{className:"h-4 w-4 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold",children:n.missingH1}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"No H1"})]})]})}),e.jsx(p,{className:"card-modern cursor-pointer hover:border-red-300 transition-colors",onClick:()=>{O("thin_content"),M("all"),_("pages")},children:e.jsxs(b,{className:"p-3 flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-red-100 flex items-center justify-center",children:e.jsx(B,{className:"h-4 w-4 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold",children:n.thinContent}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Thin"})]})]})}),e.jsx(p,{className:"card-modern cursor-pointer hover:border-purple-300 transition-colors",onClick:()=>{M("no_content"),O("all"),_("pages")},children:e.jsxs(b,{className:"p-3 flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-purple-100 flex items-center justify-center",children:e.jsx(Re,{className:"h-4 w-4 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold",children:n.noContent}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"No Content"})]})]})}),e.jsx(p,{className:"card-modern cursor-pointer hover:border-blue-300 transition-colors",onClick:()=>{_("static")},children:e.jsxs(b,{className:"p-3 flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsx(Ge,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold",children:n.staticPages}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Static"})]})]})})]}),e.jsxs(us,{value:D,onValueChange:_,children:[e.jsxs(ps,{className:"grid w-full grid-cols-5 rounded-xl",children:[e.jsxs(te,{value:"overview",className:"rounded-xl",children:[e.jsx(ks,{className:"h-4 w-4 mr-2"}),"Overview"]}),e.jsxs(te,{value:"pages",className:"rounded-xl",children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"All Pages (",n.total,")"]}),e.jsxs(te,{value:"static",className:"rounded-xl",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Static Pages (",n.staticPages,")"]}),e.jsxs(te,{value:"issues",className:"rounded-xl",children:[e.jsx(ze,{className:"h-4 w-4 mr-2"}),"Issues (",ee,")"]}),e.jsxs(te,{value:"history",className:"rounded-xl",children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),"History"]})]}),e.jsx(ae,{value:"overview",className:"mt-4 space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(p,{className:"card-modern",children:[e.jsxs(q,{children:[e.jsxs(Q,{className:"text-lg flex items-center gap-2",children:[e.jsx(ze,{className:"h-5 w-5 text-coral"}),"Issues to Fix"]}),e.jsx(Z,{children:"Click on any issue to filter and fix"})]}),e.jsx(b,{className:"space-y-3",children:[{label:"Missing Meta Title",count:n.missingTitle,severity:"critical",filter:"missing_title"},{label:"Missing Meta Description",count:n.missingDescription,severity:"high",filter:"missing_description"},{label:"Missing H1 Heading",count:n.missingH1,severity:"high",filter:"missing_h1"},{label:"No/Empty Content",count:n.noContent,severity:"critical",filter:"no_content"},{label:"Thin Content (<250 words)",count:n.thinContent,severity:"medium",filter:"thin_content"},{label:"Low SEO Score (<50)",count:n.lowScore,severity:"medium",filter:"low_score"}].map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-muted/50 cursor-pointer transition-colors group",onClick:()=>{O(s.filter),_("pages")},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{className:Xe(s.severity),children:s.severity}),e.jsx("span",{className:"font-medium",children:s.label})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl font-bold",children:s.count}),s.count>0&&e.jsxs(u,{size:"sm",variant:"ghost",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:t=>{t.stopPropagation(),_e(s.filter)},disabled:f,children:[e.jsx(K,{className:"h-3 w-3 mr-1"}),"Fix"]}),e.jsx(ts,{className:"h-4 w-4 text-muted-foreground"})]})]},s.filter))})]}),e.jsxs(p,{className:"card-modern",children:[e.jsxs(q,{children:[e.jsxs(Q,{className:"text-lg flex items-center gap-2",children:[e.jsx(as,{className:"h-5 w-5 text-primary"}),"Quick Actions"]}),e.jsx(Z,{children:"AI-powered bulk optimization tools"})]}),e.jsxs(b,{className:"space-y-3",children:[e.jsx(u,{className:"w-full justify-start h-auto py-4",variant:"outline",onClick:Me,disabled:f||J,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsx(Ce,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-semibold",children:"Run Deep Audit"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Scan all ",n.total," pages for SEO issues"]})]})]})}),e.jsx(u,{className:"w-full justify-start h-auto py-4",variant:"outline",onClick:()=>_e("no_content"),disabled:f||n.noContent===0,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-purple-100 flex items-center justify-center",children:e.jsx(Re,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-semibold",children:"Generate Business Content"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Add overview, services & location info for ",n.noContent," pages"]})]})]})}),e.jsx(u,{className:"w-full justify-start h-auto py-4",variant:"outline",onClick:()=>_e("thin_content"),disabled:f||n.thinContent===0,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-orange-100 flex items-center justify-center",children:e.jsx(is,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-semibold",children:"Expand Thin Content"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Enrich ",n.thinContent," pages with more sections"]})]})]})}),e.jsx(u,{className:"w-full justify-start h-auto py-4 bg-gradient-to-r from-primary/10 to-teal/10 border-primary/30",variant:"outline",onClick:Ie,disabled:f||ee===0,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/20 flex items-center justify-center",children:e.jsx(Ss,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-semibold",children:"Fix All Issues"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["AI will optimize all ",ee," pages with issues"]})]})]})})]})]})]})}),e.jsx(ae,{value:"pages",className:"mt-4",children:e.jsxs(p,{className:"card-modern",children:[e.jsxs(q,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx(Q,{className:"text-lg",children:"All SEO Pages"}),e.jsx(Z,{children:'Select and optimize individual pages - filter by type, content status, or issues. Use "Select All Filtered" to bulk generate content for any pages.'})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(u,{variant:"default",size:"sm",onClick:()=>T(z.map(s=>s.id)),disabled:z.length===0,className:"bg-gradient-to-r from-primary to-teal",children:[e.jsx(Se,{className:"h-4 w-4 mr-1"}),"Select All Filtered (",z.length,")"]}),e.jsx(u,{variant:"outline",size:"sm",onClick:()=>T([]),disabled:o.length===0,children:"Clear Selection"}),o.length>0&&e.jsxs(u,{onClick:Ze,disabled:f,size:"sm",className:"bg-primary",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Generate Content (",o.length,")"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsx(rs,{placeholder:"Search pages...",className:"w-64",value:U,onChange:s=>ie(s.target.value)}),e.jsxs(he,{value:y,onValueChange:X,children:[e.jsx(ue,{className:"w-40",children:e.jsx(pe,{placeholder:"Page Type"})}),e.jsxs(ge,{children:[e.jsx(c,{value:"all",children:"All Page Types"}),e.jsxs(c,{value:"static",children:["Static Pages (",i?.filter(s=>s.page_type==="static").length||0,")"]}),e.jsxs(c,{value:"state",children:["State Pages (",i?.filter(s=>s.page_type==="state").length||0,")"]}),e.jsxs(c,{value:"city",children:["City Pages (",i?.filter(s=>s.page_type==="city").length||0,")"]}),e.jsxs(c,{value:"treatment",children:["Service Pages (",i?.filter(s=>s.page_type==="treatment").length||0,")"]}),e.jsxs(c,{value:"city_treatment",children:["Service-Location (",i?.filter(s=>s.page_type==="city_treatment").length||0,")"]}),e.jsxs(c,{value:"clinic",children:["Clinic Profiles (",i?.filter(s=>s.page_type==="clinic").length||0,")"]}),e.jsxs(c,{value:"blog",children:["Blog Posts (",i?.filter(s=>s.page_type==="blog").length||0,")"]})]})]}),e.jsxs(he,{value:k,onValueChange:M,children:[e.jsx(ue,{className:"w-44",children:e.jsx(pe,{placeholder:"Content Status"})}),e.jsxs(ge,{children:[e.jsx(c,{value:"all",children:"All Content Status"}),e.jsxs(c,{value:"has_content",children:["✓ Has Content (",n.hasContent,")"]}),e.jsxs(c,{value:"no_content",children:["✗ No Content (",n.noContent,")"]}),e.jsxs(c,{value:"has_meta",children:["✓ Has Meta Tags (",n.hasMeta,")"]}),e.jsxs(c,{value:"no_meta",children:["✗ Missing Meta (",n.total-n.hasMeta,")"]}),e.jsxs(c,{value:"has_h1",children:["✓ Has H1 (",n.total-n.missingH1,")"]}),e.jsxs(c,{value:"no_h1",children:["✗ Missing H1 (",n.missingH1,")"]}),e.jsxs(c,{value:"optimized",children:["✓ Optimized (",n.optimized,")"]}),e.jsxs(c,{value:"not_optimized",children:["✗ Not Optimized (",n.total-n.optimized,")"]})]})]}),e.jsxs(he,{value:C,onValueChange:O,children:[e.jsx(ue,{className:"w-36",children:e.jsx(pe,{placeholder:"Issue Type"})}),e.jsxs(ge,{children:[e.jsx(c,{value:"all",children:"All Issues"}),e.jsx(c,{value:"missing_title",children:"Missing Title"}),e.jsx(c,{value:"missing_description",children:"Missing Meta"}),e.jsx(c,{value:"missing_h1",children:"Missing H1"}),e.jsx(c,{value:"thin_content",children:"Thin Content"}),e.jsx(c,{value:"low_score",children:"Low Score"}),e.jsx(c,{value:"duplicate",children:"Duplicates"}),e.jsx(c,{value:"needs_fix",children:"Needs Fix"})]})]}),(y!=="all"||k!=="all"||C!=="all"||U)&&e.jsxs(u,{variant:"ghost",size:"sm",onClick:()=>{X("all"),M("all"),O("all"),ie("")},children:[e.jsx(B,{className:"h-4 w-4 mr-1"}),"Clear Filters"]})]}),(y!=="all"||k!=="all"||C!=="all")&&e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Showing:"}),y!=="all"&&e.jsx(j,{variant:"secondary",className:"capitalize",children:y.replace("_"," ")}),k!=="all"&&e.jsx(j,{variant:"secondary",className:"capitalize",children:k.replace("_"," ")}),C!=="all"&&e.jsx(j,{variant:"secondary",className:"capitalize",children:C.replace("_"," ")}),e.jsxs("span",{className:"font-semibold text-primary",children:[z.length," pages"]})]})]}),e.jsx(b,{className:"p-0",children:e.jsx(be,{className:"h-[500px]",children:e.jsxs(Pe,{children:[e.jsx(He,{children:e.jsxs(R,{children:[e.jsx(g,{className:"w-10",children:e.jsx(je,{checked:o.length===z.length&&z.length>0,onCheckedChange:s=>{T(s?z.map(t=>t.id):[])}})}),e.jsx(g,{children:"Page"}),e.jsx(g,{children:"Type"}),e.jsx(g,{children:"Title"}),e.jsx(g,{children:"H1"}),e.jsx(g,{children:"Content"}),e.jsx(g,{children:"Score"}),e.jsx(g,{children:"Status"}),e.jsx(g,{className:"text-right",children:"Actions"})]})}),e.jsxs(Ae,{children:[z.map(s=>e.jsxs(R,{children:[e.jsx(h,{children:e.jsx(je,{checked:o.includes(s.id),onCheckedChange:t=>{T(t?[...o,s.id]:o.filter(r=>r!==s.id))}})}),e.jsx(h,{children:e.jsxs("div",{className:"max-w-[200px]",children:[e.jsx("p",{className:"font-medium truncate",children:s.title||s.slug}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s.slug})]})}),e.jsx(h,{children:e.jsx(j,{variant:"outline",className:"capitalize",children:s.page_type})}),e.jsx(h,{children:s.meta_title?e.jsx(W,{className:"h-4 w-4 text-teal"}):e.jsx(B,{className:"h-4 w-4 text-coral"})}),e.jsx(h,{children:s.h1?e.jsx(W,{className:"h-4 w-4 text-teal"}):e.jsx(B,{className:"h-4 w-4 text-coral"})}),e.jsx(h,{children:s.content&&(s.word_count||0)>=50?e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.word_count,"w"]}):e.jsx(B,{className:"h-4 w-4 text-coral"})}),e.jsx(h,{children:De(s.seo_score)}),e.jsx(h,{children:s.is_optimized?e.jsx(j,{className:"bg-teal/20 text-teal",children:"Optimized"}):s.needs_optimization?e.jsx(j,{className:"bg-coral/20 text-coral",children:"Needs Fix"}):e.jsx(j,{variant:"outline",children:"Pending"})}),e.jsx(h,{className:"text-right",children:e.jsxs("div",{className:"flex gap-1 justify-end",children:[e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>le.mutate(s.id),disabled:le.isPending||f,title:"Audit",children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>ne.mutate(s.id),disabled:ne.isPending||f,title:"Optimize",children:e.jsx(K,{className:"h-4 w-4"})})]})})]},s.id)),z.length===0&&e.jsx(R,{children:e.jsx(h,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:Ee?"Loading pages...":"No pages found matching your filters"})})]})]})})})]})}),e.jsx(ae,{value:"static",className:"mt-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(p,{className:"card-modern border-blue-200 bg-blue-50/30",children:e.jsx(q,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs(Q,{className:"text-lg flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5 text-blue-600"}),"Static Pages SEO Management"]}),e.jsx(Z,{children:"Manage SEO meta titles, descriptions, and H1 headings for static pages like About, Contact, FAQ, etc."})]})})})}),e.jsxs(p,{className:"card-modern",children:[e.jsx(q,{className:"pb-3",children:e.jsxs(Q,{className:"text-base flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4 text-primary"}),"Meta Tag Rules & Google Policies"]})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-lg bg-muted/50 p-4",children:[e.jsxs("h4",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4 text-coral"}),"Meta Title Rules"]}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Maximum 60 characters (avoid truncation)"}),e.jsx("li",{children:"• Include primary keyword near the beginning"}),e.jsx("li",{children:"• Unique for each page"}),e.jsx("li",{children:"• Format: [Primary Keyword] - [Context] | Brand"}),e.jsx("li",{children:"• Avoid keyword stuffing"})]})]}),e.jsxs("div",{className:"rounded-lg bg-muted/50 p-4",children:[e.jsxs("h4",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4 text-gold"}),"Meta Description Rules"]}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Maximum 155 characters"}),e.jsx("li",{children:"• Accurate page content summary"}),e.jsx("li",{children:"• Include call-to-action"}),e.jsx("li",{children:"• Use active voice, compelling copy"}),e.jsx("li",{children:"• Include target keywords naturally"})]})]})]}),e.jsxs("div",{className:"rounded-lg bg-muted/50 p-4",children:[e.jsxs("h4",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[e.jsx(We,{className:"h-4 w-4 text-orange-600"}),"H1 Heading Rules"]}),e.jsxs("ul",{className:"text-xs text-muted-foreground grid grid-cols-2 gap-x-4 gap-y-1",children:[e.jsx("li",{children:"• Exactly ONE H1 per page"}),e.jsx("li",{children:"• Contains primary keyword"}),e.jsx("li",{children:"• 20-70 characters optimal"}),e.jsx("li",{children:"• Visible near top of content"}),e.jsx("li",{children:"• Different from meta title (related topic)"}),e.jsx("li",{children:'• Avoid generic text like "Welcome"'})]})]})]})]}),e.jsxs(p,{className:"card-modern",children:[e.jsx(q,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Q,{className:"text-base",children:["Static Pages (",i?.filter(s=>s.page_type==="static").length||0,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{size:"sm",variant:"outline",onClick:()=>{const s=i?.filter(t=>t.page_type==="static").map(t=>t.id)||[];T(s)},children:"Select All Static"}),e.jsxs(u,{size:"sm",onClick:()=>{const s=i?.filter(t=>t.page_type==="static"&&(!t.meta_title||!t.meta_description||!t.h1)).map(t=>t.id)||[];if(s.length===0){v.info("All static pages have complete meta tags");return}se.mutate(s)},disabled:f,children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Fix All Static Pages"]})]})]})}),e.jsx(b,{className:"p-0",children:e.jsx(be,{className:"h-[400px]",children:e.jsxs(Pe,{children:[e.jsx(He,{children:e.jsxs(R,{children:[e.jsx(g,{className:"w-10",children:e.jsx(je,{checked:o.length>0&&i?.filter(s=>s.page_type==="static").every(s=>o.includes(s.id)),onCheckedChange:s=>{const t=i?.filter(r=>r.page_type==="static").map(r=>r.id)||[];T(s?t:[])}})}),e.jsx(g,{children:"Page"}),e.jsx(g,{children:"Meta Title"}),e.jsx(g,{children:"Meta Description"}),e.jsx(g,{children:"H1"}),e.jsx(g,{children:"Score"}),e.jsx(g,{className:"text-right",children:"Actions"})]})}),e.jsxs(Ae,{children:[i?.filter(s=>s.page_type==="static").map(s=>e.jsxs(R,{children:[e.jsx(h,{children:e.jsx(je,{checked:o.includes(s.id),onCheckedChange:t=>{T(t?[...o,s.id]:o.filter(r=>r!==s.id))}})}),e.jsx(h,{children:e.jsxs("div",{className:"max-w-[150px]",children:[e.jsx("p",{className:"font-medium truncate",children:s.title||s.slug}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s.slug})]})}),e.jsx(h,{children:s.meta_title?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"h-4 w-4 text-teal"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.meta_title.length,"c"]})]}):e.jsx(B,{className:"h-4 w-4 text-coral"})}),e.jsx(h,{children:s.meta_description?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"h-4 w-4 text-teal"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.meta_description.length,"c"]})]}):e.jsx(B,{className:"h-4 w-4 text-coral"})}),e.jsx(h,{children:s.h1?e.jsx(W,{className:"h-4 w-4 text-teal"}):e.jsx(B,{className:"h-4 w-4 text-coral"})}),e.jsx(h,{children:De(s.seo_score)}),e.jsx(h,{className:"text-right",children:e.jsxs("div",{className:"flex gap-1 justify-end",children:[e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>le.mutate(s.id),disabled:le.isPending||f,title:"Audit",children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>ne.mutate(s.id),disabled:ne.isPending||f,title:"Optimize",children:e.jsx(K,{className:"h-4 w-4"})})]})})]},s.id)),(!i||i.filter(s=>s.page_type==="static").length===0)&&e.jsx(R,{children:e.jsx(h,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No static pages found. Static pages are auto-detected when you run a deep audit."})})]})]})})})]})]})}),e.jsx(ae,{value:"issues",className:"mt-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(p,{className:"card-modern border-primary/20",children:e.jsx(q,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Q,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ge,{className:"h-5 w-5 text-primary"}),"SEO Issue Fixer with Google Policies"]}),e.jsx(Z,{children:"Each section shows Google's SEO policies and best practices. Add custom prompts to guide the AI optimization."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Fix pages of type:"}),e.jsxs(he,{value:y,onValueChange:X,children:[e.jsx(ue,{className:"w-48",children:e.jsx(pe,{placeholder:"Page Type"})}),e.jsxs(ge,{children:[e.jsx(c,{value:"all",children:"All Page Types"}),e.jsxs(c,{value:"state",children:["State Pages (",i?.filter(s=>s.page_type==="state").length||0,")"]}),e.jsxs(c,{value:"city",children:["City Pages (",i?.filter(s=>s.page_type==="city").length||0,")"]}),e.jsxs(c,{value:"city_treatment",children:["Service-Location (",i?.filter(s=>s.page_type==="city_treatment").length||0,")"]}),e.jsxs(c,{value:"clinic",children:["Clinic Profiles (",i?.filter(s=>s.page_type==="clinic").length||0,")"]}),e.jsxs(c,{value:"treatment",children:["Service Pages (",i?.filter(s=>s.page_type==="treatment").length||0,")"]}),e.jsxs(c,{value:"static",children:["Static Pages (",i?.filter(s=>s.page_type==="static").length||0,")"]})]})]})]})]})})}),y!=="all"&&e.jsx(p,{className:"card-modern bg-muted/30",children:e.jsx(b,{className:"py-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ls,{className:"h-4 w-4 text-primary"}),e.jsxs("span",{children:["Showing issues for ",e.jsx("strong",{children:y})," pages only. "]}),e.jsxs("span",{className:"text-muted-foreground",children:["(",z.length," pages)"]}),e.jsx(u,{variant:"link",size:"sm",className:"h-auto p-0 ml-2",onClick:()=>X("all"),children:"Clear filter"})]})})}),e.jsx(fe,{type:"meta_title",count:z.filter(s=>!s.meta_title).length,onFix:s=>oe("meta_title",s),disabled:f,...Ne.meta_title}),e.jsx(fe,{type:"meta_description",count:z.filter(s=>!s.meta_description).length,onFix:s=>oe("meta_description",s),disabled:f,...Ne.meta_description}),e.jsx(fe,{type:"h1",count:z.filter(s=>!s.h1).length,onFix:s=>oe("h1",s),disabled:f,...Ne.h1}),e.jsx(fe,{type:"content",count:z.filter(s=>!s.content||(s.word_count||0)<50||s.is_thin_content).length,onFix:s=>oe("content",s),disabled:f,...Ne.content}),z.filter(s=>!s.meta_title||!s.meta_description||!s.h1||!s.content||(s.word_count||0)<50||s.is_thin_content).length===0&&e.jsx(p,{className:"card-modern",children:e.jsxs(b,{className:"py-12 text-center",children:[e.jsx(W,{className:"h-16 w-16 text-teal mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-teal",children:"All Clear!"}),e.jsx("p",{className:"text-muted-foreground",children:y!=="all"?`No SEO issues detected for ${y} pages.`:"No SEO issues detected. Your pages are optimized."})]})})]})}),e.jsx(ae,{value:"history",className:"mt-4",children:e.jsx(Hs,{onViewItem:$})})]}),e.jsx(As,{item:I,onClose:()=>$(null)})]})}function Hs({onViewItem:d}){const{data:D,isLoading:_}=Ve({queryKey:["seo-optimization-history"],queryFn:async()=>{const{data:o,error:T}=await Y.from("seo_metadata_history").select("*").order("created_at",{ascending:!1}).limit(100);if(T)throw T;return o||[]}});return _?e.jsx("div",{className:"text-center py-8",children:"Loading history..."}):e.jsxs(p,{className:"card-modern",children:[e.jsxs(q,{children:[e.jsxs(Q,{className:"text-lg flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5 text-primary"}),"Optimization History"]}),e.jsx(Z,{children:"View what content was added or changed on each page"})]}),e.jsx(b,{className:"p-0",children:e.jsx(be,{className:"h-[500px]",children:e.jsxs(Pe,{children:[e.jsx(He,{children:e.jsxs(R,{children:[e.jsx(g,{children:"Page"}),e.jsx(g,{children:"Changes Made"}),e.jsx(g,{children:"Reason"}),e.jsx(g,{children:"Date"}),e.jsx(g,{className:"text-right",children:"Action"})]})}),e.jsxs(Ae,{children:[D?.map(o=>e.jsxs(R,{children:[e.jsx(h,{children:e.jsx("p",{className:"font-medium truncate max-w-[200px]",children:o.slug})}),e.jsx(h,{children:e.jsxs("div",{className:"flex gap-1 flex-wrap",children:[o.new_title&&e.jsx(j,{variant:"outline",className:"text-xs bg-teal/10",children:"Title"}),o.new_meta_description&&e.jsx(j,{variant:"outline",className:"text-xs bg-blue-100",children:"Meta"}),o.new_h1&&e.jsx(j,{variant:"outline",className:"text-xs bg-purple-100",children:"H1"})]})}),e.jsx(h,{className:"text-sm text-muted-foreground max-w-[200px] truncate",children:o.change_reason||"Manual update"}),e.jsx(h,{className:"text-sm text-muted-foreground",children:o.created_at?Oe(new Date(o.created_at),"MMM d, HH:mm"):"-"}),e.jsx(h,{className:"text-right",children:e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>d(o),children:[e.jsx(Te,{className:"h-3 w-3 mr-1"}),"View"]})})]},o.id)),(!D||D.length===0)&&e.jsx(R,{children:e.jsx(h,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No optimization history yet"})})]})]})})})]})}function As({item:d,onClose:D}){return d?e.jsx(os,{open:!!d,onOpenChange:()=>D(),children:e.jsxs(ds,{className:"max-w-2xl max-h-[80vh] overflow-auto",children:[e.jsxs(ms,{children:[e.jsxs(xs,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5 text-primary"}),"Optimization Details"]}),e.jsxs(hs,{children:["Changes made to: ",e.jsx("span",{className:"font-medium",children:d.slug})]})]}),e.jsxs("div",{className:"space-y-6 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold flex items-center gap-2",children:e.jsx(j,{variant:"outline",children:"Meta Title"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Before"}),e.jsx("p",{className:"text-sm",children:d.previous_title||e.jsx("span",{className:"text-coral italic",children:"Empty"})})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-teal/10 border border-teal/20",children:[e.jsx("p",{className:"text-xs text-teal mb-1",children:"After"}),e.jsx("p",{className:"text-sm font-medium",children:d.new_title||e.jsx("span",{className:"text-muted-foreground italic",children:"No change"})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold flex items-center gap-2",children:e.jsx(j,{variant:"outline",children:"Meta Description"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Before"}),e.jsx("p",{className:"text-sm",children:d.previous_meta_description||e.jsx("span",{className:"text-coral italic",children:"Empty"})})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-teal/10 border border-teal/20",children:[e.jsx("p",{className:"text-xs text-teal mb-1",children:"After"}),e.jsx("p",{className:"text-sm",children:d.new_meta_description||e.jsx("span",{className:"text-muted-foreground italic",children:"No change"})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold flex items-center gap-2",children:e.jsx(j,{variant:"outline",children:"H1 Heading"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Before"}),e.jsx("p",{className:"text-sm",children:d.previous_h1||e.jsx("span",{className:"text-coral italic",children:"Empty"})})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-teal/10 border border-teal/20",children:[e.jsx("p",{className:"text-xs text-teal mb-1",children:"After"}),e.jsx("p",{className:"text-sm font-medium",children:d.new_h1||e.jsx("span",{className:"text-muted-foreground italic",children:"No change"})})]})]})]}),e.jsxs("div",{className:"pt-4 border-t flex justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Reason: ",d.change_reason||"Not specified"]}),e.jsx("span",{children:d.created_at?Oe(new Date(d.created_at),"PPp"):"-"})]})]})]})}):null}export{mt as default};
