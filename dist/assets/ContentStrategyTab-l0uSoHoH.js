import{j as e,b as U,u as b,c as I}from"./chunk-CPh6voF3.js";import{r as P}from"./chunk-CffrGP6S.js";import{f as D,m as A,y as W,t as Y,a2 as f,a3 as N,a5 as w,a6 as v,a7 as h,a9 as J,bc as X,B as E,aa as Z,ab as $,ac as ee,i as j,E as z,Q as se,a as x,I as C,al as ae,T as te,s as u,b as T}from"./index-DflORfjh.js";import{C as c,d as m,a as k,b as q,c as F}from"./chunk-Dwq_v72W.js";import{T as re,a as le,b as O,c as L}from"./chunk-k8HiDHrE.js";import{F as R}from"./chunk-BaL04tya.js";import{C as ie}from"./chunk-f2aNMA4v.js";import{P as ne}from"./chunk-HAC-i_a2.js";import{T as de}from"./chunk-BRVan1jG.js";import{B as ce}from"./chunk-B_ghW3Ra.js";import"./chunk-B8auUmee.js";import"./chunk-DK8nT4cj.js";import"./chunk-Drd-rt-S.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=D("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=D("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=D("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),S={idea:{label:"Idea",color:"bg-muted text-muted-foreground"},outlined:{label:"Outlined",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},writing:{label:"Writing",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"},review:{label:"In Review",color:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"},scheduled:{label:"Scheduled",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},published:{label:"Published",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}},xe={high:"text-red-600 border-red-300",medium:"text-yellow-600 border-yellow-300",low:"text-muted-foreground border-border"},ue={informational:"bg-blue-100 text-blue-800",commercial:"bg-green-100 text-green-800",transactional:"bg-orange-100 text-orange-800",navigational:"bg-purple-100 text-purple-800"};function Le(){return e.jsxs(re,{defaultValue:"calendar",className:"space-y-6",children:[e.jsxs(le,{className:"grid w-full grid-cols-3",children:[e.jsxs(O,{value:"calendar",className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),"Editorial Calendar"]}),e.jsxs(O,{value:"clusters",className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),"Topic Clusters"]}),e.jsxs(O,{value:"templates",className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4"}),"Templates"]})]}),e.jsx(L,{value:"calendar",children:e.jsx(he,{})}),e.jsx(L,{value:"clusters",children:e.jsx(pe,{})}),e.jsx(L,{value:"templates",children:e.jsx(ge,{})})]})}function he(){const o=U(),[p,i]=P.useState(!1),[t,l]=P.useState("all"),{data:r,isLoading:g}=b({queryKey:["editorial-calendar"],queryFn:async()=>{const{data:s,error:n}=await u.from("editorial_calendar").select("*").order("scheduled_date",{ascending:!0,nullsFirst:!1});if(n)throw n;return s||[]}}),{data:a}=b({queryKey:["topic-clusters"],queryFn:async()=>{const{data:s}=await u.from("blog_topic_clusters").select("*");return s||[]}}),{data:d}=b({queryKey:["content-templates"],queryFn:async()=>{const{data:s}=await u.from("blog_content_templates").select("*").eq("is_active",!0);return s||[]}}),M=I({mutationFn:async s=>{const{error:n}=await u.from("editorial_calendar").insert(s);if(n)throw n},onSuccess:()=>{o.invalidateQueries({queryKey:["editorial-calendar"]}),i(!1),T.success("Content item added to calendar")},onError:s=>T.error(s.message)}),G=I({mutationFn:async({id:s,status:n})=>{const _={status:n};n==="published"&&(_.published_date=new Date().toISOString().split("T")[0]);const{error:V}=await u.from("editorial_calendar").update(_).eq("id",s);if(V)throw V},onSuccess:()=>{o.invalidateQueries({queryKey:["editorial-calendar"]}),T.success("Status updated")}}),H=I({mutationFn:async s=>{const{error:n}=await u.from("editorial_calendar").delete().eq("id",s);if(n)throw n},onSuccess:()=>{o.invalidateQueries({queryKey:["editorial-calendar"]}),T.success("Item removed")}}),K=r?.filter(s=>t==="all"||s.status===t)||[],y={total:r?.length||0,ideas:r?.filter(s=>s.status==="idea").length||0,inProgress:r?.filter(s=>["outlined","writing","review"].includes(s.status)).length||0,published:r?.filter(s=>s.status==="published").length||0,scheduled:r?.filter(s=>s.status==="scheduled").length||0};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[{label:"Total",value:y.total,icon:R},{label:"Ideas",value:y.ideas,icon:W},{label:"In Progress",value:y.inProgress,icon:oe},{label:"Scheduled",value:y.scheduled,icon:Y},{label:"Published",value:y.published,icon:ie}].map(s=>e.jsx(c,{children:e.jsxs(m,{className:"pt-4 pb-3 text-center",children:[e.jsx(s.icon,{className:"h-5 w-5 mx-auto mb-1 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:s.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.label})]})},s.label))}),e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsxs(f,{value:t,onValueChange:l,children:[e.jsx(N,{className:"w-[180px]",children:e.jsx(w,{placeholder:"Filter by status"})}),e.jsxs(v,{children:[e.jsx(h,{value:"all",children:"All Statuses"}),Object.entries(S).map(([s,n])=>e.jsx(h,{value:s,children:n.label},s))]})]}),e.jsxs(J,{open:p,onOpenChange:i,children:[e.jsx(X,{asChild:!0,children:e.jsxs(E,{children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Add Content"]})}),e.jsxs(Z,{className:"max-w-lg",children:[e.jsx($,{children:e.jsx(ee,{children:"Add to Editorial Calendar"})}),e.jsx(me,{clusters:a||[],templates:d||[],onSubmit:s=>M.mutate(s),isLoading:M.isPending})]})]})]}),e.jsx("div",{className:"space-y-3",children:g?e.jsx(c,{children:e.jsx(m,{className:"py-8 text-center text-muted-foreground",children:"Loading..."})}):K.length===0?e.jsx(c,{children:e.jsxs(m,{className:"py-12 text-center",children:[e.jsx(A,{className:"h-12 w-12 mx-auto mb-3 text-muted-foreground/40"}),e.jsx("p",{className:"font-medium",children:"No content items yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add your first blog post idea to get started."})]})}):K.map(s=>e.jsx(c,{className:"hover:border-primary/30 transition-colors",children:e.jsx(m,{className:"py-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[e.jsx("h4",{className:"font-semibold truncate",children:s.title}),e.jsx(j,{className:S[s.status]?.color||"",children:S[s.status]?.label||s.status}),e.jsx(j,{variant:"outline",className:xe[s.priority]||"",children:s.priority})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground flex-wrap",children:[s.target_keyword&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(z,{className:"h-3 w-3"}),s.target_keyword]}),s.scheduled_date&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(A,{className:"h-3 w-3"}),se(new Date(s.scheduled_date),"MMM d, yyyy")]}),s.content_type&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"h-3 w-3"}),s.content_type.replace("_"," ")]}),e.jsxs("span",{children:[s.target_word_count?.toLocaleString()," words"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsxs(f,{value:s.status,onValueChange:n=>G.mutate({id:s.id,status:n}),children:[e.jsx(N,{className:"h-8 w-[120px] text-xs",children:e.jsx(w,{})}),e.jsx(v,{children:Object.entries(S).map(([n,_])=>e.jsx(h,{value:n,children:_.label},n))})]}),e.jsx(E,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>H.mutate(s.id),children:e.jsx(de,{className:"h-3.5 w-3.5"})})]})]})})},s.id))})]})}function me({clusters:o,templates:p,onSubmit:i,isLoading:t}){const[l,r]=P.useState({title:"",target_keyword:"",content_type:"blog_post",priority:"medium",topic_cluster_id:"",template_id:"",scheduled_date:"",target_word_count:1500,notes:""}),g=a=>{a.preventDefault(),i({...l,topic_cluster_id:l.topic_cluster_id||null,template_id:l.template_id||null,scheduled_date:l.scheduled_date||null})};return e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Title"}),e.jsx(C,{value:l.title,onChange:a=>r(d=>({...d,title:a.target.value})),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Target Keyword"}),e.jsx(C,{value:l.target_keyword,onChange:a=>r(d=>({...d,target_keyword:a.target.value}))})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Priority"}),e.jsxs(f,{value:l.priority,onValueChange:a=>r(d=>({...d,priority:a})),children:[e.jsx(N,{children:e.jsx(w,{})}),e.jsxs(v,{children:[e.jsx(h,{value:"high",children:"High"}),e.jsx(h,{value:"medium",children:"Medium"}),e.jsx(h,{value:"low",children:"Low"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Topic Cluster"}),e.jsxs(f,{value:l.topic_cluster_id,onValueChange:a=>r(d=>({...d,topic_cluster_id:a})),children:[e.jsx(N,{children:e.jsx(w,{placeholder:"Optional"})}),e.jsx(v,{children:o.map(a=>e.jsx(h,{value:a.id,children:a.cluster_name},a.id))})]})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Template"}),e.jsxs(f,{value:l.template_id,onValueChange:a=>r(d=>({...d,template_id:a})),children:[e.jsx(N,{children:e.jsx(w,{placeholder:"Optional"})}),e.jsx(v,{children:p.map(a=>e.jsx(h,{value:a.id,children:a.name},a.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Scheduled Date"}),e.jsx(C,{type:"date",value:l.scheduled_date,onChange:a=>r(d=>({...d,scheduled_date:a.target.value}))})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Target Words"}),e.jsx(C,{type:"number",value:l.target_word_count,onChange:a=>r(d=>({...d,target_word_count:parseInt(a.target.value)||1500}))})]})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Notes"}),e.jsx(ae,{value:l.notes,onChange:a=>r(d=>({...d,notes:a.target.value})),rows:2})]}),e.jsx(E,{type:"submit",className:"w-full",disabled:t||!l.title,children:t?"Adding...":"Add to Calendar"})]})}function pe(){const{data:o,isLoading:p}=b({queryKey:["topic-clusters"],queryFn:async()=>{const{data:i}=await u.from("blog_topic_clusters").select("*").order("cluster_name");return i||[]}});return e.jsxs("div",{className:"space-y-6",children:[e.jsx(c,{children:e.jsxs(k,{children:[e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5"}),"Topic Clusters"]}),e.jsx(F,{children:"Keyword strategy organized by pillar topics. Each cluster targets a primary keyword with supporting content."})]})}),p?e.jsx(c,{children:e.jsx(m,{className:"py-8 text-center text-muted-foreground",children:"Loading clusters..."})}):e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:o?.map(i=>e.jsxs(c,{className:"hover:border-primary/30 transition-colors",children:[e.jsxs(k,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(q,{className:"text-base",children:i.cluster_name}),i.intent_type&&e.jsx(j,{className:ue[i.intent_type]||"bg-muted",children:i.intent_type})]}),e.jsxs(F,{className:"flex items-center gap-1",children:[e.jsx(z,{className:"h-3 w-3"}),i.primary_keyword]})]}),e.jsxs(m,{children:[e.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:i.related_keywords?.map((t,l)=>e.jsx(j,{variant:"outline",className:"text-xs",children:t},l))}),i.pillar_page_slug&&e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(ce,{className:"h-3 w-3"}),"Pillar: ",i.pillar_page_slug]})]})]},i.id))})]})}function ge(){const{data:o,isLoading:p}=b({queryKey:["content-templates"],queryFn:async()=>{const{data:t}=await u.from("blog_content_templates").select("*").order("category");return t||[]}}),i={pillar:"ðŸ“–",commercial:"ðŸ’°",informational:"â„¹ï¸",local:"ðŸ“"};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(c,{children:e.jsxs(k,{children:[e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5"}),"Content Templates"]}),e.jsx(F,{children:"Reusable blog post structures with SEO guidelines. Select a template when creating content to follow proven formats."})]})}),p?e.jsx(c,{children:e.jsx(m,{className:"py-8 text-center text-muted-foreground",children:"Loading templates..."})}):e.jsx("div",{className:"grid gap-4",children:o?.map(t=>{const l=Array.isArray(t.content_structure)?t.content_structure:[];return e.jsxs(c,{className:"hover:border-primary/30 transition-colors",children:[e.jsx(k,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs(q,{className:"text-base flex items-center gap-2",children:[e.jsx("span",{children:i[t.category]||"ðŸ“„"}),t.name]}),e.jsx(F,{className:"mt-1",children:t.description})]}),e.jsxs("div",{className:"text-right shrink-0",children:[e.jsxs(j,{variant:"secondary",children:[t.target_word_count.toLocaleString()," words"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Used ",t.usage_count,"Ã—"]})]})]})}),e.jsxs(m,{children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:l.map((r,g)=>e.jsxs(j,{variant:"outline",className:"text-xs",children:[r.label," (",r.word_count,"w)"]},g))}),t.seo_guidelines&&e.jsxs("div",{className:"bg-muted/50 rounded-lg p-3 text-xs text-muted-foreground mb-3",children:[e.jsxs("p",{className:"font-medium text-foreground mb-1 flex items-center gap-1",children:[e.jsx(te,{className:"h-3 w-3"}),"SEO Guidelines"]}),t.seo_guidelines]}),t.example_titles&&t.example_titles.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium mb-1",children:"Example Titles:"}),e.jsx("ul",{className:"text-xs text-muted-foreground space-y-0.5",children:t.example_titles.map((r,g)=>e.jsxs("li",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-primary",children:"â€¢"})," ",r]},g))})]})]})]},t.id)})})]})}export{Le as default};
