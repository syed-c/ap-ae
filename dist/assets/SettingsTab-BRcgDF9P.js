import{b as le,u as ie,j as e,c as ue}from"./chunk-CPh6voF3.js";import{r as x}from"./chunk-CffrGP6S.js";import{f as xe,b as A,o as ee,B as m,s as P,t as he,C as L,i as T,G as se,Z as re,A as oe,p as ce,a as c,I as g,X as Z,al as z}from"./index-DflORfjh.js";import{C as j,d as v,a as N,b as _,c as k}from"./chunk-Dwq_v72W.js";import{S as pe}from"./chunk-DfjE-bP6.js";import{T as fe,a as je,b as U,c as V}from"./chunk-k8HiDHrE.js";import{c as ve}from"./chunk-BSjc5zjM.js";import{P as be}from"./chunk-DSDQubI6.js";import{S as ye}from"./chunk-CzOt8Wyl.js";import{R as ne}from"./chunk-BOvFDp2b.js";import{E as K}from"./chunk-CbETxTmt.js";import{T as E}from"./chunk-DbdCK11k.js";import{C as Ne}from"./chunk-CbEmr7WL.js";import{C as de}from"./chunk-ByjWEnRc.js";import{C as me}from"./chunk-wy0nNZZG.js";import{S as _e,P as we}from"./chunk-C2VW2Ml6.js";import{S as y}from"./chunk-C7BdFRQZ.js";import{U as J}from"./chunk-BcKWIjsB.js";import{D as Ce}from"./chunk-CedtSHBb.js";import{K as ke}from"./chunk-3oqKMbN4.js";import{C as Se}from"./chunk-BFhD_ct7.js";import{C as Ae}from"./chunk-j7XJPWWF.js";import{E as Pe}from"./chunk-Dfi7JVLs.js";import{E as Ie}from"./chunk-CcezodbN.js";import"./chunk-B8auUmee.js";import"./chunk-DK8nT4cj.js";import"./chunk-Drd-rt-S.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";import"./chunk-I1o_Hd8I.js";import"./chunk-CyRXX0qx.js";import"./chunk-DncHrJ4I.js";import"./chunk-BaL04tya.js";import"./chunk-GLPyMM0F.js";import"./chunk-B7d2qnKb.js";import"./chunk-D2X27E5n.js";import"./chunk-Bl7VVhKV.js";import"./chunk-B_ghW3Ra.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=xe("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);function Ge(){le();const[X,$]=x.useState(!1),[M,Y]=x.useState({}),[R,I]=x.useState(0),{data:w,isLoading:F}=ie({queryKey:["global-settings-verifications"],queryFn:async()=>{const{data:a,error:t}=await P.from("global_settings").select("key, value");if(t)throw t;return a||[]}}),u=x.useCallback(a=>w?.find(t=>t.key===a)?.value||{},[w]),O=x.useCallback(async()=>{const t=u("google_analytics")?.measurement_id;if(!t)return{id:"google_analytics",name:"Google Analytics 4",category:"Analytics",status:"not_configured",message:"No measurement ID configured",lastChecked:new Date};const o=typeof window<"u"&&typeof window.gtag=="function",b=typeof window<"u"&&Array.isArray(window.dataLayer),D=document.querySelector('meta[name="ga-measurement-id"]')?.getAttribute("content");return o&&b&&D===t?{id:"google_analytics",name:"Google Analytics 4",category:"Analytics",status:"success",message:`GA4 active: ${t}`,lastChecked:new Date,details:{measurementId:t,gtagLoaded:o,dataLayerSize:window.dataLayer?.length}}:t?{id:"google_analytics",name:"Google Analytics 4",category:"Analytics",status:"warning",message:`Configured but script may not be loaded. ID: ${t}`,lastChecked:new Date,details:{measurementId:t,gtagLoaded:o,metaContent:D}}:{id:"google_analytics",name:"Google Analytics 4",category:"Analytics",status:"error",message:"GA4 not properly initialized",lastChecked:new Date}},[u]),B=x.useCallback(async()=>{const a=u("google_search_console"),t=a?.verification_code,o=a?.verification_code_2,b=document.querySelectorAll('meta[name="google-site-verification"]'),G=[];b.forEach(W=>{const te=W.getAttribute("content");te&&G.push(te)});const D=[t,o].filter(Boolean),ge=D.every(W=>G.includes(W));return D.length===0?{id:"google_search_console",name:"Google Search Console",category:"SEO",status:"not_configured",message:"No verification codes configured",lastChecked:new Date}:ge?{id:"google_search_console",name:"Google Search Console",category:"SEO",status:"success",message:`${G.length} verification code(s) active in HTML`,lastChecked:new Date,details:{foundCodes:G,configuredCodes:D}}:{id:"google_search_console",name:"Google Search Console",category:"SEO",status:"warning",message:"Some verification codes may be missing from HTML",lastChecked:new Date,details:{foundCodes:G,configuredCodes:D}}},[u]),r=x.useCallback(async()=>{const t=u("google_analytics")?.gtm_id;return t?document.querySelector(`script[src*="googletagmanager.com/gtm.js?id=${t}"]`)?{id:"google_tag_manager",name:"Google Tag Manager",category:"Analytics",status:"success",message:`GTM active: ${t}`,lastChecked:new Date}:{id:"google_tag_manager",name:"Google Tag Manager",category:"Analytics",status:"warning",message:`GTM configured (${t}) but script not detected`,lastChecked:new Date}:{id:"google_tag_manager",name:"Google Tag Manager",category:"Analytics",status:"not_configured",message:"GTM not configured",lastChecked:new Date}},[u]),l=x.useCallback(async()=>{const t=u("tracking_pixels")?.facebook_pixel_id;return t?typeof window<"u"&&typeof window.fbq=="function"?{id:"facebook_pixel",name:"Facebook Pixel",category:"Marketing",status:"success",message:`Facebook Pixel active: ${t}`,lastChecked:new Date}:{id:"facebook_pixel",name:"Facebook Pixel",category:"Marketing",status:"warning",message:`Pixel ID configured (${t}) but fbq not loaded`,lastChecked:new Date}:{id:"facebook_pixel",name:"Facebook Pixel",category:"Marketing",status:"not_configured",message:"Facebook Pixel not configured",lastChecked:new Date}},[u]),h=x.useCallback(async()=>{const a=u("smtp"),t=!!a?.host,o=!!a?.username&&!!a?.password,b=!!a?.from_email;return t?t&&o&&b?{id:"smtp",name:"SMTP / Email",category:"Communications",status:"success",message:`SMTP configured: ${a.host}`,lastChecked:new Date,details:{host:a.host,fromEmail:a.from_email}}:{id:"smtp",name:"SMTP / Email",category:"Communications",status:"warning",message:"SMTP partially configured - missing credentials or from email",lastChecked:new Date}:{id:"smtp",name:"SMTP / Email",category:"Communications",status:"not_configured",message:"SMTP host not configured",lastChecked:new Date}},[u]),p=x.useCallback(async()=>{const t=u("google_places")?.api_key;return t?t.startsWith("AIza")&&t.length>30?{id:"google_places",name:"Google Places API",category:"APIs",status:"success",message:"API key configured (starts with AIza...)",lastChecked:new Date}:{id:"google_places",name:"Google Places API",category:"APIs",status:"warning",message:"API key format may be invalid",lastChecked:new Date}:{id:"google_places",name:"Google Places API",category:"APIs",status:"not_configured",message:"Google Places API key not configured",lastChecked:new Date}},[u]),H=x.useCallback(async()=>{const a=u("google_oauth"),t=a?.client_id,o=a?.client_secret;return!t||!o?{id:"google_oauth",name:"Google OAuth",category:"Authentication",status:"not_configured",message:"OAuth credentials not configured",lastChecked:new Date}:t.includes(".apps.googleusercontent.com")?{id:"google_oauth",name:"Google OAuth",category:"Authentication",status:"success",message:"OAuth credentials configured",lastChecked:new Date}:{id:"google_oauth",name:"Google OAuth",category:"Authentication",status:"warning",message:"Client ID format may be invalid",lastChecked:new Date}},[u]),C=x.useCallback(async()=>{const a=u("aimlapi"),t=a?.enabled,o=a?.last_test_status;return t?o==="connected"?{id:"aimlapi",name:"AIML API",category:"AI",status:"success",message:"AIML API connected and working",lastChecked:new Date}:{id:"aimlapi",name:"AIML API",category:"AI",status:"warning",message:"AIML API status unknown",lastChecked:new Date}:{id:"aimlapi",name:"AIML API",category:"AI",status:"not_configured",message:"AIML API not enabled",lastChecked:new Date}},[u]),s=x.useCallback(async()=>{$(!0),I(0);const a=[O,B,r,l,h,p,H,C],t={};for(let o=0;o<a.length;o++){try{const b=await a[o]();t[b.id]=b,Y(G=>({...G,[b.id]:b}))}catch(b){console.error("Verification error:",b)}I((o+1)/a.length*100)}$(!1),A.success("All verifications completed")},[O,B,r,l,h,p,H,C]);x.useEffect(()=>{w&&!F&&s()},[w,F]);const n=a=>{switch(a){case"success":return e.jsx(L,{className:"h-5 w-5 text-teal"});case"warning":return e.jsx(E,{className:"h-5 w-5 text-amber-500"});case"error":return e.jsx(Ne,{className:"h-5 w-5 text-destructive"});case"pending":return e.jsx(he,{className:"h-5 w-5 text-muted-foreground animate-pulse"});default:return e.jsx(E,{className:"h-5 w-5 text-muted-foreground"})}},i=a=>{switch(a){case"success":return e.jsx(T,{className:"bg-teal/20 text-teal border-teal/30",children:"Active"});case"warning":return e.jsx(T,{className:"bg-amber-500/20 text-amber-600 border-amber-500/30",children:"Warning"});case"error":return e.jsx(T,{variant:"destructive",children:"Error"});case"pending":return e.jsx(T,{variant:"outline",children:"Checking..."});default:return e.jsx(T,{variant:"outline",className:"text-muted-foreground",children:"Not Configured"})}},d=a=>{switch(a){case"Analytics":return e.jsx(me,{className:"h-4 w-4"});case"SEO":return e.jsx(ce,{className:"h-4 w-4"});case"Marketing":return e.jsx(de,{className:"h-4 w-4"});case"Communications":return e.jsx(oe,{className:"h-4 w-4"});case"APIs":return e.jsx(re,{className:"h-4 w-4"});case"Authentication":return e.jsx(ee,{className:"h-4 w-4"});case"AI":return e.jsx(re,{className:"h-4 w-4"});default:return e.jsx(se,{className:"h-4 w-4"})}},f=Object.values(M).reduce((a,t)=>(a[t.category]||(a[t.category]=[]),a[t.category].push(t),a),{}),S=Object.values(M).filter(a=>a.status==="success").length,q=Object.values(M).filter(a=>a.status==="warning").length,Q=Object.values(M).filter(a=>a.status==="error").length,ae=Object.keys(M).length;return F?e.jsx(j,{className:"card-modern",children:e.jsx(v,{className:"flex items-center justify-center py-12",children:e.jsx(ne,{className:"h-6 w-6 animate-spin text-muted-foreground"})})}):e.jsxs(j,{className:"card-modern",children:[e.jsx(N,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(_,{className:"text-lg flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5"}),"Platform Verifications"]}),e.jsx(k,{children:"Test and verify all platform integrations and tracking codes"})]}),e.jsx(m,{onClick:s,disabled:X,className:"gap-2",children:X?e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-4 w-4 animate-spin"}),"Running..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"h-4 w-4"}),"Run All Tests"]})})]})}),e.jsxs(v,{className:"space-y-6",children:[X&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(be,{value:R,className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Testing integrations... ",Math.round(R),"%"]})]}),ae>0&&e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-3 rounded-xl bg-teal/10 border border-teal/20 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-teal",children:S}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Active"})]}),e.jsxs("div",{className:"p-3 rounded-xl bg-amber-500/10 border border-amber-500/20 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:q}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Warnings"})]}),e.jsxs("div",{className:"p-3 rounded-xl bg-destructive/10 border border-destructive/20 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-destructive",children:Q}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Errors"})]}),e.jsxs("div",{className:"p-3 rounded-xl bg-muted text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:ae-S-q-Q}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Not Configured"})]})]}),e.jsx(ye,{}),e.jsx("div",{className:"space-y-6",children:Object.entries(f).map(([a,t])=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-muted-foreground",children:[d(a),a]}),e.jsx("div",{className:"space-y-2",children:t.map(o=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl border bg-card hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[n(o.status),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:o.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:o.message})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[i(o.status),o.lastChecked&&e.jsx("span",{className:"text-xs text-muted-foreground",children:o.lastChecked.toLocaleTimeString()})]})]},o.id))})]},a))}),e.jsxs("div",{className:"p-4 rounded-xl bg-muted/50 text-sm text-muted-foreground",children:[e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"Note:"})," Some verifications check if tracking codes are present in the HTML. For full validation, use the respective platform's debugging tools:"]}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:e.jsxs("a",{href:"https://tagassistant.google.com/",target:"_blank",rel:"noopener",className:"text-primary hover:underline inline-flex items-center gap-1",children:["Google Tag Assistant ",e.jsx(K,{className:"h-3 w-3"})]})}),e.jsx("li",{children:e.jsxs("a",{href:"https://search.google.com/search-console",target:"_blank",rel:"noopener",className:"text-primary hover:underline inline-flex items-center gap-1",children:["Google Search Console ",e.jsx(K,{className:"h-3 w-3"})]})}),e.jsx("li",{children:e.jsxs("a",{href:"https://developers.facebook.com/tools/debug/",target:"_blank",rel:"noopener",className:"text-primary hover:underline inline-flex items-center gap-1",children:["Facebook Pixel Helper ",e.jsx(K,{className:"h-3 w-3"})]})})]})]})]})]})}function js(){const X=le(),[$,M]=x.useState("general"),[Y,R]=x.useState({}),[I,w]=x.useState(null),{data:F,isLoading:u}=ie({queryKey:["global-settings"],queryFn:async()=>{const{data:s,error:n}=await P.from("global_settings").select("*").order("key");if(n)throw n;return s||[]}}),[O,B]=x.useState({}),r=s=>O[s]?O[s]:F?.find(i=>i.key===s)?.value||{},l=(s,n,i)=>{B(d=>({...d,[s]:{...d[s]||r(s),[n]:i}}))},h=ue({mutationFn:async({key:s,value:n})=>{const i=F?.find(d=>d.key===s);if(i){const{error:d}=await P.from("global_settings").update({value:n,updated_at:new Date().toISOString()}).eq("id",i.id);if(d)throw d}else{const{error:d}=await P.from("global_settings").insert([{key:s,value:n}]);if(d)throw d}await ve({action:"UPDATE",entityType:"global_settings",entityId:s,newValues:n})},onSuccess:()=>{X.invalidateQueries({queryKey:["global-settings"]}),A.success("Settings saved")},onError:s=>A.error(s.message)}),p=s=>{const n=O[s]||r(s);h.mutate({key:s,value:n})},H=s=>{R(n=>({...n,[s]:!n[s]}))},C=(s,n,i,d)=>{const S=r(s)[n]||"",q=Y[`${s}.${n}`];return e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:i}),e.jsxs("div",{className:"relative",children:[e.jsx(g,{type:q?"text":"password",value:S,onChange:Q=>l(s,n,Q.target.value),placeholder:d,className:"pr-10"}),e.jsx(m,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-7 w-7 p-0",onClick:()=>H(`${s}.${n}`),children:q?e.jsx(Pe,{className:"h-4 w-4"}):e.jsx(Ie,{className:"h-4 w-4"})})]})]})};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-display font-bold text-foreground",children:"Global Settings"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Configure integrations and platform settings"})]})}),e.jsxs(fe,{value:$,onValueChange:M,children:[e.jsxs(je,{className:"grid w-full grid-cols-6 rounded-xl",children:[e.jsx(U,{value:"general",className:"rounded-xl",children:"General"}),e.jsx(U,{value:"integrations",className:"rounded-xl",children:"Integrations"}),e.jsxs(U,{value:"verifications",className:"rounded-xl flex items-center gap-1",children:[e.jsx(ee,{className:"h-3 w-3"}),"Verify"]}),e.jsx(U,{value:"email",className:"rounded-xl",children:"Email / SMTP"}),e.jsx(U,{value:"google",className:"rounded-xl",children:"Google APIs"}),e.jsx(U,{value:"payment",className:"rounded-xl",children:"Payments"})]}),e.jsxs(V,{value:"general",className:"mt-4 space-y-4",children:[e.jsxs(j,{className:"card-modern",children:[e.jsxs(N,{children:[e.jsxs(_,{className:"text-lg flex items-center gap-2",children:[e.jsx(_e,{className:"h-5 w-5"}),"Platform Settings"]}),e.jsx(k,{children:"General platform configuration"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Site Name"}),e.jsx(g,{value:r("platform")?.site_name||"Appoint Panda",onChange:s=>l("platform","site_name",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Site URL"}),e.jsx(g,{value:r("platform")?.site_url||"",onChange:s=>l("platform","site_url",s.target.value),placeholder:"https://appointpanda.ae"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Support Email"}),e.jsx(g,{value:r("platform")?.support_email||"",onChange:s=>l("platform","support_email",s.target.value),placeholder:"support@appointpanda.ae"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Verification Fee (USD)"}),e.jsx(g,{type:"number",value:r("platform")?.verification_fee||49,onChange:s=>l("platform","verification_fee",parseInt(s.target.value))})]}),e.jsxs(m,{onClick:()=>p("platform"),disabled:h.isPending,children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Save Platform Settings"]})]})]}),e.jsxs(j,{className:"card-modern",children:[e.jsxs(N,{children:[e.jsxs(_,{className:"text-lg flex items-center gap-2",children:[e.jsx(we,{className:"h-5 w-5"}),"Branding"]}),e.jsx(k,{children:"Customize your site logo and favicon - upload images or provide URLs"})]}),e.jsxs(v,{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{children:"Site Logo"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{value:r("branding")?.logo_url||"",onChange:s=>l("branding","logo_url",s.target.value),placeholder:"https://example.com/logo.png",className:"flex-1"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",id:"logo-upload",accept:"image/png,image/jpeg,image/svg+xml,image/webp",className:"sr-only",onChange:async s=>{const n=s.target.files?.[0];if(n){w("logo");try{const i=`logo-${Date.now()}.${n.name.split(".").pop()}`,{data:d,error:f}=await P.storage.from("site-branding").upload(i,n,{upsert:!0});if(f)throw f;const{data:S}=P.storage.from("site-branding").getPublicUrl(d.path);l("branding","logo_url",S.publicUrl),A.success("Logo uploaded successfully")}catch(i){A.error("Upload failed: "+i.message)}finally{w(null)}}}}),e.jsx(m,{type:"button",variant:"outline",size:"icon",disabled:I==="logo",onClick:()=>document.getElementById("logo-upload")?.click(),children:I==="logo"?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-primary border-t-transparent rounded-full"}):e.jsx(J,{className:"h-4 w-4"})})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Recommended: PNG or SVG, 200x60px"}),r("branding")?.logo_url&&e.jsxs("div",{className:"p-4 border border-border rounded-xl bg-muted/30 relative group",children:[e.jsx("img",{src:r("branding")?.logo_url,alt:"Site Logo Preview",className:"max-h-12 object-contain",onError:s=>{s.target.style.display="none"}}),e.jsx(m,{type:"button",variant:"ghost",size:"icon",className:"absolute top-1 right-1 h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>l("branding","logo_url",""),children:e.jsx(Z,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{children:"Favicon"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{value:r("branding")?.favicon_url||"",onChange:s=>l("branding","favicon_url",s.target.value),placeholder:"https://example.com/favicon.ico",className:"flex-1"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",id:"favicon-upload",accept:"image/png,image/x-icon,image/ico,image/webp",className:"sr-only",onChange:async s=>{const n=s.target.files?.[0];if(n){w("favicon");try{const i=`favicon-${Date.now()}.${n.name.split(".").pop()}`,{data:d,error:f}=await P.storage.from("site-branding").upload(i,n,{upsert:!0});if(f)throw f;const{data:S}=P.storage.from("site-branding").getPublicUrl(d.path);l("branding","favicon_url",S.publicUrl),A.success("Favicon uploaded successfully")}catch(i){A.error("Upload failed: "+i.message)}finally{w(null)}}}}),e.jsx(m,{type:"button",variant:"outline",size:"icon",disabled:I==="favicon",onClick:()=>document.getElementById("favicon-upload")?.click(),children:I==="favicon"?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-primary border-t-transparent rounded-full"}):e.jsx(J,{className:"h-4 w-4"})})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Recommended: ICO or PNG, 32x32px or 64x64px"}),r("branding")?.favicon_url&&e.jsxs("div",{className:"p-4 border border-border rounded-xl bg-muted/30 flex items-center gap-3 relative group",children:[e.jsx("img",{src:r("branding")?.favicon_url,alt:"Favicon Preview",className:"w-8 h-8 object-contain",onError:s=>{s.target.style.display="none"}}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Favicon preview"}),e.jsx(m,{type:"button",variant:"ghost",size:"icon",className:"absolute top-1 right-1 h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>l("branding","favicon_url",""),children:e.jsx(Z,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{children:"Dark Mode Logo (Optional)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{value:r("branding")?.logo_dark_url||"",onChange:s=>l("branding","logo_dark_url",s.target.value),placeholder:"https://example.com/logo-dark.png",className:"flex-1"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",id:"logo-dark-upload",accept:"image/png,image/jpeg,image/svg+xml,image/webp",className:"sr-only",onChange:async s=>{const n=s.target.files?.[0];if(n){w("logo_dark");try{const i=`logo-dark-${Date.now()}.${n.name.split(".").pop()}`,{data:d,error:f}=await P.storage.from("site-branding").upload(i,n,{upsert:!0});if(f)throw f;const{data:S}=P.storage.from("site-branding").getPublicUrl(d.path);l("branding","logo_dark_url",S.publicUrl),A.success("Dark mode logo uploaded successfully")}catch(i){A.error("Upload failed: "+i.message)}finally{w(null)}}}}),e.jsx(m,{type:"button",variant:"outline",size:"icon",disabled:I==="logo_dark",onClick:()=>document.getElementById("logo-dark-upload")?.click(),children:I==="logo_dark"?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-primary border-t-transparent rounded-full"}):e.jsx(J,{className:"h-4 w-4"})})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional: Logo for dark mode. If not set, the main logo will be used."}),r("branding")?.logo_dark_url&&e.jsxs("div",{className:"p-4 border border-border rounded-xl bg-slate-800 relative group",children:[e.jsx("img",{src:r("branding")?.logo_dark_url,alt:"Dark Mode Logo Preview",className:"max-h-12 object-contain",onError:s=>{s.target.style.display="none"}}),e.jsx(m,{type:"button",variant:"ghost",size:"icon",className:"absolute top-1 right-1 h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity text-white",onClick:()=>l("branding","logo_dark_url",""),children:e.jsx(Z,{className:"h-3 w-3"})})]})]}),e.jsxs(m,{onClick:()=>p("branding"),disabled:h.isPending,children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Save Branding Settings"]})]})]}),e.jsxs(j,{className:"card-modern",children:[e.jsxs(N,{children:[e.jsxs(_,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ce,{className:"h-5 w-5"}),"Legal & Compliance"]}),e.jsx(k,{children:"Configure copyright and legal text displayed in footer and across the site"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Copyright Text"}),e.jsx(g,{value:r("legal")?.copyright_text||"",onChange:s=>l("legal","copyright_text",s.target.value),placeholder:"© 2026 AppointPanda. All rights reserved by Quick Commerce LLC."}),e.jsx("p",{className:"text-xs text-muted-foreground",children:'Displays in the footer bottom bar (e.g., "© 2026 AppointPanda...")'})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Footer Legal Text"}),e.jsx(z,{value:r("legal")?.footer_text||"",onChange:s=>l("legal","footer_text",s.target.value),placeholder:"Licensed Dental Professionals Only.",rows:2}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Additional legal disclaimer shown after copyright text"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Unsubscribe Policy"}),e.jsx(z,{value:r("legal")?.unsubscribe_policy||"",onChange:s=>l("legal","unsubscribe_policy",s.target.value),placeholder:"You can unsubscribe at any time...",rows:3})]}),e.jsxs(m,{onClick:()=>p("legal"),disabled:h.isPending,children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Save Legal Settings"]})]})]})]}),e.jsxs(V,{value:"integrations",className:"mt-4 space-y-4",children:[e.jsxs(j,{className:"card-modern",children:[e.jsxs(N,{children:[e.jsxs(_,{className:"text-lg flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5"}),"Google Search Console"]}),e.jsx(k,{children:"Add verification codes to verify site ownership with Google Search Console. You can use multiple verification methods."})]}),e.jsxs(v,{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 border border-border rounded-xl space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{variant:"outline",className:"bg-teal/10 text-teal border-teal/30",children:"Primary"}),e.jsx("span",{className:"text-sm font-medium",children:"Meta Tag Verification #1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Verification Code"}),e.jsx(g,{value:r("google_search_console")?.verification_code||"QXeUyCI6vHRD4bv5ZLJCYQVSvESe4uqju4tWaamlr2A",onChange:s=>l("google_search_console","verification_code",s.target.value),placeholder:"e.g., QXeUyCI6vHRD4bv5ZLJCYQVSvESe4uqju4tWaamlr2A"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(L,{className:"h-3 w-3 text-teal"}),e.jsx("span",{children:"Active in index.html"})]})]}),e.jsxs("div",{className:"p-4 border border-border rounded-xl space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{variant:"outline",className:"bg-blue-500/10 text-blue-500 border-blue-500/30",children:"Secondary"}),e.jsx("span",{className:"text-sm font-medium",children:"Meta Tag Verification #2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Verification Code"}),e.jsx(g,{value:r("google_search_console")?.verification_code_2||"H9uwPx5Kjhrqb_8-MKqMjxN9CBQkXuBaOie7Qw61Y-0",onChange:s=>l("google_search_console","verification_code_2",s.target.value),placeholder:"e.g., H9uwPx5Kjhrqb_8-MKqMjxN9CBQkXuBaOie7Qw61Y-0"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(L,{className:"h-3 w-3 text-teal"}),e.jsx("span",{children:"Active in index.html"})]})]}),e.jsxs("div",{className:"p-4 border border-border rounded-xl space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{variant:"outline",className:"bg-amber-500/10 text-amber-600 border-amber-500/30",children:"Alternative"}),e.jsx("span",{className:"text-sm font-medium",children:"HTML File Verification"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"HTML Verification Filename"}),e.jsx(g,{value:r("google_search_console")?.html_file_name||"",onChange:s=>l("google_search_console","html_file_name",s.target.value),placeholder:"e.g., googleabcdef123456.html"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Upload the HTML file to your ",e.jsx("code",{className:"bg-muted px-1 rounded",children:"public/"})," folder. The file should contain only the verification token provided by Google."]})]}),r("google_search_console")?.html_file_name&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(L,{className:"h-3 w-3 text-teal"}),e.jsxs("span",{children:["File configured: ",r("google_search_console")?.html_file_name]})]})]}),(()=>{const s=r("google_search_console"),n=s?.verification_code||"QXeUyCI6vHRD4bv5ZLJCYQVSvESe4uqju4tWaamlr2A",i=s?.verification_code_2||"H9uwPx5Kjhrqb_8-MKqMjxN9CBQkXuBaOie7Qw61Y-0",d=s?.html_file_name,f=[n,i,d].filter(Boolean).length;return e.jsx("div",{className:"p-3 rounded-xl bg-teal/10 border border-teal/20",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4 text-teal"}),e.jsxs("span",{className:"text-sm font-medium text-teal",children:[f," verification method",f!==1?"s":""," configured"]})]})})})(),e.jsxs(m,{onClick:()=>p("google_search_console"),disabled:h.isPending,children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Save Search Console Settings"]})]})]}),e.jsxs(j,{className:"card-modern",children:[e.jsxs(N,{children:[e.jsxs(_,{className:"text-lg flex items-center gap-2",children:[e.jsx(me,{className:"h-5 w-5"}),"Google Analytics"]}),e.jsx(k,{children:"Track website traffic and user behavior"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Google Analytics 4 Measurement ID"}),e.jsx(g,{value:r("google_analytics")?.measurement_id||"",onChange:s=>l("google_analytics","measurement_id",s.target.value),placeholder:"G-XXXXXXXXXX"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Find this in your Google Analytics account under Admin → Data Streams → Your website stream"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Google Tag Manager ID (Optional)"}),e.jsx(g,{value:r("google_analytics")?.gtm_id||"",onChange:s=>l("google_analytics","gtm_id",s.target.value),placeholder:"GTM-XXXXXXX"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Use Google Tag Manager for more advanced tracking configurations"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{children:"Enable Analytics Tracking"}),e.jsx(pe,{checked:r("google_analytics")?.enabled??!1,onCheckedChange:s=>l("google_analytics","enabled",s)})]}),(()=>{const s=r("google_analytics"),n=s?.measurement_id||s?.gtm_id,i=s?.enabled;return e.jsx("div",{className:`p-3 rounded-xl ${n&&i?"bg-teal/10 border border-teal/20":"bg-muted"}`,children:e.jsx("div",{className:"flex items-center gap-2",children:n&&i?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"h-4 w-4 text-teal"}),e.jsx("span",{className:"text-sm font-medium text-teal",children:"Analytics tracking active"})]}):n?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-4 w-4 text-amber-500"}),e.jsx("span",{className:"text-sm text-amber-600",children:"Analytics configured but disabled"})]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"No analytics configured"})]})})})})(),e.jsxs(m,{onClick:()=>p("google_analytics"),disabled:h.isPending,children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Save Analytics Settings"]})]})]}),e.jsxs(j,{className:"card-modern",children:[e.jsxs(N,{children:[e.jsxs(_,{className:"text-lg flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5"}),"Custom Scripts & Pixels"]}),e.jsx(k,{children:"Add custom tracking scripts, chat widgets, or other integrations"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Facebook Pixel ID"}),e.jsx(g,{value:r("tracking_pixels")?.facebook_pixel_id||"",onChange:s=>l("tracking_pixels","facebook_pixel_id",s.target.value),placeholder:"123456789012345"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Custom Head Scripts"}),e.jsx(z,{value:r("custom_scripts")?.head_scripts||"",onChange:s=>l("custom_scripts","head_scripts",s.target.value),placeholder:"<!-- Paste custom scripts here -->",rows:4,className:"font-mono text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Scripts added here will be injected into the <head> of every page"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Custom Body Scripts (End of Body)"}),e.jsx(z,{value:r("custom_scripts")?.body_scripts||"",onChange:s=>l("custom_scripts","body_scripts",s.target.value),placeholder:"<!-- Paste custom scripts here -->",rows:4,className:"font-mono text-sm"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(m,{onClick:()=>p("tracking_pixels"),disabled:h.isPending,children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Save Pixel Settings"]}),e.jsxs(m,{onClick:()=>p("custom_scripts"),disabled:h.isPending,variant:"outline",children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Save Custom Scripts"]})]})]})]})]}),e.jsx(V,{value:"verifications",className:"mt-4",children:e.jsx(Ge,{})}),e.jsx(V,{value:"email",className:"mt-4",children:e.jsxs(j,{className:"card-modern",children:[e.jsxs(N,{children:[e.jsxs(_,{className:"text-lg flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5"}),"SMTP Configuration"]}),e.jsx(k,{children:"Email sending configuration for outreach campaigns"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"SMTP Host"}),e.jsx(g,{value:r("smtp")?.host||"",onChange:s=>l("smtp","host",s.target.value),placeholder:"smtp.resend.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"SMTP Port"}),e.jsx(g,{type:"number",value:r("smtp")?.port||587,onChange:s=>l("smtp","port",parseInt(s.target.value))})]})]}),C("smtp","username","SMTP Username","resend"),C("smtp","password","SMTP Password / API Key","••••••••"),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"From Name"}),e.jsx(g,{value:r("smtp")?.from_name||"",onChange:s=>l("smtp","from_name",s.target.value),placeholder:"Appoint Panda"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"From Email"}),e.jsx(g,{value:r("smtp")?.from_email||"",onChange:s=>l("smtp","from_email",s.target.value),placeholder:"noreply@appointpanda.ae"})]})]}),e.jsxs(m,{onClick:()=>p("smtp"),disabled:h.isPending,children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Save Email Settings"]})]})]})}),e.jsxs(V,{value:"google",className:"mt-4 space-y-4",children:[e.jsxs(j,{className:"card-modern",children:[e.jsxs(N,{children:[e.jsxs(_,{className:"text-lg flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),"Google Places API"]}),e.jsx(k,{children:"Required for GMB import functionality"})]}),e.jsxs(v,{className:"space-y-4",children:[C("google_places","api_key","Google Places API Key","AIza..."),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Get your API key from the ",e.jsx("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener",className:"text-primary hover:underline",children:"Google Cloud Console"})]}),e.jsxs(m,{onClick:()=>p("google_places"),disabled:h.isPending,children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Save Google Places Settings"]})]})]}),e.jsxs(j,{className:"card-modern",children:[e.jsxs(N,{children:[e.jsxs(_,{className:"text-lg flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5"}),"Google OAuth (for GMB Claim Verification)"]}),e.jsx(k,{children:"Configure OAuth credentials and callback URL for Google login"})]}),e.jsxs(v,{className:"space-y-4",children:[C("google_oauth","client_id","Client ID","xxx.apps.googleusercontent.com"),C("google_oauth","client_secret","Client Secret","••••••••"),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{className:"flex items-center gap-2",children:["Callback URL",e.jsx(T,{variant:"outline",className:"text-[10px]",children:"Editable"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{value:r("google_oauth")?.callback_url||`${window.location.origin}/auth/callback`,onChange:s=>l("google_oauth","callback_url",s.target.value),placeholder:"https://www.appointpanda.ae/auth/callback"}),e.jsx(m,{variant:"outline",size:"icon",onClick:()=>{const s=r("google_oauth")?.callback_url||`${window.location.origin}/auth/callback`;navigator.clipboard.writeText(s),A.success("Copied to clipboard")},children:e.jsx(Se,{className:"h-4 w-4"})})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Set your production callback URL (e.g., ",e.jsx("strong",{children:"https://www.appointpanda.ae/auth/callback"}),"). Add this URL as an authorized redirect URI in your"," ",e.jsxs("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline inline-flex items-center gap-1",children:["Google Cloud Console ",e.jsx(K,{className:"h-3 w-3"})]})]})]}),(()=>{const s=r("google_oauth"),n=s?.client_id&&s?.client_secret,i=s?.callback_url;return e.jsx("div",{className:`p-3 rounded-xl ${n?"bg-teal/10 border border-teal/20":"bg-muted"}`,children:e.jsx("div",{className:"flex items-center gap-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"h-4 w-4 text-teal"}),e.jsxs("span",{className:"text-sm font-medium text-teal",children:["OAuth credentials configured",i?` • Custom callback: ${i}`:""]})]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"OAuth credentials not configured"})]})})})})(),e.jsxs(m,{onClick:()=>p("google_oauth"),disabled:h.isPending,children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Save Google OAuth Settings"]})]})]}),e.jsxs(j,{className:"card-modern",children:[e.jsx(N,{children:e.jsxs(_,{className:"text-lg flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),"Google Search Console"]})}),e.jsxs(v,{className:"space-y-4",children:[C("google_search_console","access_token","Access Token","••••••••"),e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-muted/50",children:[e.jsx(E,{className:"h-5 w-5 text-gold"}),e.jsx("span",{className:"text-sm",children:"OAuth integration coming soon. Token refresh not yet automated."})]}),e.jsxs(m,{onClick:()=>p("google_search_console"),disabled:h.isPending,children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Save Search Console Settings"]})]})]})]}),e.jsx(V,{value:"payment",className:"mt-4",children:e.jsxs(j,{className:"card-modern",children:[e.jsxs(N,{children:[e.jsxs(_,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ae,{className:"h-5 w-5"}),"Payment Gateway"]}),e.jsx(k,{children:"Configure payment processing for verification subscriptions"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 p-4 rounded-xl bg-blue-light border border-blue-custom/20",children:[e.jsx(E,{className:"h-5 w-5 text-blue-custom"}),e.jsx("span",{className:"text-sm",children:"Payment gateway integration coming soon. Currently using manual verification."})]}),C("payment","stripe_secret_key","Stripe Secret Key (for future use)","sk_..."),C("payment","stripe_webhook_secret","Stripe Webhook Secret","whsec_..."),e.jsxs(m,{onClick:()=>p("payment"),disabled:h.isPending,children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Save Payment Settings"]})]})]})})]})]})}export{js as default};
