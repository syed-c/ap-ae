import{b as ge,u as T,c as fe,j as e}from"./chunk-CPh6voF3.js";import{r as m}from"./chunk-CffrGP6S.js";import{f as ve,M as je,B as c,a as x,I as u,a2 as H,a3 as M,a5 as D,a6 as V,a7 as w,G as K,b as P,bJ as be,b6 as ye,b5 as ke,bf as Ne,b4 as we,s as g,bB as Ce}from"./index-DflORfjh.js";import{C as _,a as F,b as q,c as Q,d as E}from"./chunk-Dwq_v72W.js";import{S as $}from"./chunk-DfjE-bP6.js";import{T as Se,a as Ae,b as U,c as R}from"./chunk-k8HiDHrE.js";import{T as Le,a as Te,b as W,c as y,d as Pe,e as k}from"./chunk-NLs5Ye4A.js";import{c as _e}from"./chunk-BSjc5zjM.js";import{S as Y}from"./chunk-C7BdFRQZ.js";import{P as z}from"./chunk-HAC-i_a2.js";import{G as Fe}from"./chunk-DqEkDSiw.js";import{S as qe}from"./chunk-B51FxpoB.js";import{T as O}from"./chunk-BRVan1jG.js";import{F as Ee}from"./chunk-BaL04tya.js";import{L as J}from"./chunk-CG1o0-Xj.js";import"./chunk-B8auUmee.js";import"./chunk-DK8nT4cj.js";import"./chunk-Drd-rt-S.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=ve("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]),He=[{label:"Home",path:"/"},{label:"About Us",path:"/about"},{label:"Contact",path:"/contact"},{label:"FAQ",path:"/faq"},{label:"Blog",path:"/blog"},{label:"Services",path:"/services"},{label:"Pricing",path:"/pricing"},{label:"How It Works",path:"/how-it-works"},{label:"List Your Practice",path:"/list-your-practice"},{label:"Privacy Policy",path:"/privacy"},{label:"Terms of Service",path:"/terms"},{label:"Insurance",path:"/insurance"}];function la(){const B=ge(),[X,Z]=m.useState("header"),{data:ee=[]}=T({queryKey:["treatments-for-links"],queryFn:async()=>{const{data:a,error:s}=await g.from("treatments").select("id, name, slug").eq("is_active",!0).order("name");if(s)throw s;return a||[]}}),{data:ae=[]}=T({queryKey:["states-for-links"],queryFn:async()=>{const{data:a,error:s}=await g.from("states").select("id, name, slug").eq("is_active",!0).in("slug",Ce).order("name");if(s)throw s;return a||[]}}),{data:se=[]}=T({queryKey:["cities-for-links"],queryFn:async()=>{const{data:a,error:s}=await g.from("cities").select("id, name, slug, states!cities_state_id_fkey(slug)").eq("is_active",!0).order("name").limit(100);if(s)throw s;return(a||[]).map(t=>({...t,state_slug:t.states?.slug||""}))}}),{data:f,isLoading:te}=T({queryKey:["site-config"],queryFn:async()=>{const{data:a,error:s}=await g.from("global_settings").select("*").in("key",["header_nav","footer_config","social_links","contact_details","platform","legal"]);if(s)throw s;const t={};return(a||[]).forEach(i=>{t[i.key]=i.value}),t}}),[p,v]=m.useState([]),[C,S]=m.useState(null),[l,h]=m.useState({label:"",path:"",type:"main"}),[o,d]=m.useState([]),[A,N]=m.useState([]),[j,I]=m.useState({copyright:"© 2025 AppointPanda. All rights reserved.",legal:"Licensed Dental Professionals Only."});m.useEffect(()=>{if(f){const a=f.header_nav;a?.links?.length>0?v(a.links):v([{id:"1",label:"Find Dentist",path:"/search",order:1,isActive:!0,type:"main"},{id:"2",label:"Services",path:"/services",order:2,isActive:!0,type:"main"},{id:"3",label:"About",path:"/about",order:3,isActive:!0,type:"main"},{id:"4",label:"Blog",path:"/blog",order:4,isActive:!0,type:"main"},{id:"5",label:"Contact",path:"/contact",order:5,isActive:!0,type:"main"},{id:"6",label:"Pricing",path:"/pricing",order:6,isActive:!0,type:"main"}]);const s=f.footer_config;s?.sections?.length>0?d(s.sections):d([{id:"1",title:"Services",order:1,links:[{label:"Teeth Whitening",path:"/services/teeth-whitening"},{label:"Dental Implants",path:"/services/dental-implants"},{label:"Invisalign",path:"/services/invisalign"}]},{id:"2",title:"Locations",order:2,links:[{label:"California",path:"/california"},{label:"Massachusetts",path:"/massachusetts"}]},{id:"3",title:"Company",order:3,links:[{label:"About Us",path:"/about"},{label:"Contact",path:"/contact"},{label:"FAQs",path:"/faq"},{label:"Pricing",path:"/pricing"}]}]);const t=f.social_links;t?.facebook||t?.instagram||t?.twitter||t?.linkedin?N([{id:"1",platform:"facebook",url:t.facebook||"",isActive:!!t.facebook},{id:"2",platform:"instagram",url:t.instagram||"",isActive:!!t.instagram},{id:"3",platform:"twitter",url:t.twitter||"",isActive:!!t.twitter},{id:"4",platform:"linkedin",url:t.linkedin||"",isActive:!!t.linkedin},{id:"5",platform:"youtube",url:t.youtube||"",isActive:!!t.youtube},{id:"6",platform:"tiktok",url:t.tiktok||"",isActive:!!t.tiktok}]):t?.links?N(t.links):N([{id:"1",platform:"facebook",url:"",isActive:!1},{id:"2",platform:"instagram",url:"",isActive:!1},{id:"3",platform:"twitter",url:"",isActive:!1},{id:"4",platform:"linkedin",url:"",isActive:!1},{id:"5",platform:"youtube",url:"",isActive:!1},{id:"6",platform:"tiktok",url:"",isActive:!1}]);const i=f.legal;i&&I({copyright:i.copyright_text||"© 2025 AppointPanda. All rights reserved.",legal:i.footer_text||"Licensed Dental Professionals Only."})}},[f]);const b=fe({mutationFn:async({key:a,value:s})=>{const{data:t}=await g.from("global_settings").select("id").eq("key",a).single();if(t){const{error:i}=await g.from("global_settings").update({value:s,updated_at:new Date().toISOString()}).eq("key",a);if(i)throw i}else{const{error:i}=await g.from("global_settings").insert([{key:a,value:s}]);if(i)throw i}await _e({action:"UPDATE",entityType:"global_settings",entityId:a,newValues:s})},onSuccess:()=>{B.invalidateQueries({queryKey:["site-config"]}),B.invalidateQueries({queryKey:["site-settings"]})},onError:a=>P.error(a.message)}),ie=async()=>{await b.mutateAsync({key:"header_nav",value:{links:p}}),P.success("Header configuration saved")},le=async()=>{await b.mutateAsync({key:"footer_config",value:{sections:o}});const a={};A.forEach(s=>{s.isActive&&s.url&&(a[s.platform]=s.url)}),await b.mutateAsync({key:"social_links",value:a}),await b.mutateAsync({key:"legal",value:{copyright_text:j.copyright,footer_text:j.legal}}),P.success("Footer configuration saved")},re=()=>{if(!l.label||!l.path){P.error("Please fill in label and path");return}const a={id:Date.now().toString(),label:l.label,path:l.path,order:p.length+1,isActive:!0,type:l.type};v([...p,a]),h({label:"",path:"",type:"main"}),S(null)},ne=()=>{C&&(v(p.map(a=>a.id===C.id?{...a,label:l.label,path:l.path,type:l.type}:a)),S(null),h({label:"",path:"",type:"main"}))},ce=a=>{v(p.filter(s=>s.id!==a))},oe=a=>{v(p.map(s=>s.id===a?{...s,isActive:!s.isActive}:s))},L=(()=>{const a=[];return He.forEach(s=>{a.push({...s,category:"Pages"})}),ee.forEach(s=>{a.push({label:s.name,path:`/services/${s.slug}`,category:"Services"})}),ae.forEach(s=>{a.push({label:s.name,path:`/${s.slug}`,category:"States"})}),se.forEach(s=>{s.state_slug&&a.push({label:`${s.name}`,path:`/${s.state_slug}/${s.slug}`,category:"Cities"})}),a})(),de=a=>{switch(a){case"facebook":return we;case"instagram":return Ne;case"twitter":return ke;case"linkedin":return ye;case"youtube":return be;case"tiktok":return K;default:return J}},he=()=>{const a={id:Date.now().toString(),title:"New Section",links:[],order:o.length+1};d([...o,a])},me=a=>{d(o.filter(s=>s.id!==a))},ue=a=>{d(o.map(s=>s.id===a?{...s,links:[...s.links,{label:"",path:""}]}:s))},G=(a,s,t,i)=>{d(o.map(r=>{if(r.id!==a)return r;const n=[...r.links];return n[s]={...n[s],[t]:i},{...r,links:n}}))},pe=(a,s)=>{d(o.map(t=>t.id!==a?t:{...t,links:t.links.filter((i,r)=>r!==s)}))},xe=(a,s,t)=>{const i=L.find(r=>r.path===t);i&&d(o.map(r=>{if(r.id!==a)return r;const n=[...r.links];return n[s]={label:i.label,path:i.path},{...r,links:n}}))};return te?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-display font-bold text-foreground",children:"Site Configuration"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage header navigation and footer content"})]})}),e.jsxs(Se,{value:X,onValueChange:Z,children:[e.jsxs(Ae,{className:"grid w-full grid-cols-2 rounded-xl",children:[e.jsxs(U,{value:"header",className:"rounded-xl",children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Header / Navigation"]}),e.jsxs(U,{value:"footer",className:"rounded-xl",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Footer"]})]}),e.jsx(R,{value:"header",className:"mt-4 space-y-4",children:e.jsxs(_,{className:"card-modern",children:[e.jsxs(F,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(q,{className:"text-lg",children:"Navigation Links"}),e.jsx(Q,{children:"Configure the main navigation menu"})]}),e.jsxs(c,{onClick:ie,disabled:b.isPending,children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Save Header"]})]}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-muted/30 rounded-xl space-y-4",children:[e.jsx("h4",{className:"font-medium",children:C?"Edit Link":"Add New Link"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Label"}),e.jsx(u,{value:l.label,onChange:a=>h({...l,label:a.target.value}),placeholder:"Link label"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Select Page"}),e.jsxs(H,{value:l.path,onValueChange:a=>{const s=L.find(t=>t.path===a);h({...l,path:a,label:l.label||s?.label||""})},children:[e.jsx(M,{children:e.jsx(D,{placeholder:"Choose a page"})}),e.jsx(V,{className:"max-h-64",children:["Pages","Services","States","Cities"].map(a=>{const s=L.filter(t=>t.category===a);return s.length===0?null:e.jsxs("div",{children:[e.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground",children:a}),s.slice(0,a==="Cities"?20:void 0).map(t=>e.jsx(w,{value:t.path,children:t.label},t.path))]},a)})})]})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Or Custom Path"}),e.jsx(u,{value:l.path,onChange:a=>h({...l,path:a.target.value}),placeholder:"/custom-path"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Type"}),e.jsxs(H,{value:l.type,onValueChange:a=>h({...l,type:a}),children:[e.jsx(M,{children:e.jsx(D,{})}),e.jsxs(V,{children:[e.jsx(w,{value:"main",children:"Main Link"}),e.jsx(w,{value:"dropdown",children:"Dropdown"}),e.jsx(w,{value:"mobile",children:"Mobile Only"})]})]})]})]}),e.jsx("div",{className:"flex gap-2",children:C?e.jsxs(e.Fragment,{children:[e.jsx(c,{onClick:ne,children:"Update Link"}),e.jsx(c,{variant:"outline",onClick:()=>{S(null),h({label:"",path:"",type:"main"})},children:"Cancel"})]}):e.jsxs(c,{onClick:re,children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Add Link"]})})]}),e.jsxs(Le,{children:[e.jsx(Te,{children:e.jsxs(W,{children:[e.jsx(y,{className:"w-10"}),e.jsx(y,{children:"Label"}),e.jsx(y,{children:"Path"}),e.jsx(y,{children:"Type"}),e.jsx(y,{children:"Active"}),e.jsx(y,{className:"text-right",children:"Actions"})]})}),e.jsx(Pe,{children:p.map(a=>e.jsxs(W,{children:[e.jsx(k,{children:e.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-move"})}),e.jsx(k,{className:"font-medium",children:a.label}),e.jsx(k,{className:"text-muted-foreground",children:a.path}),e.jsx(k,{className:"capitalize",children:a.type}),e.jsx(k,{children:e.jsx($,{checked:a.isActive,onCheckedChange:()=>oe(a.id)})}),e.jsxs(k,{className:"text-right",children:[e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>{S(a),h({label:a.label,path:a.path,type:a.type})},children:e.jsx(qe,{className:"h-4 w-4"})}),e.jsx(c,{variant:"ghost",size:"sm",className:"text-destructive",onClick:()=>ce(a.id),children:e.jsx(O,{className:"h-4 w-4"})})]})]},a.id))})]})]})]})}),e.jsxs(R,{value:"footer",className:"mt-4 space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(c,{onClick:le,disabled:b.isPending,children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Save Footer"]})}),e.jsxs(_,{className:"card-modern",children:[e.jsx(F,{children:e.jsxs(q,{className:"text-lg flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"}),"Social Media Links"]})}),e.jsx(E,{children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:A.map(a=>{const s=de(a.platform);return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/30 rounded-xl",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-primary/10 flex items-center justify-center",children:e.jsx(s,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(x,{className:"text-xs text-muted-foreground capitalize",children:a.platform}),e.jsx(u,{value:a.url,onChange:t=>N(A.map(i=>i.id===a.id?{...i,url:t.target.value,isActive:!!t.target.value}:i)),placeholder:`https://${a.platform}.com/...`,className:"mt-1"})]}),e.jsx($,{checked:a.isActive,onCheckedChange:t=>N(A.map(i=>i.id===a.id?{...i,isActive:t}:i))})]},a.id)})})})]}),e.jsxs(_,{className:"card-modern",children:[e.jsx(F,{children:e.jsxs(q,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ee,{className:"h-5 w-5"}),"Footer Text"]})}),e.jsx(E,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Copyright Text"}),e.jsx(u,{value:j.copyright,onChange:a=>I({...j,copyright:a.target.value}),placeholder:"© 2025 Company. All rights reserved."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Legal Text"}),e.jsx(u,{value:j.legal,onChange:a=>I({...j,legal:a.target.value}),placeholder:"Licensed Professionals Only."})]})]})})]}),e.jsxs(_,{className:"card-modern",children:[e.jsxs(F,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(q,{className:"text-lg flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5"}),"Footer Link Sections"]}),e.jsx(Q,{children:"Manage footer columns. Select pages from the dropdown or enter custom paths."})]}),e.jsxs(c,{variant:"outline",onClick:he,children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Add Section"]})]}),e.jsx(E,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(a=>e.jsxs("div",{className:"p-4 rounded-xl border bg-muted/20 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(u,{value:a.title,onChange:s=>d(o.map(t=>t.id===a.id?{...t,title:s.target.value}:t)),className:"font-semibold text-lg",placeholder:"Section Title"}),e.jsx(c,{variant:"ghost",size:"sm",className:"text-destructive shrink-0 ml-2",onClick:()=>me(a.id),children:e.jsx(O,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-2",children:[a.links.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-background rounded-lg",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs(H,{value:s.path,onValueChange:i=>xe(a.id,t,i),children:[e.jsx(M,{className:"text-sm",children:e.jsx(D,{placeholder:"Select a page..."})}),e.jsx(V,{className:"max-h-64",children:["Pages","Services","States","Cities"].map(i=>{const r=L.filter(n=>n.category===i);return r.length===0?null:e.jsxs("div",{children:[e.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground",children:i}),r.slice(0,i==="Cities"?20:void 0).map(n=>e.jsx(w,{value:n.path,children:n.label},n.path))]},i)})})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(u,{value:s.label,onChange:i=>G(a.id,t,"label",i.target.value),placeholder:"Label",className:"text-xs h-8"}),e.jsx(u,{value:s.path,onChange:i=>G(a.id,t,"path",i.target.value),placeholder:"Path",className:"text-xs h-8"})]})]}),e.jsx(c,{variant:"ghost",size:"sm",className:"text-destructive shrink-0",onClick:()=>pe(a.id,t),children:e.jsx(O,{className:"h-3 w-3"})})]},t)),e.jsxs(c,{variant:"outline",size:"sm",className:"w-full",onClick:()=>ue(a.id),children:[e.jsx(z,{className:"h-3 w-3 mr-1"}),"Add Link"]})]})]},a.id))})})]})]})]})]})}export{la as default};
