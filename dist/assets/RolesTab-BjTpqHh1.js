import{b as Se,u as ae,c as k,j as e}from"./chunk-CPh6voF3.js";import{r as m}from"./chunk-CffrGP6S.js";import{C as n,d as c,a as C,b as A,c as V}from"./chunk-Dwq_v72W.js";import{o as M,x as ie,S as Ce,C as te,w as Ae,U as Me,i as x,B as g,a9 as re,bc as le,aa as ne,ab as ce,ac as de,a as d,a2 as P,a3 as D,a5 as T,a6 as U,a7 as h,I as R,t as Pe,Q as oe,s as u,b as f}from"./index-DflORfjh.js";import{S as me}from"./chunk-DfjE-bP6.js";import{T as q,a as F,b as o,c as t,d as B,e as r}from"./chunk-NLs5Ye4A.js";import{T as De,a as Te,b as N,c as v}from"./chunk-k8HiDHrE.js";import{u as Ue,a as Re}from"./chunk-LOsYkUiN.js";import{c as xe}from"./chunk-BSjc5zjM.js";import{U as ge}from"./chunk-D3rEHCqk.js";import{K}from"./chunk-3oqKMbN4.js";import{E as Ee}from"./chunk-CcezodbN.js";import{E as Oe}from"./chunk-Dfi7JVLs.js";import{S as Ie}from"./chunk-B51FxpoB.js";import{U as Le}from"./chunk-D2X27E5n.js";import{P as he}from"./chunk-HAC-i_a2.js";import{T as ke}from"./chunk-DbdCK11k.js";import{S as Ve}from"./chunk-C2VW2Ml6.js";import{T as qe}from"./chunk-BRVan1jG.js";import"./chunk-B8auUmee.js";import"./chunk-DK8nT4cj.js";import"./chunk-Drd-rt-S.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";import"./chunk-I1o_Hd8I.js";import"./chunk-CyRXX0qx.js";import"./chunk-DncHrJ4I.js";import"./chunk-CbETxTmt.js";import"./chunk-j7XJPWWF.js";import"./chunk-BaL04tya.js";import"./chunk-GLPyMM0F.js";import"./chunk-CedtSHBb.js";import"./chunk-B7d2qnKb.js";import"./chunk-Bl7VVhKV.js";import"./chunk-B_ghW3Ra.js";const y=[{id:"clinics.view",label:"View Clinics",category:"Clinics & Dentists"},{id:"clinics.create",label:"Create Clinics",category:"Clinics & Dentists"},{id:"clinics.edit",label:"Edit Clinics",category:"Clinics & Dentists"},{id:"clinics.delete",label:"Delete Clinics",category:"Clinics & Dentists"},{id:"clinics.verify",label:"Verify Clinics",category:"Clinics & Dentists"},{id:"clinics.pause",label:"Pause Clinics",category:"Clinics & Dentists"},{id:"clinics.claim",label:"Force Claim/Unclaim",category:"Clinics & Dentists"},{id:"locations.view",label:"View Locations",category:"Locations"},{id:"locations.create",label:"Create Locations",category:"Locations"},{id:"locations.edit",label:"Edit Locations",category:"Locations"},{id:"locations.delete",label:"Delete Locations",category:"Locations"},{id:"users.view",label:"View Users",category:"Users"},{id:"users.create",label:"Create Users",category:"Users"},{id:"users.edit",label:"Edit Users",category:"Users"},{id:"users.roles",label:"Manage Roles",category:"Users"},{id:"users.delete",label:"Delete Users",category:"Users"},{id:"appointments.view",label:"View Appointments",category:"Operations"},{id:"appointments.manage",label:"Manage Appointments",category:"Operations"},{id:"leads.view",label:"View Leads",category:"Operations"},{id:"leads.manage",label:"Manage Leads",category:"Operations"},{id:"pages.view",label:"View Pages",category:"Content"},{id:"pages.edit",label:"Edit Pages",category:"Content"},{id:"blog.manage",label:"Manage Blog",category:"Content"},{id:"seo.manage",label:"Manage SEO",category:"Content"},{id:"subscriptions.view",label:"View Subscriptions",category:"Revenue"},{id:"subscriptions.manage",label:"Manage Subscriptions",category:"Revenue"},{id:"plans.manage",label:"Manage Plans",category:"Revenue"},{id:"promotions.manage",label:"Manage Promotions",category:"Revenue"},{id:"messaging.sms",label:"Send SMS",category:"Messaging"},{id:"messaging.whatsapp",label:"Send WhatsApp",category:"Messaging"},{id:"messaging.email",label:"Send Emails",category:"Messaging"},{id:"messaging.view_logs",label:"View Message Logs",category:"Messaging"},{id:"reviews.view",label:"View Reviews",category:"Reputation"},{id:"reviews.manage",label:"Manage Reviews",category:"Reputation"},{id:"reviews.ai_reply",label:"AI Reply to Reviews",category:"Reputation"},{id:"ai.view_insights",label:"View AI Insights",category:"AI & Automation"},{id:"ai.manage",label:"Manage AI Settings",category:"AI & Automation"},{id:"automation.view",label:"View Automation",category:"AI & Automation"},{id:"automation.manage",label:"Manage Automation",category:"AI & Automation"},{id:"api.manage",label:"Manage APIs",category:"System"},{id:"audit.view",label:"View Audit Logs",category:"System"},{id:"settings.manage",label:"Manage Settings",category:"System"},{id:"support.view",label:"View Support Tickets",category:"System"},{id:"support.manage",label:"Manage Support Tickets",category:"System"}],E={super_admin:["*"],district_manager:["clinics.view","clinics.edit","clinics.verify","locations.view","users.view","appointments.view","appointments.manage","leads.view","leads.manage","messaging.view_logs","reviews.view","support.view"],dentist:["clinics.view","appointments.view","messaging.sms","messaging.whatsapp","messaging.email","reviews.view"],seo_team:["pages.view","pages.edit","blog.manage","seo.manage","clinics.view"],content_team:["pages.view","pages.edit","blog.manage","clinics.view"],marketing_team:["clinics.view","promotions.manage","messaging.sms","messaging.whatsapp","messaging.email","messaging.view_logs"],support_team:["clinics.view","appointments.view","leads.view","reviews.view","support.view","support.manage"],patient:[]};function bs(){const O=Se(),{data:j,isLoading:ue}=Ue(),pe=Re(),[je,z]=m.useState("permissions"),[fe,Q]=m.useState(!1);m.useState(!1);const[w,G]=m.useState(""),[b,H]=m.useState(""),[J,W]=m.useState("");m.useState(null);const{data:I}=ae({queryKey:["role-permissions"],queryFn:async()=>{const{data:s,error:a}=await u.from("global_settings").select("*").eq("key","role_permissions").single();if(a&&a.code!=="PGRST116")throw a;return s?.value||E}}),{data:_}=ae({queryKey:["district-assignments"],queryFn:async()=>{const{data:s,error:a}=await u.from("district_assignments").select("*").order("created_at",{ascending:!1});if(a)throw a;return s}}),X=k({mutationFn:async s=>{const a=await u.from("global_settings").select("id").eq("key","role_permissions").single();if(a.data){const{error:i}=await u.from("global_settings").update({value:s,updated_at:new Date().toISOString()}).eq("id",a.data.id);if(i)throw i}else{const{error:i}=await u.from("global_settings").insert([{key:"role_permissions",value:s}]);if(i)throw i}await xe({action:"UPDATE_ROLE_PERMISSIONS",entityType:"role_permissions",newValues:s})},onSuccess:()=>{O.invalidateQueries({queryKey:["role-permissions"]}),f.success("Permissions updated")},onError:s=>f.error(s.message)}),Ne=(s,a)=>{const i=I||E,l=i[s]||[];let p;l.includes(a)?p=l.filter(L=>L!==a):p=[...l,a],X.mutate({...i,[s]:p})},Y=(s,a)=>{const i=I||E;return i[s]?.includes("*")?!0:i[s]?.includes(a)||!1},ve=k({mutationFn:async s=>{const{error:a}=await u.from("district_assignments").insert({user_id:s.user_id,city:s.city,area:s.area||null});if(a)throw a;await xe({action:"CREATE_DISTRICT_ASSIGNMENT",entityType:"district_assignment",newValues:s})},onSuccess:()=>{O.invalidateQueries({queryKey:["district-assignments"]}),Q(!1),we(),f.success("District assigned successfully")},onError:s=>f.error("Error: "+s.message)}),ye=k({mutationFn:async s=>{const{error:a}=await u.from("district_assignments").delete().eq("id",s);if(a)throw a},onSuccess:()=>{O.invalidateQueries({queryKey:["district-assignments"]}),f.success("Assignment removed")}}),we=()=>{G(""),H(""),W("")},be=()=>{w&&b&&ve.mutate({user_id:w,city:b,area:J||void 0})},Z=j?.filter(s=>s.roles?.includes("super_admin")||s.roles?.includes("district_manager"))||[],$=j?.filter(s=>s.roles?.includes("district_manager"))||[],_e=s=>{switch(s){case"super_admin":return e.jsx(x,{className:"bg-purple text-purple-foreground",children:"Super Admin"});case"district_manager":return e.jsx(x,{className:"bg-blue-custom text-blue-custom-foreground",children:"District Manager"});case"dentist":return e.jsx(x,{className:"bg-primary text-primary-foreground",children:"Dentist"});default:return e.jsx(x,{variant:"secondary",children:"Patient"})}},ee=y.reduce((s,a)=>(s[a.category]||(s[a.category]=[]),s[a.category].push(a),s),{});return ue?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-display font-bold text-foreground",children:"Access Control & Permissions"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage roles, permissions, and access levels"})]})}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsx(n,{className:"card-modern",children:e.jsxs(c,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-purple-light flex items-center justify-center",children:e.jsx(M,{className:"h-6 w-6 text-purple"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:j?.filter(s=>s.roles?.includes("super_admin")).length||0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Super Admins"})]})]})}),e.jsx(n,{className:"card-modern",children:e.jsxs(c,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-blue-light flex items-center justify-center",children:e.jsx(ge,{className:"h-6 w-6 text-blue-custom"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:$.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"District Managers"})]})]})}),e.jsx(n,{className:"card-modern",children:e.jsxs(c,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-teal-light flex items-center justify-center",children:e.jsx(ie,{className:"h-6 w-6 text-teal"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:_?.length||0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"District Assignments"})]})]})}),e.jsx(n,{className:"card-modern",children:e.jsxs(c,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-primary/10 flex items-center justify-center",children:e.jsx(K,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:y.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Permissions"})]})]})})]}),e.jsxs(De,{value:je,onValueChange:z,children:[e.jsxs(Te,{className:"grid w-full grid-cols-5 rounded-xl",children:[e.jsx(N,{value:"permissions",className:"rounded-xl",children:"Matrix"}),e.jsx(N,{value:"presets",className:"rounded-xl",children:"Role Presets"}),e.jsx(N,{value:"overrides",className:"rounded-xl",children:"User Overrides"}),e.jsx(N,{value:"admins",className:"rounded-xl",children:"Admin Users"}),e.jsx(N,{value:"districts",className:"rounded-xl",children:"Districts"})]}),e.jsx(v,{value:"permissions",className:"mt-4",children:e.jsxs(n,{className:"card-modern",children:[e.jsxs(C,{children:[e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"}),"Permission Matrix"]}),e.jsx(V,{children:"Toggle permissions on/off for each role. Super Admin always has full access."})]}),e.jsx(c,{children:e.jsx(Ce,{className:"h-[600px]",children:e.jsx("div",{className:"space-y-6",children:Object.entries(ee).map(([s,a])=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2 sticky top-0 bg-card py-2",children:[e.jsx(K,{className:"h-5 w-5 text-primary"}),s]}),e.jsx("div",{className:"rounded-xl border overflow-hidden",children:e.jsxs(q,{children:[e.jsx(F,{children:e.jsxs(o,{children:[e.jsx(t,{className:"w-[180px]",children:"Permission"}),e.jsx(t,{className:"text-center w-[80px]",children:"Admin"}),e.jsx(t,{className:"text-center w-[80px]",children:"Dist Mgr"}),e.jsx(t,{className:"text-center w-[80px]",children:"Dentist"}),e.jsx(t,{className:"text-center w-[80px]",children:"SEO"}),e.jsx(t,{className:"text-center w-[80px]",children:"Content"}),e.jsx(t,{className:"text-center w-[80px]",children:"Marketing"}),e.jsx(t,{className:"text-center w-[80px]",children:"Support"}),e.jsx(t,{className:"text-center w-[80px]",children:"Patient"})]})}),e.jsx(B,{children:a.map(i=>e.jsxs(o,{children:[e.jsx(r,{className:"font-medium text-sm",children:i.label}),e.jsx(r,{className:"text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(te,{className:"h-4 w-4 text-teal"})})}),["district_manager","dentist","seo_team","content_team","marketing_team","support_team","patient"].map(l=>e.jsx(r,{className:"text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(me,{checked:Y(l,i.id),onCheckedChange:()=>Ne(l,i.id),disabled:X.isPending,className:"scale-75"})})},l))]},i.id))})]})})]},s))})})})]})}),e.jsx(v,{value:"presets",className:"mt-4",children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["super_admin","district_manager","dentist","patient"].map(s=>{const a=I?.[s]||E[s]||[],l=a.includes("*")?y.length:a.length;return e.jsxs(n,{className:"card-modern",children:[e.jsxs(C,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(A,{className:"text-lg capitalize flex items-center gap-2",children:[s==="super_admin"&&e.jsx(M,{className:"h-5 w-5 text-purple"}),s==="district_manager"&&e.jsx(ge,{className:"h-5 w-5 text-blue-custom"}),s==="dentist"&&e.jsx(Ae,{className:"h-5 w-5 text-teal"}),s==="patient"&&e.jsx(Me,{className:"h-5 w-5 text-muted-foreground"}),s.replace("_"," ")]}),_e(s)]}),e.jsxs(V,{className:"text-xs",children:[s==="super_admin"&&"Full platform control",s==="district_manager"&&"Regional operations",s==="dentist"&&"Practice management",s==="patient"&&"Public access only"]})]}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Active Permissions"}),e.jsxs(x,{variant:"outline",children:[l," / ",y.length]})]}),s==="super_admin"?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-teal p-3 bg-teal-light rounded-lg",children:[e.jsx(Ee,{className:"h-4 w-4"}),"Full access to all features"]}):s==="patient"?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground p-3 bg-muted rounded-lg",children:[e.jsx(Oe,{className:"h-4 w-4"}),"No admin dashboard access"]}):e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:Object.entries(ee).map(([p,L])=>{const se=L.filter(S=>Y(s,S.id));return se.length===0?null:e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"text-muted-foreground font-medium",children:[p,":"]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:se.map(S=>e.jsx(x,{variant:"outline",className:"text-xs",children:S.label},S.id))})]},p)})}),s!=="super_admin"&&s!=="patient"&&e.jsxs(g,{variant:"outline",size:"sm",className:"w-full mt-2",onClick:()=>z("permissions"),children:[e.jsx(Ie,{className:"h-3 w-3 mr-1"}),"Edit Permissions"]})]})})]},s)})})}),e.jsx(v,{value:"overrides",className:"mt-4",children:e.jsxs(n,{className:"card-modern",children:[e.jsx(C,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"h-5 w-5"}),"User Permission Overrides"]}),e.jsx(V,{children:"Grant or revoke specific permissions for individual users, with optional expiration"})]}),e.jsxs(re,{children:[e.jsx(le,{asChild:!0,children:e.jsxs(g,{size:"sm",className:"gap-2",children:[e.jsx(he,{className:"h-4 w-4"}),"Add Override"]})}),e.jsxs(ne,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Add Permission Override"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Select User"}),e.jsxs(P,{children:[e.jsx(D,{children:e.jsx(T,{placeholder:"Choose a user"})}),e.jsx(U,{children:j?.map(s=>e.jsx(h,{value:s.user_id,children:s.full_name||s.email},s.user_id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Permission"}),e.jsxs(P,{children:[e.jsx(D,{children:e.jsx(T,{placeholder:"Choose a permission"})}),e.jsx(U,{children:y.map(s=>e.jsxs(h,{value:s.id,children:[s.category,": ",s.label]},s.id))})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{children:"Grant Access"}),e.jsx(me,{defaultChecked:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Expires (Optional)"}),e.jsx(R,{type:"datetime-local"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Reason (Optional)"}),e.jsx(R,{placeholder:"e.g., Temporary access for project"})]}),e.jsx(g,{className:"w-full",children:"Save Override"})]})]})]})]})}),e.jsx(c,{children:e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Pe,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"font-medium",children:"No active permission overrides"}),e.jsx("p",{className:"text-sm mt-1",children:"Use overrides to grant temporary or special permissions to individual users"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(te,{className:"h-3 w-3 text-teal"}),e.jsx("span",{children:"Time-bound access"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ke,{className:"h-3 w-3 text-gold"}),e.jsx("span",{children:"Auto-expires"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"h-3 w-3 text-purple"}),e.jsx("span",{children:"Audit logged"})]})]})]})})]})}),e.jsx(v,{value:"admins",className:"mt-4",children:e.jsx(n,{className:"card-modern",children:e.jsx(c,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(F,{children:e.jsxs(o,{children:[e.jsx(t,{children:"User"}),e.jsx(t,{children:"Email"}),e.jsx(t,{children:"Role"}),e.jsx(t,{children:"Joined"}),e.jsx(t,{className:"text-right",children:"Actions"})]})}),e.jsxs(B,{children:[Z.map(s=>e.jsxs(o,{children:[e.jsx(r,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-bold text-primary",children:s.full_name?.[0]?.toUpperCase()||s.email?.[0]?.toUpperCase()})}),e.jsx("div",{children:e.jsx("p",{className:"font-medium",children:s.full_name||"No name"})})]})}),e.jsx(r,{className:"text-muted-foreground",children:s.email}),e.jsx(r,{children:e.jsxs(P,{value:s.roles?.[0]||"patient",onValueChange:a=>pe.mutate({userId:s.user_id,role:a}),children:[e.jsx(D,{className:"w-40",children:e.jsx(T,{})}),e.jsxs(U,{children:[e.jsx(h,{value:"super_admin",children:"Super Admin"}),e.jsx(h,{value:"district_manager",children:"District Manager"}),e.jsx(h,{value:"dentist",children:"Dentist"}),e.jsx(h,{value:"patient",children:"Patient"})]})]})}),e.jsx(r,{className:"text-muted-foreground",children:s.created_at?oe(new Date(s.created_at),"MMM d, yyyy"):"-"}),e.jsx(r,{className:"text-right",children:e.jsx(g,{variant:"ghost",size:"sm",children:e.jsx(Ve,{className:"h-4 w-4"})})})]},s.id)),Z.length===0&&e.jsx(o,{children:e.jsxs(r,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:[e.jsx(M,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No admin users found"})]})})]})]})})})}),e.jsx(v,{value:"districts",className:"mt-4",children:e.jsxs(n,{className:"card-modern",children:[e.jsxs(C,{className:"flex flex-row items-center justify-between",children:[e.jsx(A,{className:"text-lg",children:"District Assignments"}),e.jsxs(re,{open:fe,onOpenChange:Q,children:[e.jsx(le,{asChild:!0,children:e.jsxs(g,{size:"sm",className:"gap-2",children:[e.jsx(he,{className:"h-4 w-4"}),"Assign District"]})}),e.jsxs(ne,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Assign District to Manager"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"District Manager"}),e.jsxs(P,{value:w,onValueChange:G,children:[e.jsx(D,{children:e.jsx(T,{placeholder:"Select a user"})}),e.jsx(U,{children:$.map(s=>e.jsx(h,{value:s.user_id,children:s.full_name||s.email},s.user_id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"City"}),e.jsx(R,{value:b,onChange:s=>H(s.target.value),placeholder:"e.g., Los Angeles"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"State (Optional)"}),e.jsx(R,{value:J,onChange:s=>W(s.target.value),placeholder:"e.g., California"})]}),e.jsx(g,{onClick:be,className:"w-full",disabled:!w||!b,children:"Assign District"})]})]})]})]}),e.jsx(c,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(F,{children:e.jsxs(o,{children:[e.jsx(t,{children:"Manager"}),e.jsx(t,{children:"City"}),e.jsx(t,{children:"Area"}),e.jsx(t,{children:"Assigned"}),e.jsx(t,{className:"text-right",children:"Actions"})]})}),e.jsxs(B,{children:[_?.map(s=>{const a=j?.find(i=>i.user_id===s.user_id);return e.jsxs(o,{children:[e.jsx(r,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-light flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-bold text-blue-custom",children:a?.full_name?.[0]?.toUpperCase()||"M"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a?.full_name||"Unknown"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a?.email})]})]})}),e.jsx(r,{children:e.jsx(x,{variant:"outline",children:s.city})}),e.jsx(r,{className:"text-muted-foreground",children:s.area||"All areas"}),e.jsx(r,{className:"text-muted-foreground",children:oe(new Date(s.created_at),"MMM d, yyyy")}),e.jsx(r,{className:"text-right",children:e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>ye.mutate(s.id),children:e.jsx(qe,{className:"h-4 w-4 text-destructive"})})})]},s.id)}),(!_||_.length===0)&&e.jsx(o,{children:e.jsxs(r,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:[e.jsx(ie,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No district assignments"}),e.jsx("p",{className:"text-xs mt-1",children:"Assign districts to limit manager access to specific locations"})]})})]})]})})]})})]})]})}export{bs as default};
