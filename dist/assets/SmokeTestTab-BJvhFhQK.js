import{u as r,j as e}from"./chunk-CPh6voF3.js";import{r as N}from"./chunk-CffrGP6S.js";import{B as Q,G as y,C as w,i as U,b,w as v,v as z,x as T,s as c}from"./index-DflORfjh.js";import{C as i,d as o,a as L,b as X,c as J}from"./chunk-Dwq_v72W.js";import{T as O,a as V,b as C,c as d,d as W,e as m}from"./chunk-NLs5Ye4A.js";import{R as Y}from"./chunk-BOvFDp2b.js";import{C as q}from"./chunk-CbEmr7WL.js";import{C as R}from"./chunk-GLPyMM0F.js";import{F as Z}from"./chunk-BaL04tya.js";import"./chunk-B8auUmee.js";import"./chunk-DK8nT4cj.js";import"./chunk-Drd-rt-S.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";function fe(){const[a,u]=N.useState([]),[h,p]=N.useState(!1),{data:$}=r({queryKey:["smoke-test-cities"],queryFn:async()=>{const{data:s}=await c.from("cities").select("slug, name").eq("is_active",!0).limit(5);return s||[]}});r({queryKey:["smoke-test-areas"],queryFn:async()=>{const{data:s}=await c.from("areas").select("slug, name, cities!inner(slug)").eq("is_active",!0).limit(5);return s||[]}});const{data:k}=r({queryKey:["smoke-test-treatments"],queryFn:async()=>{const{data:s}=await c.from("treatments").select("slug, name").eq("is_active",!0).limit(5);return s||[]}}),{data:F}=r({queryKey:["smoke-test-clinics"],queryFn:async()=>{const{data:s}=await c.from("clinics").select("slug, name").eq("is_active",!0).limit(10);return s||[]}}),{data:S}=r({queryKey:["smoke-test-dentists"],queryFn:async()=>{const{data:s}=await c.from("dentists").select("slug, name").eq("is_active",!0).limit(5);return s||[]}}),{data:E}=r({queryKey:["smoke-test-blog"],queryFn:async()=>{const{data:s}=await c.from("blog_posts").select("slug, title").eq("status","published").limit(3);return s||[]}}),x=()=>{const s=[];return[{path:"/",name:"Home"},{path:"/search",name:"Search"},{path:"/services",name:"All Services"},{path:"/blog",name:"Blog"},{path:"/about",name:"About"},{path:"/contact",name:"Contact"},{path:"/faq",name:"FAQs"},{path:"/insurance",name:"Insurance"}].forEach(t=>s.push({path:t.path,type:"static",name:t.name,status:"pending"})),$?.forEach(t=>{s.push({path:`/massachusetts/${t.slug}`,type:"city",name:t.name,status:"pending"})}),k?.forEach(t=>{s.push({path:`/services/${t.slug}`,type:"service",name:t.name,status:"pending"})}),F?.forEach(t=>{s.push({path:`/clinic/${t.slug}`,type:"clinic",name:t.name,status:"pending"})}),S?.forEach(t=>{s.push({path:`/dentist/${t.slug}`,type:"dentist",name:t.name,status:"pending"})}),E?.forEach(t=>{s.push({path:`/blog/${t.slug}`,type:"blog",name:t.title,status:"pending"})}),s},P=async()=>{const s=x();u(s),p(!0);const l=window.location.origin,t=[];for(const n of s){const j=performance.now();try{const M=await fetch(`${l}${n.path}`,{method:"HEAD"}),D=Math.round(performance.now()-j),g=await(await fetch(`${l}${n.path}`)).text(),G=g.includes("Page Not Found")||g.includes("404");t.push({...n,status:G?"not-found":"success",responseTime:D})}catch{t.push({...n,status:"error",responseTime:Math.round(performance.now()-j)})}u([...t,...s.slice(t.length)])}u(t),p(!1);const I=t.filter(n=>n.status==="success").length,f=t.filter(n=>n.status!=="success").length;f===0?b.success(`All ${I} routes passed!`):b.error(`${f} routes failed out of ${t.length}`)},B=s=>{switch(s){case"success":return e.jsx(w,{className:"h-4 w-4 text-green-500"});case"error":return e.jsx(q,{className:"h-4 w-4 text-destructive"});case"not-found":return e.jsx(R,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx("div",{className:"h-4 w-4 rounded-full bg-muted animate-pulse"})}},_=s=>{switch(s){case"city":return e.jsx(T,{className:"h-4 w-4"});case"area":return e.jsx(T,{className:"h-4 w-4"});case"service":return e.jsx(z,{className:"h-4 w-4"});case"clinic":return e.jsx(v,{className:"h-4 w-4"});case"dentist":return e.jsx(v,{className:"h-4 w-4"});case"blog":return e.jsx(Z,{className:"h-4 w-4"});default:return e.jsx(y,{className:"h-4 w-4"})}},A=a.filter(s=>s.status==="success").length,K=a.filter(s=>s.status==="error"||s.status==="not-found").length,H=a.filter(s=>s.status==="pending").length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-display font-bold text-foreground",children:"URL Smoke Test"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Test all public routes for 404 errors and accessibility"})]}),e.jsxs(Q,{onClick:P,disabled:h,children:[e.jsx(Y,{className:`h-4 w-4 mr-2 ${h?"animate-spin":""}`}),h?"Running...":"Run Tests"]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsx(i,{className:"card-modern",children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Routes"}),e.jsx("p",{className:"text-2xl font-bold",children:a.length||x().length})]}),e.jsx(y,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(i,{className:"card-modern",children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Passed"}),e.jsx("p",{className:"text-2xl font-bold text-green-500",children:A})]}),e.jsx(w,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(i,{className:"card-modern",children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Failed"}),e.jsx("p",{className:"text-2xl font-bold text-destructive",children:K})]}),e.jsx(q,{className:"h-8 w-8 text-destructive"})]})})}),e.jsx(i,{className:"card-modern",children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-muted-foreground",children:H})]}),e.jsx(R,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),e.jsxs(i,{className:"card-modern",children:[e.jsxs(L,{children:[e.jsx(X,{className:"text-lg",children:"Test Results"}),e.jsx(J,{children:a.length===0?'Click "Run Tests" to start':`Tested ${a.length} routes`})]}),e.jsx(o,{children:e.jsxs(O,{children:[e.jsx(V,{children:e.jsxs(C,{children:[e.jsx(d,{className:"w-12",children:"Status"}),e.jsx(d,{className:"w-24",children:"Type"}),e.jsx(d,{children:"Name"}),e.jsx(d,{children:"Path"}),e.jsx(d,{className:"text-right",children:"Time"})]})}),e.jsx(W,{children:(a.length>0?a:x()).map((s,l)=>e.jsxs(C,{children:[e.jsx(m,{children:B(s.status)}),e.jsx(m,{children:e.jsxs(U,{variant:"outline",className:"flex items-center gap-1 w-fit capitalize",children:[_(s.type),s.type]})}),e.jsx(m,{className:"font-medium",children:s.name}),e.jsx(m,{children:e.jsx("a",{href:s.path,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline text-sm font-mono",children:s.path})}),e.jsx(m,{className:"text-right text-muted-foreground",children:s.responseTime?`${s.responseTime}ms`:"-"})]},l))})]})})]})]})}export{fe as default};
