const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DflORfjh.js","assets/chunk-CPh6voF3.js","assets/chunk-CffrGP6S.js","assets/chunk-B8auUmee.js","assets/chunk-DK8nT4cj.js","assets/chunk-Drd-rt-S.js","assets/chunk-BEQ5VEiB.js","assets/chunk-yff5u8mE.js","assets/chunk-xExVBHTi.js","assets/index-CigGl4-1.css"])))=>i.map(i=>d[i]);
import{u as Se,b as c,s as n,w as D,B as m,L as g,X as Ie,a as x,I as f,G as Pe,al as J,P as ke,A as Ge,x as Ee,C as Fe,i as Z,t as Ae,a2 as ee,a3 as se,a5 as ae,a6 as ie,a7 as le,a9 as qe,bc as Ue,aa as Me,ab as Be,ac as De,_ as Te}from"./index-DflORfjh.js";import{b as He,u as T,c as U,j as e}from"./chunk-CPh6voF3.js";import{r as o}from"./chunk-CffrGP6S.js";import{c as ze,L as Le}from"./chunk-Drd-rt-S.js";import{C as _,a as b,b as C,d as S}from"./chunk-Dwq_v72W.js";import{S as re}from"./chunk-CQtADEjB.js";import{c as te}from"./chunk-BSjc5zjM.js";import{S as ce}from"./chunk-C7BdFRQZ.js";import{C as Oe}from"./chunk-kjwVS8vq.js";import{U as ne}from"./chunk-BcKWIjsB.js";import{E as Re}from"./chunk-CbETxTmt.js";import{C as $e}from"./chunk-GLPyMM0F.js";import{I as oe}from"./chunk-DZK1lt0q.js";import{L as Ve}from"./chunk-CG1o0-Xj.js";import{P as Ke}from"./chunk-HAC-i_a2.js";import{T as Qe}from"./chunk-BRVan1jG.js";import"./chunk-B8auUmee.js";import"./chunk-DK8nT4cj.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";const de=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],me=Array.from({length:48},(I,h)=>{const y=Math.floor(h/2),P=h%2===0?"00":"30";return`${y.toString().padStart(2,"0")}:${P}`});function fs(){const{user:I}=Se(),h=He(),[y,P]=ze(),[H,z]=o.useState(!1),[l,u]=o.useState({}),[v,k]=o.useState([]),[j,L]=o.useState(""),[ue,O]=o.useState(!1),[w,G]=o.useState(!1),R=o.useRef(null),E=o.useRef(null),[$,M]=o.useState(!1),[V,K]=o.useState(!1),[N,Q]=o.useState(""),[X,W]=o.useState(!1),[Xe,he]=o.useState(!1);o.useEffect(()=>{if(y.get("gmb_connected")==="true"){he(!0),c.success("Google Business Profile connected successfully!");const a=new URLSearchParams(y);a.delete("gmb_connected"),a.set("tab","my-profile"),P(a,{replace:!0})}},[y,P]);const{data:i,isLoading:pe}=T({queryKey:["dentist-clinic-profile",I?.id],queryFn:async()=>{const{data:s,error:a}=await n.from("clinics").select(`
          id, name, slug, description, address, phone, email, website,
          cover_image_url, verification_status, google_place_id,
          city:cities(id, name),
          area:areas(id, name)
        `).eq("claimed_by",I?.id).limit(1).single();if(a&&a.code!=="PGRST116")throw a;return s&&u({name:s.name,description:s.description,address:s.address,phone:s.phone,email:s.email,website:s.website,cover_image_url:s.cover_image_url,google_place_id:s.google_place_id}),s},enabled:!!I?.id});T({queryKey:["clinic-hours",i?.id],queryFn:async()=>{const{data:s,error:a}=await n.from("clinic_hours").select("*").eq("clinic_id",i?.id).order("day_of_week");if(a)throw a;const r=s||[],t=de.map((p,d)=>r.find(q=>q.day_of_week===d)||{id:`new-${d}`,day_of_week:d,open_time:"09:00",close_time:"18:00",is_closed:d===0||d===6});return k(t),t},enabled:!!i?.id});const{data:F}=T({queryKey:["clinic-images",i?.id],queryFn:async()=>{const{data:s,error:a}=await n.from("clinic_images").select("*").eq("clinic_id",i?.id).order("display_order");if(a)throw a;return s||[]},enabled:!!i?.id}),xe=U({mutationFn:async()=>{if(!i?.id)throw new Error("No clinic found");const s={name:l.name,description:l.description,address:l.address,phone:l.phone,email:l.email,website:l.website,cover_image_url:l.cover_image_url,updated_at:new Date().toISOString()},{error:a}=await n.from("clinics").update(s).eq("id",i.id);if(a)throw a;await te({action:"UPDATE",entityType:"clinic",entityId:i.id,newValues:s})},onSuccess:()=>{h.invalidateQueries({queryKey:["dentist-clinic-profile"]}),c.success("Profile updated successfully")},onError:s=>c.error(s.message||"Failed to update profile")}),ge=U({mutationFn:async()=>{if(!i?.id)throw new Error("No clinic found");for(const s of v)if(s.id.startsWith("new-")){const{error:a}=await n.from("clinic_hours").insert({clinic_id:i.id,day_of_week:s.day_of_week,open_time:s.open_time,close_time:s.close_time,is_closed:s.is_closed});if(a)throw a}else{const{error:a}=await n.from("clinic_hours").update({open_time:s.open_time,close_time:s.close_time,is_closed:s.is_closed}).eq("id",s.id);if(a)throw a}},onSuccess:()=>{h.invalidateQueries({queryKey:["clinic-hours"]}),c.success("Hours updated successfully")},onError:s=>c.error(s.message||"Failed to update hours")}),A=U({mutationFn:async s=>{if(!i?.id)throw new Error("No clinic found");const{error:a}=await n.from("clinic_images").insert({clinic_id:i.id,image_url:s,display_order:(F?.length||0)+1});if(a)throw a},onSuccess:()=>{h.invalidateQueries({queryKey:["clinic-images"]}),L(""),O(!1),c.success("Image added successfully")},onError:s=>c.error(s.message||"Failed to add image")}),fe=U({mutationFn:async s=>{const{error:a}=await n.from("clinic_images").delete().eq("id",s);if(a)throw a},onSuccess:()=>{h.invalidateQueries({queryKey:["clinic-images"]}),c.success("Image deleted")},onError:s=>c.error(s.message||"Failed to delete image")}),je=()=>{j.trim()&&A.mutate(j.trim())},ye=async s=>{const a=s.target.files?.[0];if(!(!a||!i?.id)){G(!0);try{const r=a.name.split(".").pop(),t=`${i.id}/profile-${Date.now()}.${r}`,{error:p}=await n.storage.from("clinic-assets").upload(t,a,{upsert:!0});if(p)throw p;const{data:{publicUrl:d}}=n.storage.from("clinic-assets").getPublicUrl(t);u({...l,cover_image_url:d}),c.success("Photo uploaded successfully")}catch(r){c.error(r.message||"Failed to upload photo")}finally{G(!1)}}},ve=async s=>{const a=s.target.files?.[0];if(!(!a||!i?.id)){G(!0);try{const r=a.name.split(".").pop(),t=`${i.id}/gallery-${Date.now()}.${r}`,{error:p}=await n.storage.from("clinic-assets").upload(t,a);if(p)throw p;const{data:{publicUrl:d}}=n.storage.from("clinic-assets").getPublicUrl(t);A.mutate(d)}catch(r){c.error(r.message||"Failed to upload image")}finally{G(!1),E.current&&(E.current.value="")}}},we=async()=>{z(!0);try{await xe.mutateAsync(),await ge.mutateAsync()}finally{z(!1)}},Ne=async()=>{M(!0);try{if(!i?.id)throw new Error("No clinic found to connect.");const{data:{session:s}}=await n.auth.getSession(),{data:{user:a}}=await n.auth.getUser();if(!s||!a)throw new Error("Please sign in first");if(a?.identities?.some(B=>B.provider==="google")){c.info("Google account already connected. You can sync now."),M(!1);return}const{storeOriginalSession:t}=await Te(async()=>{const{storeOriginalSession:B}=await import("./index-DflORfjh.js").then(Ce=>Ce.bO);return{storeOriginalSession:B}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]));t(s.access_token,s.refresh_token||"",a.id);const{data:p,error:d}=await n.from("gmb_link_requests").insert({clinic_id:i.id,initiated_by:a.id}).select("token").single();if(d||!p?.token)throw console.error("Failed to create GMB link request:",d),new Error("Failed to prepare GMB connection. Please try again.");localStorage.setItem("gmb_link_token",p.token),localStorage.setItem("gmb_pending","true"),localStorage.setItem("gmb_restore_session","true");const Y="https://www.appointpanda.ae/auth/callback?gmb=true",{error:q}=await n.auth.signInWithOAuth({provider:"google",options:{scopes:"openid email profile https://www.googleapis.com/auth/business.manage",redirectTo:Y,queryParams:{access_type:"offline",prompt:"consent select_account"}}});if(q)throw localStorage.removeItem("gmb_link_token"),localStorage.removeItem("gmb_pending"),localStorage.removeItem("gmb_restore_session"),q}catch(s){c.error(s.message||"Failed to connect with Google"),M(!1)}},_e=async()=>{if(!(!i?.id||!i?.google_place_id)){K(!0);try{const{error:s}=await n.functions.invoke("gmb-import",{body:{placeId:i.google_place_id,clinicId:i.id,syncOnly:!0}});if(s)throw s;c.success("Profile synced with Google Business"),h.invalidateQueries({queryKey:["dentist-clinic-profile"]})}catch(s){c.error(s.message||"Failed to sync with Google")}finally{K(!1)}}},be=async()=>{if(!(!i?.id||!N.trim())){W(!0);try{const{error:s}=await n.from("clinics").update({google_place_id:N.trim(),updated_at:new Date().toISOString()}).eq("id",i.id);if(s)throw s;await te({action:"UPDATE",entityType:"clinic",entityId:i.id,newValues:{google_place_id:N.trim()}}),c.success("Google Place ID saved successfully"),Q(""),h.invalidateQueries({queryKey:["dentist-clinic-profile"]})}catch(s){c.error(s.message||"Failed to save Place ID")}finally{W(!1)}}};return pe?e.jsxs("div",{className:"space-y-6",children:[e.jsx(re,{className:"h-48"}),e.jsx(re,{className:"h-96"})]}):i?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-display font-bold",children:"Edit Profile"}),e.jsx("p",{className:"text-muted-foreground",children:"Customize your clinic information"})]}),e.jsxs(m,{onClick:we,disabled:H,className:"gap-2",children:[H?e.jsx(g,{className:"h-4 w-4 animate-spin"}):e.jsx(ce,{className:"h-4 w-4"}),"Save Changes"]})]}),e.jsxs(_,{children:[e.jsx(b,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-5 w-5"}),"Profile Photo"]})}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsxs("div",{className:"relative",children:[l.cover_image_url?e.jsx("img",{src:l.cover_image_url,alt:"Clinic",className:"h-32 w-32 rounded-2xl object-cover border-2 border-border shadow-md"}):e.jsx("div",{className:"h-32 w-32 rounded-2xl bg-muted flex items-center justify-center border-2 border-dashed border-border",children:e.jsx(D,{className:"h-12 w-12 text-muted-foreground"})}),l.cover_image_url&&e.jsx(m,{size:"icon",variant:"destructive",className:"absolute -top-2 -right-2 h-8 w-8 rounded-full",onClick:()=>u({...l,cover_image_url:null}),children:e.jsx(Ie,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Upload from Device"}),e.jsx("input",{ref:R,type:"file",accept:"image/*",onChange:ye,className:"hidden"}),e.jsxs(m,{variant:"outline",onClick:()=>R.current?.click(),disabled:w,className:"w-full gap-2",children:[w?e.jsx(g,{className:"h-4 w-4 animate-spin"}):e.jsx(ne,{className:"h-4 w-4"}),w?"Uploading...":"Choose Image"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Or paste URL"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex gap-2",children:e.jsx(f,{value:l.cover_image_url||"",onChange:s=>u({...l,cover_image_url:s.target.value}),placeholder:"https://example.com/your-image.jpg"})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Recommended size: 400x400px. Supports JPG, PNG, WebP."})]})]})]})})]}),e.jsxs(_,{children:[e.jsx(b,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),"Basic Information"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Clinic Name"}),e.jsx(f,{value:l.name||"",onChange:s=>u({...l,name:s.target.value}),placeholder:"Your clinic name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Website"}),e.jsxs("div",{className:"relative",children:[e.jsx(Pe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(f,{className:"pl-10",value:l.website||"",onChange:s=>u({...l,website:s.target.value}),placeholder:"https://yourwebsite.com"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Description"}),e.jsx(J,{value:l.description||"",onChange:s=>u({...l,description:s.target.value}),placeholder:"Tell patients about your clinic, services, and expertise...",rows:4})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(ke,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(f,{className:"pl-10",value:l.phone||"",onChange:s=>u({...l,phone:s.target.value}),placeholder:"+971 4 XXX XXXX"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ge,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(f,{className:"pl-10",value:l.email||"",onChange:s=>u({...l,email:s.target.value}),placeholder:"contact@yourclinic.com"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ee,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(J,{className:"pl-10",value:l.address||"",onChange:s=>u({...l,address:s.target.value}),placeholder:"Full clinic address",rows:2})]})]})]})]}),e.jsxs(_,{className:"border-primary/20 bg-primary/5",children:[e.jsx(b,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google Business Profile Sync"]})}),e.jsx(S,{children:i.google_place_id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Fe,{className:"h-5 w-5 text-teal mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-teal",children:"Google Business Connected"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Your Google reviews and business data are synced."}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx(Z,{variant:"outline",children:i.google_place_id}),e.jsx(m,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs("a",{href:`https://www.google.com/maps/place/?q=place_id:${i.google_place_id}`,target:"_blank",rel:"noopener noreferrer",children:["View on Google ",e.jsx(Re,{className:"h-3 w-3 ml-1"})]})})]})]})]}),e.jsxs(m,{variant:"outline",className:"w-full",onClick:()=>_e(),disabled:V,children:[V?e.jsx(g,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsxs("svg",{className:"h-4 w-4 mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sync Now from Google"]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($e,{className:"h-5 w-5 text-amber-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Google Business Not Connected"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Connect your Google Business profile to sync reviews, photos, and enable the review redirect feature."})]})]}),e.jsxs("div",{className:"p-4 bg-background rounded-xl border space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium mb-3",children:"Connect with your Google account"}),e.jsxs(m,{variant:"outline",className:"w-full gap-3 h-12 text-base",onClick:()=>Ne(),disabled:$,children:[$?e.jsx(g,{className:"h-5 w-5 animate-spin"}):e.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"This will verify your ownership and sync your business profile"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or enter manually"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Google Place ID"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{value:N,onChange:s=>Q(s.target.value),placeholder:"ChIJ..."}),e.jsx(m,{onClick:()=>be(),disabled:!N.trim()||X,children:X?e.jsx(g,{className:"h-4 w-4 animate-spin"}):e.jsx(ce,{className:"h-4 w-4"})})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Find your Place ID at"," ",e.jsx("a",{href:"https://developers.google.com/maps/documentation/places/web-service/place-id",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Google Place ID Finder"})]})]})]})]})})]}),e.jsxs(_,{children:[e.jsx(b,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-5 w-5"}),"Opening Hours"]})}),e.jsx(S,{children:e.jsx("div",{className:"space-y-3",children:v.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-xl bg-muted/30",children:[e.jsx("div",{className:"w-28 font-medium",children:de[s.day_of_week]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!s.is_closed,onChange:r=>{const t=[...v];t[a]={...s,is_closed:!r.target.checked},k(t)},className:"rounded"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Open"})]}),!s.is_closed&&e.jsxs(e.Fragment,{children:[e.jsxs(ee,{value:s.open_time||"09:00",onValueChange:r=>{const t=[...v];t[a]={...s,open_time:r},k(t)},children:[e.jsx(se,{className:"w-28",children:e.jsx(ae,{})}),e.jsx(ie,{className:"max-h-64",children:me.map(r=>e.jsx(le,{value:r,children:r},r))})]}),e.jsx("span",{className:"text-muted-foreground",children:"to"}),e.jsxs(ee,{value:s.close_time||"18:00",onValueChange:r=>{const t=[...v];t[a]={...s,close_time:r},k(t)},children:[e.jsx(se,{className:"w-28",children:e.jsx(ae,{})}),e.jsx(ie,{className:"max-h-64",children:me.map(r=>e.jsx(le,{value:r,children:r},r))})]})]}),s.is_closed&&e.jsx(Z,{variant:"secondary",children:"Closed"})]},s.day_of_week))})})]}),e.jsxs(_,{children:[e.jsxs(b,{className:"flex flex-row items-center justify-between",children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5"}),"Gallery Images"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:E,type:"file",accept:"image/*",onChange:ve,className:"hidden"}),e.jsxs(m,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>E.current?.click(),disabled:w,children:[w?e.jsx(g,{className:"h-4 w-4 animate-spin"}):e.jsx(ne,{className:"h-4 w-4"}),"Upload"]}),e.jsxs(qe,{open:ue,onOpenChange:O,children:[e.jsx(Ue,{asChild:!0,children:e.jsxs(m,{size:"sm",variant:"outline",className:"gap-2",children:[e.jsx(Ve,{className:"h-4 w-4"}),"Add URL"]})}),e.jsxs(Me,{children:[e.jsx(Be,{children:e.jsx(De,{children:"Add Gallery Image by URL"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Image URL"}),e.jsx(f,{value:j,onChange:s=>L(s.target.value),placeholder:"https://example.com/image.jpg"})]}),j&&e.jsx("div",{className:"rounded-lg overflow-hidden border",children:e.jsx("img",{src:j,alt:"Preview",className:"w-full h-48 object-cover",onError:s=>s.currentTarget.src="https://via.placeholder.com/400x200?text=Invalid+URL"})}),e.jsxs(m,{className:"w-full",onClick:je,disabled:!j.trim()||A.isPending,children:[A.isPending?e.jsx(g,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Add Image"]})]})]})]})]})]}),e.jsx(S,{children:F&&F.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:F.map(s=>e.jsxs("div",{className:"relative group rounded-xl overflow-hidden border",children:[e.jsx("img",{src:s.image_url,alt:s.caption||"Gallery",className:"w-full h-32 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(m,{size:"icon",variant:"destructive",className:"h-8 w-8",onClick:()=>fe.mutate(s.id),children:e.jsx(Qe,{className:"h-4 w-4"})})})]},s.id))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-xl",children:[e.jsx(oe,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No gallery images yet"}),e.jsx("p",{className:"text-sm",children:"Add images to showcase your clinic"})]})})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(D,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:"No Practice Linked"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Please claim your practice profile first to edit it."}),e.jsx(m,{asChild:!0,children:e.jsx(Le,{to:"/claim-profile",children:"Claim Your Profile"})})]})}export{fs as default};
