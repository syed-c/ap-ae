import{u as q,j as e}from"./chunk-CPh6voF3.js";import{r as H}from"./chunk-CffrGP6S.js";import{b as se,N as te,L as _}from"./chunk-Drd-rt-S.js";import{ar as ae,as as ie,at as ne,ah as re,s as g,au as T,av as le,aw as oe,ai as de,aq as M,o as ce,B as O,Y as me,w as xe,n as pe,t as ue,ax as he,ay as ge,az as fe,aA as be,aB as ye}from"./index-DflORfjh.js";import{P as V}from"./chunk-D3ia1n3Z.js";import{S as p}from"./chunk-DXeotKgJ.js";import{D as je,S as ve}from"./chunk-Bt9SaPEw.js";import{P as we,G as Ne}from"./chunk-Cl1IhW7I.js";import{u as Se,s as Ce,a as ke,B as W}from"./chunk-BRXgshsy.js";import{S as F}from"./chunk-CQtADEjB.js";import{B as qe}from"./chunk-C-nCkXKs.js";import{u as _e}from"./chunk-D4pwncBY.js";import{A as Fe,a as $e,b as Ae,c as Be}from"./chunk-BMzWzDrf.js";import{S as Pe}from"./chunk-DpLtiXM0.js";import"./chunk-B8auUmee.js";import"./chunk-DK8nT4cj.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";import"./chunk-CScGTjGl.js";import"./chunk-BrfF1Wgp.js";import"./chunk-BaL04tya.js";import"./chunk-CKWDY2Lf.js";const rs=()=>{const{stateSlug:d}=se(),r=ae(d),E=!d||["about","contact","faq","how-it-works","privacy","terms","auth","admin","dashboard","search","services","insurance","blog","claim-profile","list-your-practice","onboarding","gmb-select","find-dentist","clinic","dentist","sitemap","pricing","appointment","review","rq","tools","emergency-dentist","editorial-policy","medical-review-policy","verification-policy","home-v2","dashboard-v2","form","book"].includes(d)||d.includes("/"),{data:m,isLoading:$}=ie(r||""),{data:l,isLoading:A}=ne(r||""),{data:n,isLoading:j,isFetching:v}=re(r||""),K=!n&&(j||v),{data:u}=Se("state",r),f=(l||[]).map(s=>s.id),{data:Q}=q({queryKey:["city-clinic-counts",d,f.join(",")],queryFn:async()=>{if(!f.length)return{};const{data:s,error:i}=await g.from("clinics").select("city_id").in("city_id",f).eq("is_active",!0);if(i)throw i;const o={};for(const y of s||[]){const h=y.city_id;h&&(o[h]=(o[h]||0)+1)}return o},enabled:f.length>0}),{data:w,isLoading:B}=q({queryKey:["state-profiles",d,u?.map(s=>s.id).join(",")],queryFn:async()=>{if(!m)return[];const s=(u||[]).map(a=>a.id),{data:i}=await g.from("cities").select("id").eq("state_id",m.id);if(!i?.length)return[];const o=i.map(a=>a.id),{data:y}=await g.from("clinics").select(`
          id, name, slug, description, cover_image_url, rating, review_count,
          address, phone, verification_status, claim_status,
          city:cities(name, slug, state:states(name, abbreviation))
        `).in("city_id",o).eq("is_active",!0).order("rating",{ascending:!1}).limit(50),h=new Set((y||[]).map(a=>a.id)),D=s.filter(a=>!h.has(a));let z=[];if(D.length>0){const{data:a}=await g.from("clinics").select(`
            id, name, slug, description, cover_image_url, rating, review_count,
            address, phone, verification_status, claim_status,
            city:cities(name, slug, state:states(name, abbreviation))
          `).in("id",D).eq("is_active",!0);z=a||[]}const I=new Set;return[...y||[],...z].filter(a=>I.has(a.id)?!1:(I.add(a.id),!0)).map(a=>({id:a.id,name:a.name,slug:a.slug,type:"clinic",specialty:"Dental Clinic",location:a.city?`${a.city.name}, ${a.city.state?.name||a.city.state?.abbreviation||""}`:"",rating:a.rating||0,reviewCount:a.review_count||0,image:a.cover_image_url,isVerified:a.verification_status==="verified",isClaimed:a.claim_status==="claimed",isPinned:!1}))},enabled:!!m}),N=H.useMemo(()=>{if(!w)return[];const s=Ce(w,u||[]),i=new Set((u||[]).map(o=>o.id));return s.map(o=>({...o,isPinned:i.has(o.id)}))},[w,u]),{filters:c,setFilters:S}=ke(),C=H.useMemo(()=>{let s=[...N];return c.minRating>0&&(s=s.filter(i=>(i.rating||0)>=c.minRating)),c.verifiedOnly&&(s=s.filter(i=>i.isVerified)),s},[N,c]),G=c.maxBudget!==null||c.minRating>0||c.verifiedOnly,{data:x,isLoading:U}=q({queryKey:["treatments"],queryFn:async()=>{const{data:s}=await g.from("treatments").select("*").eq("is_active",!0).order("display_order").limit(8);return s||[]}});if(_e(!$&&!A&&!B&&!U&&!j&&!v&&!!m),E)return e.jsx(T,{});if(d&&r&&d!==r)return e.jsx(te,{to:`/${r}/`,replace:!0});if($)return e.jsx(V,{children:e.jsxs("div",{className:"container py-12",children:[e.jsx(F,{className:"h-12 w-64 mb-4"}),e.jsx(F,{className:"h-6 w-96"})]})});if(!m)return e.jsx(T,{});const t=m.name,Y=m.abbreviation,Z=[{label:"Home",href:"/"},{label:t}],b=n?.content?le(n.content):null,P=n?.faqs&&Array.isArray(n.faqs)&&n.faqs.length>0?n.faqs:n?.content?oe(n.content):[],J=n?.meta_title||`Find Dentists in ${t} - Top Dental Clinics in ${t}`,X=n?.meta_description||`Find and book appointments with top-rated dental professionals in ${t}. Compare verified clinics across ${l?.length||0}+ areas.`,k=n?.h1||`Find Dentists in ${t}`,L=P.length>0?P.map(s=>({q:s.question,a:s.answer})):[{q:`How do I find a dentist in ${t}?`,a:`Browse our verified list of dentists across ${t}. Select your city, then filter by specialty, rating, and insurance to find the perfect match.`},{q:`Are dentists in ${t} verified?`,a:'All dentists on our platform are licensed professionals. Profiles with the "Verified" badge have completed our additional verification process.'},{q:`What cities in ${t} do you cover?`,a:`We cover major cities across ${t} including ${l?.slice(0,5).map(s=>s.name).join(", ")||"multiple locations"}. More cities are being added regularly.`},{q:"Can I book same-day appointments?",a:`Many dental offices in ${t} offer same-day or next-day appointments. Use our search filters to find clinics with immediate availability.`}],ee=Object.values(Q||{}).reduce((s,i)=>s+i,0)||N?.length||0,R=(x||[]).map(s=>({name:s.name,slug:s.slug}));return e.jsxs(V,{children:[e.jsx(de,{title:J,description:X,canonical:`/${r}/`,keywords:[`dentists ${t}`,`dental clinics ${t}`,`find dentist ${t}`,"book dental appointment"]}),e.jsx(M,{type:"breadcrumb",items:[{name:"Home",url:"/"},{name:t,url:`/${r}/`}]}),e.jsx(M,{type:"faq",questions:L.map(s=>({question:s.q,answer:s.a}))}),e.jsxs("section",{className:"relative overflow-hidden min-h-[50vh] flex items-center bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-[500px] h-[500px] bg-primary/15 rounded-full blur-[120px]"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-[400px] h-[400px] bg-teal/10 rounded-full blur-[100px]"}),e.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:"linear-gradient(rgba(255,255,255,.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,.1) 1px, transparent 1px)",backgroundSize:"60px 60px"}})]}),e.jsxs("div",{className:"container relative z-10 py-16 md:py-20 px-5 md:px-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx(qe,{items:Z,className:"[&_a]:text-white/60 [&_span]:text-white/40 [&_svg]:text-white/30"})}),e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-primary/15 backdrop-blur-md border border-primary/30 rounded-full px-4 py-2 mb-6",children:[e.jsx(ce,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-sm font-bold text-primary",children:"Licensed Dental Professionals"})]}),e.jsx("h1",{className:"font-display text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight mb-4 px-2",style:{fontFamily:"'Varela Round', system-ui, sans-serif"},children:k.includes(t)?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-white",children:k.split(t)[0]}),e.jsx("span",{className:"text-primary",children:t})]}):e.jsx("span",{className:"text-white",children:k})}),e.jsxs("p",{className:"text-lg md:text-xl text-white/40 mb-8 max-w-2xl mx-auto",children:["Discover top-rated dental professionals across ",t,". Browse by city, compare reviews, and book your appointment online."]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-3 mb-8",children:e.jsx(_,{to:"/search",children:e.jsxs(O,{size:"lg",className:"h-12 px-6 font-bold rounded-2xl",children:["Find a Dentist ",e.jsx(me,{className:"ml-2 h-4 w-4"})]})})}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 md:flex md:flex-wrap md:justify-center md:gap-4 px-2",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-1 md:gap-2 bg-white/[0.06] backdrop-blur-md border border-white/10 rounded-xl md:rounded-2xl px-3 py-2 md:px-5 md:py-3",children:[e.jsx(xe,{className:"h-4 w-4 md:h-5 md:w-5 text-primary"}),e.jsx("span",{className:"font-bold text-sm md:text-base text-white",children:l?.length||0}),e.jsx("span",{className:"text-[10px] md:text-sm text-white/50 hidden md:inline",children:"Areas"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-1 md:gap-2 bg-white/[0.06] backdrop-blur-md border border-white/10 rounded-xl md:rounded-2xl px-3 py-2 md:px-5 md:py-3",children:[e.jsx(pe,{className:"h-4 w-4 md:h-5 md:w-5 text-gold fill-gold"}),e.jsx("span",{className:"font-bold text-sm md:text-base text-white",children:"4.8"}),e.jsx("span",{className:"text-[10px] md:text-sm text-white/50 hidden md:inline",children:"Avg. Rating"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-1 md:gap-2 bg-white/[0.06] backdrop-blur-md border border-white/10 rounded-xl md:rounded-2xl px-3 py-2 md:px-5 md:py-3",children:[e.jsx(ue,{className:"h-4 w-4 md:h-5 md:w-5 text-primary"}),e.jsx("span",{className:"font-bold text-sm md:text-base text-white",children:"60s"}),e.jsx("span",{className:"text-[10px] md:text-sm text-white/50 hidden md:inline",children:"Book"})]})]})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0",children:e.jsx("svg",{viewBox:"0 0 1440 80",fill:"none",className:"w-full h-12 md:h-16",preserveAspectRatio:"none",children:e.jsx("path",{d:"M0 80V40C240 10 480 0 720 20C960 40 1200 50 1440 30V80H0Z",className:"fill-background"})})})]}),e.jsx(we,{title:b?.sections?.[0]?.heading||`About Dental Care in ${t}`,content:n?.page_intro||b?.intro||b?.sections?.[0]?.content||`Discover top-rated dental professionals across ${t}. Browse by city, compare reviews, and book your appointment online.`,isLoading:K}),e.jsx(p,{size:"lg",children:e.jsx("div",{className:"container px-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 lg:gap-8 max-w-6xl mx-auto",children:[e.jsx("div",{className:"lg:hidden",children:e.jsxs(he,{children:[e.jsx(ge,{asChild:!0,children:e.jsxs(O,{variant:"outline",className:"w-full rounded-xl font-bold gap-2",children:[e.jsx(Pe,{className:"h-4 w-4"}),"Filters"]})}),e.jsxs(fe,{side:"left",className:"w-[320px] p-0",children:[e.jsx(be,{className:"p-4 border-b",children:e.jsx(ye,{children:"Filter Results"})}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(100vh-80px)]",children:e.jsx(W,{filters:c,onFiltersChange:S,availableServices:x?.map(s=>({id:s.id,name:s.name,slug:s.slug}))||[],locationName:t,totalResults:C?.length||0,className:"border-0 rounded-none shadow-none"})})]})]})}),e.jsx("aside",{className:"hidden lg:block w-72 shrink-0",children:e.jsx("div",{className:"sticky top-24",children:e.jsx(W,{filters:c,onFiltersChange:S,availableServices:x?.map(s=>({id:s.id,name:s.name,slug:s.slug}))||[],locationName:t,totalResults:C?.length||0})})}),e.jsx("div",{className:"flex-1 min-w-0 space-y-8",children:e.jsx(je,{profiles:C,isLoading:B,locationName:t,emptyMessage:`We're adding dentists in ${t}. Check back soon!`,hasActiveFilters:G,onClearFilters:()=>S({maxBudget:null,minRating:0,verifiedOnly:!1,selectedServices:[]}),maxHeight:700,initialCount:10})})]})})}),e.jsx(p,{size:"md",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("span",{className:"inline-block text-xs font-bold text-primary uppercase tracking-widest mb-2",children:"Browse by Area"}),e.jsxs("h2",{className:"font-display text-2xl md:text-3xl font-bold text-foreground",children:["Areas in ",e.jsx("span",{className:"text-primary",children:t})]})]}),A?e.jsx("div",{className:"flex flex-wrap gap-2",children:[...Array(8)].map((s,i)=>e.jsx(F,{className:"h-8 w-28 rounded-full"},i))}):l&&l.length>0?e.jsx("div",{className:"flex flex-wrap gap-x-1 gap-y-1.5",children:l.map((s,i)=>e.jsxs("span",{children:[e.jsx(_,{to:`/${r}/${s.slug}/`,className:"text-primary hover:text-primary/80 font-semibold hover:underline transition-colors",children:s.name}),i<l.length-1&&e.jsx("span",{className:"text-muted-foreground mx-1",children:"·"})]},s.id))}):e.jsxs("p",{className:"text-muted-foreground",children:["We're adding areas in ",t,". Check back soon!"]})]})}),e.jsx(p,{size:"lg",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsx(ve,{variant:"state",locationName:t,stateAbbr:Y,stateSlug:d,clinicCount:ee,cityCount:l?.length||0,parsedContent:b,popularTreatments:R,isLoading:j||v})})}),e.jsx(p,{size:"lg",className:"bg-muted/30",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("span",{className:"inline-block text-xs font-bold text-primary uppercase tracking-widest mb-2",children:"Have Questions?"}),e.jsxs("h2",{className:"font-display text-3xl md:text-4xl font-bold text-foreground",children:["Frequently Asked ",e.jsx("span",{className:"text-primary",children:"Questions"})]})]}),e.jsx(Fe,{type:"single",collapsible:!0,className:"space-y-4",children:L.map((s,i)=>e.jsxs($e,{value:`faq-${i}`,className:"bg-card border border-border rounded-2xl px-6 data-[state=open]:border-primary/30",children:[e.jsx(Ae,{className:"text-left font-bold hover:no-underline py-5",children:s.q}),e.jsx(Be,{className:"text-muted-foreground pb-5",children:s.a})]},i))})]})}),e.jsx(p,{size:"md",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsx(Ne,{pageType:"state",stateSlug:r||"",stateName:t,topCities:(l||[]).slice(0,8).map(s=>({name:s.name,slug:s.slug})),services:R})})}),x&&x.length>0&&e.jsx(p,{size:"md",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("span",{className:"inline-block text-xs font-bold text-primary uppercase tracking-widest mb-2",children:"Browse Services"}),e.jsxs("h2",{className:"font-display text-2xl md:text-3xl font-bold text-foreground mb-6",children:["Dental Treatments in ",e.jsx("span",{className:"text-primary",children:t})]}),e.jsx("div",{className:"flex flex-wrap gap-x-2 gap-y-2",children:x.map((s,i)=>e.jsxs("span",{className:"inline-flex items-center",children:[e.jsx(_,{to:`/${r}/${s.slug}/`,className:"text-primary hover:text-primary/80 font-semibold hover:underline transition-colors",children:s.name}),i<x.length-1&&e.jsx("span",{className:"text-muted-foreground ml-2",children:"·"})]},s.id))})]})})]})};export{rs as default};
