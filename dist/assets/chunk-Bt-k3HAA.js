import{u as d,b as r,c}from"./chunk-CPh6voF3.js";import{s as n,b as s}from"./index-DflORfjh.js";import{c as u}from"./chunk-BSjc5zjM.js";function q(i={}){return d({queryKey:["admin-clinics",i],queryFn:async()=>{let e=n.from("clinics").select("*, city:cities(id, name, slug), area:areas(id, name, slug)").order("created_at",{ascending:!1});i.search&&(e=e.ilike("name",`%${i.search}%`)),i.cityId&&(e=e.eq("city_id",i.cityId)),i.areaId&&(e=e.eq("area_id",i.areaId)),i.claimStatus&&(e=e.eq("claim_status",i.claimStatus)),i.verificationStatus&&(e=e.eq("verification_status",i.verificationStatus)),i.source&&(e=e.eq("source",i.source)),i.isDuplicate!==void 0&&(e=e.eq("is_duplicate",i.isDuplicate));const{data:t,error:a}=await e.limit(2e4);if(a)throw a;return t||[]}})}function w(){const i=r();return c({mutationFn:async({id:e,updates:t})=>{const{data:a}=await n.from("clinics").select("*").eq("id",e).single(),{error:o}=await n.from("clinics").update(t).eq("id",e);if(o)throw o;await u({action:"UPDATE",entityType:"clinic",entityId:e,oldValues:a,newValues:t})},onSuccess:()=>{i.invalidateQueries({queryKey:["admin-clinics"]}),i.invalidateQueries({queryKey:["admin-clinic"]}),s.success("Clinic updated")},onError:e=>s.error("Failed: "+e.message)})}function f(i){return d({queryKey:["admin-dentists",i],queryFn:async()=>{let e=n.from("dentists").select("*").order("name");const{data:t,error:a}=await e.limit(2e4);if(a)throw a;return t||[]}})}function p(){const i=r();return c({mutationFn:async e=>{const{data:t,error:a}=await n.from("clinics").insert([e]).select().single();if(a)throw a;return await u({action:"CREATE",entityType:"clinic",entityId:t.id,newValues:e}),t},onSuccess:()=>{i.invalidateQueries({queryKey:["admin-clinics"]}),s.success("Clinic created")},onError:e=>s.error("Failed: "+e.message)})}function C(){const i=r();return c({mutationFn:async e=>{const{data:t,error:a}=await n.from("dentists").insert([e]).select().single();if(a)throw a;return await u({action:"CREATE",entityType:"dentist",entityId:t.id,newValues:e}),t},onSuccess:()=>{i.invalidateQueries({queryKey:["admin-dentists"]}),s.success("Dentist created")},onError:e=>s.error("Failed: "+e.message)})}export{f as a,w as b,p as c,C as d,q as u};
