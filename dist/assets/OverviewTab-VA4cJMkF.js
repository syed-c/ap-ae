import{u as y,j as e,b as he}from"./chunk-CPh6voF3.js";import{r as pe}from"./chunk-CffrGP6S.js";import{aM as ge,aN as fe,bs as be,s as t,y as G,i as I,bz as ve,B as j,Y as re,T as ie,l as u,F as Q,w as V,m as O,o as B,G as W,U,Z as we,E as je,A as ye,b as Ne,bk as F,Q as E}from"./index-DflORfjh.js";import{c as Ce}from"./chunk-Drd-rt-S.js";import{P as K}from"./chunk-DSDQubI6.js";import{C as H,d as Y,a as ke,b as Se}from"./chunk-Dwq_v72W.js";import{L as _e}from"./chunk-DR32GIZ2.js";import{T as le}from"./chunk-DbdCK11k.js";import{s as A}from"./chunk-aAsotRsv.js";import{A as Ae}from"./chunk-B0DPEAZ9.js";import{P as qe}from"./chunk-HAC-i_a2.js";import{U as D}from"./chunk-D2X27E5n.js";import{M as Ie}from"./chunk-B7d2qnKb.js";import{B as X}from"./chunk-Bl7VVhKV.js";import{C as Pe}from"./chunk-wy0nNZZG.js";import{R as Z}from"./chunk-BOvFDp2b.js";import{A as Re}from"./chunk-C2VW2Ml6.js";import{E as J}from"./chunk-CcezodbN.js";import{R as ee,A as De,X as Te,Y as Le,T as te,a as $,P as Me,b as Oe,C as Be}from"./chunk-DK8nT4cj.js";import{F as se}from"./chunk-BaL04tya.js";import{e as Fe,d as Ke}from"./chunk-CyRXX0qx.js";import"./chunk-B8auUmee.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";import"./chunk-DncHrJ4I.js";function $e(n,i){const o=+ge(n);return fe(n,o+i)}function ze(n,i){return $e(n,i*be)}function Ge(n,i){return ze(n,-i)}function Qe(){return y({queryKey:["admin-stats"],queryFn:async()=>{const n=new Date,i=new Date(n.getFullYear(),n.getMonth(),n.getDate()),o=new Date(i.getTime()-7*24*60*60*1e3),c=new Date(i.getTime()-30*24*60*60*1e3),[{count:s},{count:m},{count:d},{count:p},{count:l},{count:f},{count:N},{count:w},{count:h},{count:C},{count:b},{count:k},{count:_},{count:P},{count:L},{count:q},{count:M},{count:a},{count:r},{count:g},{count:x},{count:v},{count:S},{count:R},{count:ne},{count:oe},{count:ce},{count:de},{count:me},{count:xe},{count:ue}]=await Promise.all([t.from("countries").select("*",{count:"exact",head:!0}),t.from("cities").select("*",{count:"exact",head:!0}),t.from("areas").select("*",{count:"exact",head:!0}),t.from("treatments").select("*",{count:"exact",head:!0}),t.from("clinics").select("*",{count:"exact",head:!0}),t.from("clinics").select("*",{count:"exact",head:!0}).eq("claim_status","unclaimed"),t.from("clinics").select("*",{count:"exact",head:!0}).eq("claim_status","claimed"),t.from("clinics").select("*",{count:"exact",head:!0}).eq("verification_status","verified"),t.from("clinics").select("*",{count:"exact",head:!0}).eq("is_duplicate",!0),t.from("clinics").select("*",{count:"exact",head:!0}).eq("is_active",!0),t.from("clinics").select("*",{count:"exact",head:!0}).eq("is_active",!1),t.from("clinics").select("*",{count:"exact",head:!0}).eq("source","gmb"),t.from("clinics").select("*",{count:"exact",head:!0}).eq("source","manual"),t.from("dentists").select("*",{count:"exact",head:!0}),t.from("dentists").select("*",{count:"exact",head:!0}).eq("is_active",!0),t.from("patients").select("*",{count:"exact",head:!0}),t.from("leads").select("*",{count:"exact",head:!0}).gte("created_at",i.toISOString()),t.from("leads").select("*",{count:"exact",head:!0}).gte("created_at",o.toISOString()),t.from("leads").select("*",{count:"exact",head:!0}).gte("created_at",c.toISOString()),t.from("leads").select("*",{count:"exact",head:!0}),t.from("appointments").select("*",{count:"exact",head:!0}).eq("status","pending"),t.from("appointments").select("*",{count:"exact",head:!0}).eq("status","confirmed"),t.from("appointments").select("*",{count:"exact",head:!0}).eq("status","completed"),t.from("appointments").select("*",{count:"exact",head:!0}).eq("status","cancelled"),t.from("appointments").select("*",{count:"exact",head:!0}).eq("status","no_show"),t.from("claim_requests").select("*",{count:"exact",head:!0}).eq("status","pending"),t.from("claim_requests").select("*",{count:"exact",head:!0}).eq("status","approved"),t.from("claim_requests").select("*",{count:"exact",head:!0}).eq("status","rejected"),t.from("platform_alerts").select("*",{count:"exact",head:!0}).eq("is_read",!1),t.from("platform_alerts").select("*",{count:"exact",head:!0}).eq("severity","critical").eq("is_read",!1),t.from("clinic_subscriptions").select("*",{count:"exact",head:!0}).eq("status","active")]);return{locations:{countries:s||0,cities:m||0,areas:d||0},services:{total:p||0,parents:0,children:0},clinics:{total:l||0,unclaimed:f||0,claimed:N||0,verified:w||0,duplicates:h||0,suspended:0,active:C||0,paused:b||0,gmbImported:k||0,manual:_||0},dentists:{total:P||0,active:L||0,featured:0},patients:{total:q||0},leads:{today:M||0,week:a||0,month:r||0,total:g||0},appointments:{pending:x||0,confirmed:v||0,completed:S||0,cancelled:R||0,noShow:ne||0},reviews:{pending:0,approved:0,rejected:0},revenue:{activeSubscriptions:ue||0,monthlyRevenue:0,yearlyRevenue:0},claims:{pending:oe||0,approved:ce||0,rejected:de||0},alerts:{unresolved:me||0,critical:xe||0}}},staleTime:6e4})}function Ve(){return y({queryKey:["platform-alerts"],queryFn:async()=>{const{data:n,error:i}=await t.from("platform_alerts").select("*").eq("is_read",!1).order("created_at",{ascending:!1});if(i)throw i;return n}})}function We(){const{data:n,isLoading:i}=y({queryKey:["ai-founder-insights"],queryFn:async()=>{const m=A(new Date,7),d=[],[{count:p},{count:l},{count:f},{count:N},{count:w},{count:h}]=await Promise.all([t.from("clinics").select("*",{count:"exact",head:!0}),t.from("clinics").select("*",{count:"exact",head:!0}).eq("claim_status","claimed"),t.from("claim_requests").select("*",{count:"exact",head:!0}).eq("status","pending"),t.from("review_funnel_events").select("*",{count:"exact",head:!0}).eq("event_type","thumbs_down").gte("created_at",m.toISOString()),t.from("appointments").select("*",{count:"exact",head:!0}).gte("created_at",m.toISOString()),t.from("appointments").select("*",{count:"exact",head:!0}).gte("created_at",A(m,7).toISOString()).lt("created_at",m.toISOString())]),C=p?Math.round((l||0)/p*100):0,b=h?Math.round(((w||0)-h)/h*100):0;return C<30&&d.push({id:"claim-opportunity",type:"opportunity",priority:"high",title:"Untapped Claim Potential",description:`Only ${C}% of clinics are claimed. Focus outreach on high-rating unclaimed profiles.`,metric:`${(p||0)-(l||0)} unclaimed`,action:"Launch outreach campaign"}),(f||0)>0&&d.push({id:"pending-claims",type:"recommendation",priority:(f||0)>5?"high":"medium",title:"Claims Awaiting Review",description:`${f} claim requests need your attention. Quick approval improves conversion.`,metric:`${f} pending`,action:"Review claims now"}),(N||0)>5&&d.push({id:"negative-reviews",type:"risk",priority:"high",title:"Negative Feedback Spike",description:"Increased negative feedback this week. Review common themes and alert affected clinics.",metric:`${N} this week`,action:"Analyze feedback"}),b>10?d.push({id:"appointment-growth",type:"opportunity",priority:"low",title:"Strong Booking Growth",description:`Appointments up ${b}% week-over-week. Consider promoting success stories.`,metric:`+${b}%`,action:"Share metrics"}):b<-10&&d.push({id:"appointment-decline",type:"risk",priority:"medium",title:"Booking Decline Alert",description:`Appointments down ${Math.abs(b)}% this week. Investigate causes.`,metric:`${b}%`,action:"Investigate"}),d.length===0&&d.push({id:"health-check",type:"recommendation",priority:"low",title:"Platform Running Smoothly",description:"No critical issues detected. Consider proactive growth initiatives.",action:"View weekly report"}),d.slice(0,4)},refetchInterval:6e4}),o=s=>{switch(s){case"opportunity":return e.jsx(ie,{className:"h-4 w-4 text-teal"});case"risk":return e.jsx(le,{className:"h-4 w-4 text-coral"});case"recommendation":return e.jsx(_e,{className:"h-4 w-4 text-gold"})}},c=s=>{switch(s){case"high":return"bg-coral/10 border-coral/20";case"medium":return"bg-gold/10 border-gold/20";case"low":return"bg-teal/10 border-teal/20"}};return i?e.jsx(H,{className:"card-modern",children:e.jsx(Y,{className:"p-6 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})})}):e.jsxs(H,{className:"card-modern overflow-hidden",children:[e.jsx(ke,{className:"pb-3 bg-gradient-to-r from-primary/5 to-transparent",children:e.jsxs(Se,{className:"flex items-center gap-2 text-lg",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx(G,{className:"h-4 w-4 text-primary"})}),"AI-Powered Insights",e.jsxs(I,{variant:"outline",className:"ml-auto text-xs",children:[e.jsx(ve,{className:"h-3 w-3 mr-1"}),"Live Analysis"]})]})}),e.jsx(Y,{className:"space-y-3 p-4",children:n?.map(s=>e.jsx("div",{className:`border rounded-xl p-3 transition-all hover:shadow-md ${c(s.priority)}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:o(s.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-sm",children:s.title}),s.metric&&e.jsx(I,{variant:"secondary",className:"text-xs",children:s.metric})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description})]}),s.action&&e.jsxs(j,{variant:"ghost",size:"sm",className:"shrink-0 text-xs",children:[s.action,e.jsx(re,{className:"h-3 w-3 ml-1"})]})]})},s.id))})]})}function T({title:n,value:i,subtitle:o,icon:c,trend:s,trendLabel:m,variant:d="default",color:p="primary",onClick:l,className:f}){const w={primary:{filled:"bg-primary text-white",filledIcon:"bg-white/20 text-white",accent:"text-primary",iconBg:"bg-primary/10",border:"border-primary/20",trendBg:"bg-white/20",trendText:"text-white"},teal:{filled:"bg-teal text-white",filledIcon:"bg-white/20 text-white",accent:"text-teal",iconBg:"bg-teal/10",border:"border-teal/20",trendBg:"bg-white/20",trendText:"text-white"},gold:{filled:"bg-gradient-to-br from-gold to-amber-500 text-white",filledIcon:"bg-white/20 text-white",accent:"text-gold",iconBg:"bg-gold/10",border:"border-gold/20",trendBg:"bg-white/20",trendText:"text-white"},coral:{filled:"bg-coral text-white",filledIcon:"bg-white/20 text-white",accent:"text-coral",iconBg:"bg-coral/10",border:"border-coral/20",trendBg:"bg-white/20",trendText:"text-white"},purple:{filled:"bg-purple text-white",filledIcon:"bg-white/20 text-white",accent:"text-purple",iconBg:"bg-purple/10",border:"border-purple/20",trendBg:"bg-white/20",trendText:"text-white"},blue:{filled:"bg-blue-custom text-white",filledIcon:"bg-white/20 text-white",accent:"text-blue-custom",iconBg:"bg-blue-custom/10",border:"border-blue-custom/20",trendBg:"bg-white/20",trendText:"text-white"}}[p],h=d==="filled";return e.jsx("div",{className:u("relative overflow-hidden rounded-2xl transition-all duration-200 group",h?w.filled:"bg-card border border-border/50 hover:border-border hover:shadow-md",l&&"cursor-pointer hover:scale-[1.01] active:scale-[0.99]",f),onClick:l,children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("p",{className:u("text-sm font-semibold",h?"text-white/90":"text-foreground"),children:n}),e.jsx("button",{className:u("h-8 w-8 rounded-full flex items-center justify-center transition-colors",h?"bg-white/15 hover:bg-white/25 text-white":"bg-muted/50 hover:bg-muted text-muted-foreground"),children:e.jsx(Ae,{className:"h-4 w-4"})})]}),e.jsx("p",{className:u("text-4xl font-extrabold tracking-tight mb-2",h?"text-white":w.accent),children:typeof i=="number"?i.toLocaleString():i}),(s!==void 0||o)&&e.jsxs("div",{className:u("flex items-center gap-2 text-sm",h?"text-white/80":"text-muted-foreground"),children:[s!==void 0&&e.jsxs("span",{className:u("inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium",h?"bg-white/20 text-white":"bg-emerald/10 text-emerald"),children:[e.jsx(ie,{className:"h-3 w-3"}),s>=0?"+":"",s,"%"]}),e.jsx("span",{className:h?"text-white/70":"",children:o||m||"from last month"})]})]})})}function Ue({children:n,className:i,title:o,action:c,variant:s="default",noPadding:m=!1}){const d={default:"bg-card border border-border/50 shadow-sm",dark:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white shadow-xl",accent:"bg-gradient-to-br from-primary/5 to-teal/5 border border-primary/10",gradient:"bg-gradient-to-br from-primary to-teal text-white shadow-xl"},p=s==="dark"||s==="gradient";return e.jsxs("div",{className:u("rounded-2xl overflow-hidden transition-all duration-200",d[s],i),children:[(o||c)&&e.jsxs("div",{className:u("flex items-center justify-between",m?"px-5 pt-5":"px-5 pt-5 pb-0"),children:[o&&e.jsx("h3",{className:u("text-lg font-bold",p?"text-white":"text-foreground"),children:o}),c&&e.jsxs(j,{variant:p?"ghost":"outline",size:"sm",className:u("rounded-full text-xs font-medium",p&&"text-white hover:bg-white/10"),onClick:c.onClick,children:[e.jsx(qe,{className:"h-3.5 w-3.5 mr-1"}),c.label]})]}),e.jsx("div",{className:u(!m&&"p-5"),children:n})]})}function Ee({actions:n,className:i}){const o={primary:"bg-primary/10 text-primary hover:bg-primary/15",teal:"bg-teal/10 text-teal hover:bg-teal/15",gold:"bg-gold/10 text-gold hover:bg-gold/15",coral:"bg-coral/10 text-coral hover:bg-coral/15",purple:"bg-purple/10 text-purple hover:bg-purple/15"};return e.jsx("div",{className:u("grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-8 gap-2",i),children:n.map((c,s)=>e.jsxs("button",{onClick:c.onClick,className:u("relative flex flex-col items-center gap-2 p-4 rounded-xl border border-border/50 bg-card","transition-all duration-200 hover:shadow-md hover:border-border hover:scale-[1.02]","focus:outline-none focus:ring-2 focus:ring-primary/20"),children:[e.jsx("div",{className:u("h-10 w-10 rounded-xl flex items-center justify-center",o[c.color||"primary"]),children:e.jsx(c.icon,{className:"h-5 w-5"})}),e.jsx("span",{className:"text-xs font-medium text-foreground",children:c.label}),c.badge&&e.jsx("span",{className:"absolute -top-1 -right-1 h-5 min-w-5 px-1.5 rounded-full bg-coral text-white text-[10px] font-bold flex items-center justify-center",children:c.badge})]},s))})}function ae({title:n,items:i,action:o,className:c}){const s={primary:"bg-primary/10 text-primary",teal:"bg-teal/10 text-teal",gold:"bg-gold/10 text-gold",coral:"bg-coral/10 text-coral",purple:"bg-purple/10 text-purple",blue:"bg-blue-custom/10 text-blue-custom",emerald:"bg-emerald/10 text-emerald"};return e.jsxs("div",{className:u("bg-card rounded-2xl border border-border/50 overflow-hidden",c),children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-border/50",children:[e.jsx("h3",{className:"font-bold text-foreground",children:n}),o&&e.jsxs("button",{onClick:o.onClick,className:"text-xs font-medium text-primary hover:text-primary/80 flex items-center gap-1",children:[o.label,e.jsx(Q,{className:"h-3.5 w-3.5"})]})]}),e.jsx("div",{className:"divide-y divide-border/30",children:i.map(m=>e.jsxs("div",{onClick:m.onClick,className:u("flex items-center gap-4 px-5 py-3.5 transition-colors",m.onClick&&"cursor-pointer hover:bg-muted/50"),children:[e.jsx("div",{className:u("h-10 w-10 rounded-xl flex items-center justify-center flex-shrink-0",s[m.iconColor||"primary"]),children:e.jsx(m.icon,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-foreground text-sm truncate",children:m.title}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:m.subtitle})]}),m.onClick&&e.jsx(Q,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]},m.id))})]})}function He({value:n,size:i="md",label:o,sublabel:c,className:s}){const d={sm:{container:"h-24 w-24",text:"text-2xl",stroke:8,radius:40},md:{container:"h-32 w-32",text:"text-3xl",stroke:10,radius:55},lg:{container:"h-44 w-44",text:"text-4xl",stroke:12,radius:75}}[i],p=2*Math.PI*d.radius,l=p-n/100*p;return e.jsxs("div",{className:u("flex flex-col items-center",s),children:[e.jsxs("div",{className:u("relative",d.container),children:[e.jsxs("svg",{className:"transform -rotate-90 w-full h-full",children:[e.jsx("circle",{cx:"50%",cy:"50%",r:d.radius,fill:"none",stroke:"hsl(var(--muted))",strokeWidth:d.stroke}),e.jsx("circle",{cx:"50%",cy:"50%",r:d.radius,fill:"none",stroke:"hsl(var(--primary))",strokeWidth:d.stroke,strokeLinecap:"round",strokeDasharray:p,strokeDashoffset:l,className:"transition-all duration-500 ease-out"})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsxs("span",{className:u("font-extrabold text-foreground",d.text),children:[n,"%"]}),o&&e.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:o})]})]}),c&&e.jsx("p",{className:"mt-3 text-sm text-muted-foreground text-center",children:c})]})}const z=["hsl(var(--primary))","hsl(var(--teal))","hsl(var(--gold))","hsl(var(--coral))"];function yt(){const[,n]=Ce(),i=he(),[o,c]=pe.useState(!1),{data:s,isLoading:m,refetch:d}=Qe(),{data:p}=Ve(),l=a=>{n({tab:a})},f=async()=>{c(!0),await Promise.all([d(),i.invalidateQueries({queryKey:["platform-trend-data"]}),i.invalidateQueries({queryKey:["recent-signups-24h"]}),i.invalidateQueries({queryKey:["gmb-connected-count"]}),i.invalidateQueries({queryKey:["platform-activity"]}),i.invalidateQueries({queryKey:["platform-visitors-analytics"]}),i.invalidateQueries({queryKey:["system-uptime"]})]),c(!1),Ne.success("Dashboard refreshed!")},{data:N=[]}=y({queryKey:["platform-trend-data"],queryFn:async()=>{const a=[];for(let r=13;r>=0;r--){const g=F(A(new Date,r)),x=Fe(A(new Date,r)),[v,S,R]=await Promise.all([t.from("leads").select("id",{count:"exact",head:!0}).gte("created_at",g.toISOString()).lte("created_at",x.toISOString()),t.from("appointments").select("id",{count:"exact",head:!0}).gte("created_at",g.toISOString()).lte("created_at",x.toISOString()),t.from("page_views").select("id",{count:"exact",head:!0}).gte("viewed_at",g.toISOString()).lte("viewed_at",x.toISOString())]);a.push({date:E(g,"MMM dd"),shortDate:E(g,"dd"),leads:v.count||0,appointments:S.count||0,views:R.count||0})}return a},staleTime:5*60*1e3});N.slice(-7).map((a,r)=>({label:["S","M","T","W","T","F","S"][new Date(A(new Date,6-r)).getDay()],leads:a.leads,appointments:a.appointments,views:a.views}));const{data:w=0}=y({queryKey:["recent-signups-24h"],queryFn:async()=>{const a=Ge(new Date,24).toISOString(),{count:r}=await t.from("clinics").select("*",{count:"exact",head:!0}).gte("claimed_at",a);return r||0}}),{data:h=0}=y({queryKey:["gmb-connected-count"],queryFn:async()=>{const{count:a}=await t.from("clinics").select("*",{count:"exact",head:!0}).eq("gmb_connected",!0);return a||0}}),{data:C}=y({queryKey:["platform-visitors-analytics"],queryFn:async()=>{const a=F(new Date).toISOString(),r=F(A(new Date,7)).toISOString(),[g,x,v,S]=await Promise.all([t.from("visitor_sessions").select("*",{count:"exact",head:!0}).gte("created_at",a),t.from("visitor_sessions").select("*",{count:"exact",head:!0}).gte("created_at",r),t.from("page_views").select("*",{count:"exact",head:!0}).gte("viewed_at",a),t.from("page_views").select("*",{count:"exact",head:!0}).gte("viewed_at",r)]);return{todaySessions:g.count||0,weekSessions:x.count||0,todayPageviews:v.count||0,weekPageviews:S.count||0}}}),{data:b=[]}=y({queryKey:["platform-activity"],queryFn:async()=>{const[a,r,g]=await Promise.all([t.from("appointments").select("id, patient_name, created_at, status").order("created_at",{ascending:!1}).limit(3),t.from("claim_requests").select("id, created_at, status, clinic:clinics(name)").order("created_at",{ascending:!1}).limit(2),t.from("leads").select("id, patient_name, created_at, source").order("created_at",{ascending:!1}).limit(2)]);return[...(a.data||[]).map(x=>({id:x.id,icon:O,iconColor:"blue",title:"New appointment",subtitle:x.patient_name})),...(r.data||[]).map(x=>({id:x.id,icon:B,iconColor:"gold",title:"Claim request",subtitle:x.clinic?.name||"Unknown clinic"})),...(g.data||[]).map(x=>({id:x.id,icon:D,iconColor:"teal",title:"New lead",subtitle:x.patient_name}))].slice(0,5)},refetchInterval:3e4}),{data:k}=y({queryKey:["system-uptime"],queryFn:async()=>{const[a,r,g]=await Promise.all([t.from("appointments").select("created_at").order("created_at",{ascending:!1}).limit(1),t.from("leads").select("created_at").order("created_at",{ascending:!1}).limit(1),t.from("visitor_sessions").select("created_at").order("created_at",{ascending:!1}).limit(1)]),x=new Date,v=new Date(g.data?.[0]?.created_at||a.data?.[0]?.created_at||r.data?.[0]?.created_at||x.toISOString()),S=Ke(x,v);return{isActive:S<300,lastActivity:v,secondsSinceActivity:S,uptime:"99.9%"}},refetchInterval:6e4});if(m)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});const _=s?.clinics?.total?Math.round((s.clinics.claimed||0)/s.clinics.total*100):0,P=s?.clinics?.claimed?Math.round((s.clinics.verified||0)/s.clinics.claimed*100):0,L=[{icon:V,label:"Clinics",onClick:()=>l("clinics"),color:"primary"},{icon:O,label:"Appointments",onClick:()=>l("appointments"),color:"teal",badge:String(s?.appointments?.pending||0)},{icon:D,label:"Leads",onClick:()=>l("leads"),color:"gold"},{icon:B,label:"Claims",onClick:()=>l("claims"),color:"coral"},{icon:Ie,label:"Reviews",onClick:()=>l("review-insights"),color:"purple"},{icon:W,label:"GMB Status",onClick:()=>l("gmb-connections"),color:"teal"},{icon:U,label:"Users",onClick:()=>l("users"),color:"primary"},{icon:X,label:"AI Controls",onClick:()=>l("ai-controls"),color:"purple"}],q=[{name:"Verified",value:s?.clinics?.verified||0},{name:"Claimed",value:(s?.clinics?.claimed||0)-(s?.clinics?.verified||0)},{name:"Unclaimed",value:s?.clinics?.unclaimed||0}].filter(a=>a.value>0),M=[{id:"1",icon:we,iconColor:"purple",title:"Review pending claims",subtitle:`${s?.claims?.pending||0} awaiting review`},{id:"2",icon:je,iconColor:"teal",title:"SEO optimization",subtitle:"Improve page rankings"},{id:"3",icon:Pe,iconColor:"gold",title:"Monthly report",subtitle:"Due in 3 days"},{id:"4",icon:ye,iconColor:"blue",title:"Outreach campaign",subtitle:"Follow up with leads"}];return e.jsxs("div",{className:"space-y-6 pb-8",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 p-6 shadow-xl",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 rounded-full bg-primary blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-1/3 w-48 h-48 rounded-full bg-teal blur-3xl"})]}),e.jsxs("div",{className:"relative flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(I,{className:"bg-primary/20 text-primary border-0 text-xs",children:[e.jsx(G,{className:"h-3 w-3 mr-1"}),"Command Center"]}),k?.isActive&&e.jsxs(I,{className:"bg-teal/20 text-teal border-0 text-xs",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-teal animate-pulse mr-1"}),"Live"]})]}),e.jsx("h1",{className:"text-3xl font-extrabold text-white tracking-tight",children:"Dashboard"}),e.jsx("p",{className:"text-white/60 mt-1",children:"Plan, prioritize, and accomplish your tasks with ease."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(j,{className:"bg-primary hover:bg-primary/90 text-white rounded-xl shadow-lg shadow-primary/30",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Add Clinic"]}),e.jsxs(j,{variant:"outline",className:"rounded-xl border-white/20 text-white hover:bg-white/10",onClick:f,disabled:o,children:[e.jsx(Z,{className:`h-4 w-4 mr-2 ${o?"animate-spin":""}`}),"Refresh"]})]})]}),e.jsxs("div",{className:"relative mt-6 flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm rounded-xl px-4 py-2",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${k?.isActive?"bg-emerald-400 animate-pulse":"bg-amber-400"}`}),e.jsx("span",{className:"text-sm text-white/80",children:k?.isActive?"Systems Online":"Low Activity"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm rounded-xl px-4 py-2",children:[e.jsx(Re,{className:"h-4 w-4 text-primary"}),e.jsxs("span",{className:"text-sm text-white/80",children:[w," signups today"]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm rounded-xl px-4 py-2",children:[e.jsx(W,{className:"h-4 w-4 text-teal"}),e.jsxs("span",{className:"text-sm text-white/80",children:[h," GMB connected"]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm rounded-xl px-4 py-2",children:[e.jsx(J,{className:"h-4 w-4 text-gold"}),e.jsxs("span",{className:"text-sm text-white/80",children:[C?.todaySessions||0," visitors today"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(T,{title:"Total Clinics",value:s?.clinics?.total||0,icon:V,variant:"filled",color:"primary",trend:12,trendLabel:"Increased from last month",onClick:()=>l("clinics")}),e.jsx(T,{title:"Claimed Profiles",value:s?.clinics?.claimed||0,icon:B,subtitle:`${_}% claim rate`,onClick:()=>l("clinics")}),e.jsx(T,{title:"Active Leads",value:s?.leads?.total||0,icon:D,trend:8,trendLabel:"Increased from last month",onClick:()=>l("leads")}),e.jsx(T,{title:"Pending Tasks",value:p?.length||0,icon:le,subtitle:"Requires attention"})]}),e.jsx(Ee,{actions:L}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(Ue,{title:"Platform Analytics (14 Days)",className:"h-full",children:[e.jsx("div",{className:"h-72",children:e.jsx(ee,{width:"100%",height:"100%",children:e.jsxs(De,{data:N,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorViews",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorLeads",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--teal))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--teal))",stopOpacity:0})]})]}),e.jsx(Te,{dataKey:"shortDate",axisLine:!1,tickLine:!1,tick:{fill:"hsl(var(--muted-foreground))",fontSize:11}}),e.jsx(Le,{hide:!0}),e.jsx(te,{content:({active:a,payload:r,label:g})=>a&&r&&r.length?e.jsxs("div",{className:"bg-popover border border-border text-popover-foreground px-4 py-3 rounded-lg shadow-lg",children:[e.jsx("p",{className:"font-semibold mb-2",children:r[0]?.payload?.date}),r.map((x,v)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"h-2 w-2 rounded-full",style:{backgroundColor:x.color}}),e.jsxs("span",{className:"capitalize",children:[x.dataKey,":"]}),e.jsx("span",{className:"font-bold",children:x.value})]},v))]}):null}),e.jsx($,{type:"monotone",dataKey:"views",stroke:"hsl(var(--primary))",fill:"url(#colorViews)",strokeWidth:2}),e.jsx($,{type:"monotone",dataKey:"leads",stroke:"hsl(var(--teal))",fill:"url(#colorLeads)",strokeWidth:2}),e.jsx($,{type:"monotone",dataKey:"appointments",stroke:"hsl(var(--gold))",fill:"transparent",strokeWidth:2,strokeDasharray:"5 5"})]})})}),e.jsxs("div",{className:"flex items-center justify-center gap-6 mt-4 pt-4 border-t border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-primary"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Page Views"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-teal"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Leads"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-gold"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Appointments"})]})]})]})}),e.jsxs("div",{className:"bg-card rounded-2xl border border-border/50 p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-bold text-foreground",children:"Weekly Report"}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>l("weekly"),children:e.jsx(re,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-primary/5 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-primary/10 flex items-center justify-center",children:e.jsx(J,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground",children:"Page Views"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This week"})]})]}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:C?.weekPageviews?.toLocaleString()||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-teal/5 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-teal/10 flex items-center justify-center",children:e.jsx(U,{className:"h-5 w-5 text-teal"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground",children:"Sessions"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This week"})]})]}),e.jsx("p",{className:"text-2xl font-bold text-teal",children:C?.weekSessions?.toLocaleString()||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gold/5 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gold/10 flex items-center justify-center",children:e.jsx(O,{className:"h-5 w-5 text-gold"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground",children:"Bookings"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This week"})]})]}),e.jsx("p",{className:"text-2xl font-bold text-gold",children:s?.appointments?.confirmed||0})]}),e.jsxs(j,{onClick:()=>l("weekly"),className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground rounded-xl",children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"View Full Report"]})]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx(ae,{title:"Recent Activity",items:b.map(a=>({id:a.id,icon:a.icon,iconColor:a.iconColor,title:a.title,subtitle:a.subtitle,onClick:()=>l("appointments")})),action:{label:"View All",onClick:()=>l("appointments")}}),e.jsxs("div",{className:"bg-card rounded-2xl border border-border/50 p-6 shadow-sm",children:[e.jsx("h3",{className:"font-bold text-foreground mb-4",children:"Clinic Progress"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(He,{value:_,size:"lg",label:"Claimed"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-6 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-primary"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-gold"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"In Progress"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-coral"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Pending"})]})]})]})]}),e.jsx(ae,{title:"Priority Tasks",items:M.map(a=>({...a,onClick:()=>l("claims")})),action:{label:"+ New",onClick:()=>{}}})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-6 shadow-xl",children:[e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1/2 opacity-20 overflow-hidden",children:[...Array(12)].map((a,r)=>e.jsx("div",{className:"absolute h-full w-0.5 bg-gradient-to-b from-transparent via-primary to-transparent transform rotate-12",style:{right:`${r*16}px`}},r))}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h3",{className:"text-sm font-bold text-white/60 uppercase tracking-wider mb-3",children:"System Metrics"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-extrabold text-white font-mono",children:s?.clinics?.verified||0}),e.jsx("p",{className:"text-xs text-white/50",children:"Verified"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-extrabold text-teal font-mono",children:h}),e.jsx("p",{className:"text-xs text-white/50",children:"GMB"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-extrabold text-gold font-mono",children:w}),e.jsx("p",{className:"text-xs text-white/50",children:"24h Signups"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${k?.isActive?"bg-emerald-400 animate-pulse":"bg-amber-400"}`}),e.jsx("span",{className:"text-sm text-white/60",children:k?.isActive?"All systems operational":`Last activity ${Math.round((k?.secondsSinceActivity||0)/60)}m ago`})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[e.jsxs(j,{size:"sm",className:"bg-white/10 hover:bg-white/20 text-white",onClick:f,disabled:o,children:[e.jsx(Z,{className:`h-4 w-4 mr-1 ${o?"animate-spin":""}`}),"Refresh"]}),e.jsx(j,{size:"sm",variant:"ghost",className:"text-white/60 hover:text-white hover:bg-white/10",onClick:()=>l("audit-logs"),children:"View Logs"})]})]})]}),e.jsxs("div",{className:"bg-card rounded-2xl border border-border/50 p-6 shadow-sm",children:[e.jsx("h3",{className:"font-bold text-foreground mb-4",children:"Clinic Distribution"}),e.jsx("div",{className:"h-44",children:e.jsx(ee,{width:"100%",height:"100%",children:e.jsxs(Me,{children:[e.jsx(Oe,{data:q,cx:"50%",cy:"50%",innerRadius:45,outerRadius:65,paddingAngle:3,dataKey:"value",children:q.map((a,r)=>e.jsx(Be,{fill:z[r%z.length]},`cell-${r}`))}),e.jsx(te,{content:({active:a,payload:r})=>a&&r&&r.length?e.jsxs("div",{className:"bg-popover border border-border text-popover-foreground px-3 py-1.5 rounded-lg text-sm font-bold shadow-lg",children:[r[0].name,": ",Number(r[0].value).toLocaleString()]}):null})]})})}),e.jsx("div",{className:"flex items-center justify-center gap-4 mt-2 flex-wrap",children:q.map((a,r)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:z[r]}}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[a.name,": ",a.value.toLocaleString()]})]},a.name))})]}),e.jsxs("div",{className:"bg-card rounded-2xl border border-border/50 p-6 shadow-sm",children:[e.jsx("h3",{className:"font-bold text-foreground mb-4",children:"Performance Summary"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Claim Rate"}),e.jsxs("span",{className:"text-sm font-bold text-primary",children:[_,"%"]})]}),e.jsx(K,{value:_,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Verification Rate"}),e.jsxs("span",{className:"text-sm font-bold text-teal",children:[P,"%"]})]}),e.jsx(K,{value:P,className:"h-2 [&>div]:bg-teal"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:"GMB Connected"}),e.jsxs("span",{className:"text-sm font-bold text-gold",children:[Math.round(h/(s?.clinics?.total||1)*100),"%"]})]}),e.jsx(K,{value:Math.round(h/(s?.clinics?.total||1)*100),className:"h-2 [&>div]:bg-gold"})]}),e.jsxs(j,{variant:"outline",className:"w-full rounded-xl mt-2",onClick:()=>l("weekly"),children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Full Report"]})]})]})]}),e.jsxs("div",{className:"bg-card rounded-2xl border border-border/50 overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border/50 bg-gradient-to-r from-purple/5 to-primary/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-purple to-primary flex items-center justify-center",children:e.jsx(X,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-foreground",children:"AI Insights"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Powered by intelligent automation"})]})]}),e.jsxs(I,{className:"bg-purple/10 text-purple border-0",children:[e.jsx(G,{className:"h-3 w-3 mr-1"}),"Live"]})]}),e.jsx("div",{className:"p-6",children:e.jsx(We,{})})]})]})}export{yt as default};
