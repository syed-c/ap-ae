import{b as js,u as Y,c as fs,j as e}from"./chunk-CPh6voF3.js";import{r as l}from"./chunk-CffrGP6S.js";import{f as We,s as b,B as m,Z as vs,L as M,x as Ye,y as fe,a4 as Ns,a as r,a2 as re,a3 as ie,a5 as le,a6 as ce,a7 as h,b7 as ve,i as F,aG as ys,F as ws,p as Fe,I as U,X as Le,S as qe,C as Ne,Q as Z,a9 as ze,aa as Oe,ab as Ie,ac as Me,ad as Ge,al as V,G as _s,v as bs,w as Cs,U as Ss,b as C,av as ks,bK as Ps,bB as Ts}from"./index-DflORfjh.js";import{C as y,a as G,b as D,c as oe,d as w}from"./chunk-Dwq_v72W.js";import{P as De}from"./chunk-DSDQubI6.js";import{T as He,a as Re,b as J,c as _,d as Qe,e as p}from"./chunk-NLs5Ye4A.js";import{T as $e,a as Be,b as z,c as O}from"./chunk-k8HiDHrE.js";import{S}from"./chunk-DfjE-bP6.js";import{S as As}from"./chunk-FxOzQZIr.js";import{C as Es,a as Fs,b as Ls}from"./chunk-CEjy5RHq.js";import{W as qs}from"./chunk-Bvo6Oh0W.js";import{R as zs}from"./chunk-BOvFDp2b.js";import{L as Os}from"./chunk-BIb-dHdK.js";import{H as Ue}from"./chunk-C077LRJi.js";import{S as Is}from"./chunk-qKgaU6ML.js";import{S as Ve}from"./chunk-Beq7cUgv.js";import{C as H}from"./chunk-GLPyMM0F.js";import{F as we}from"./chunk-BaL04tya.js";import{E as Ms}from"./chunk-CcezodbN.js";import{R as Gs}from"./chunk-3oqKMbN4.js";import{F as Ds}from"./chunk-DFAtUk_4.js";import{B as Ze}from"./chunk-B_ghW3Ra.js";import{L as _e}from"./chunk-Bpcq5jED.js";import{S as Hs}from"./chunk-C7BdFRQZ.js";import"./chunk-B8auUmee.js";import"./chunk-DK8nT4cj.js";import"./chunk-Drd-rt-S.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";import"./chunk-CKWDY2Lf.js";import"./chunk-BSjc5zjM.js";import"./chunk-C2VW2Ml6.js";import"./chunk-I1o_Hd8I.js";import"./chunk-CyRXX0qx.js";import"./chunk-DncHrJ4I.js";import"./chunk-CbETxTmt.js";import"./chunk-j7XJPWWF.js";import"./chunk-DbdCK11k.js";import"./chunk-CedtSHBb.js";import"./chunk-B7d2qnKb.js";import"./chunk-D2X27E5n.js";import"./chunk-Bl7VVhKV.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=We("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=We("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),ye={static:"Static Pages",state:"State Pages",city:"City Pages",treatment:"Service Pages",service_location:"Service + Location",city_treatment:"City + Treatment",clinic:"Clinic/Dentist Pages",dentist:"Dentist Profiles",blog:"Blog Posts"},Ke={static:we,state:_s,city:Ye,treatment:bs,service_location:_e,city_treatment:_e,clinic:Cs,dentist:Ss,blog:Ze};function Lt(){const I=js(),[Xe,de]=l.useState("selection"),[j,xe]=l.useState([]);l.useState("bulk");const[K,be]=l.useState("__all__"),[k,X]=l.useState([]),[Qs,es]=l.useState("__all__"),[ee,ss]=l.useState("__all__"),[L,ts]=l.useState("__all__"),[R,ns]=l.useState([0,5e3]),[se,as]=l.useState(""),[Ce,rs]=l.useState(!1),[o,P]=l.useState({wordCount:700,rewriteEntire:!1,generateIntro:!0,generateSections:!0,generateInternalLinks:!0,expandExisting:!1,saveAsDraft:!1,doNotOverwriteExisting:!1,rewriteOnlyThinSections:!1,generateH1:!0}),[d,Q]=l.useState(null),[me,Se]=l.useState(!1),$=l.useRef(!1),te=l.useRef(null),[u,he]=l.useState(null),[T,ue]=l.useState(null),[is,ne]=l.useState(!1),[A,ae]=l.useState(null),[ls,ke]=l.useState("seo"),[a,v]=l.useState({meta_title:"",meta_description:"",og_title:"",og_description:"",canonical_url:"",h1:"",page_intro:"",content:"",h2_sections:"",internal_links_intro:"",faqs:"",is_indexed:!0});l.useEffect(()=>{te.current&&(te.current.scrollTop=te.current.scrollHeight)},[d?.logs]);const{data:N,isLoading:ge,refetch:Pe}=Y({queryKey:["content-studio-pages"],queryFn:async()=>{const t=[];let n=0;for(;;){const{data:c,error:x}=await b.from("seo_pages").select("*").order("updated_at",{ascending:!1}).range(n,n+1e3-1);if(x)throw x;const g=c||[],f=g.filter(i=>Ps(i.slug,i.page_type));if(t.push(...f),g.length<1e3)break;n+=1e3}return t}}),{data:W}=Y({queryKey:["content-studio-states"],queryFn:async()=>{const{data:s,error:t}=await b.from("states").select("id, name, abbreviation, slug").eq("is_active",!0).in("slug",Ts).order("name");if(t)throw t;return s||[]}});Y({queryKey:["content-studio-cities",k],queryFn:async()=>{let s=b.from("cities").select("id, name, state_id").eq("is_active",!0).order("name").limit(500);k.length>0&&(s=s.in("state_id",k));const{data:t,error:n}=await s;if(n)throw n;return t||[]}});const{data:pe}=Y({queryKey:["content-studio-treatments"],queryFn:async()=>{const{data:s,error:t}=await b.from("treatments").select("id, name, slug").eq("is_active",!0).order("name");if(t)throw t;return s||[]}}),{data:cs}=Y({queryKey:["content-versions",u?.id],queryFn:async()=>{if(!u?.id)return[];const{data:s,error:t}=await b.from("seo_content_versions").select("*").eq("seo_page_id",u.id).order("version_number",{ascending:!1}).limit(20);if(t)throw t;return s||[]},enabled:!!u?.id}),q=l.useMemo(()=>N?{total:N.length,withContent:N.filter(s=>s.content&&(s.word_count||0)>=100).length,noContent:N.filter(s=>!s.content||(s.word_count||0)<50).length,thinContent:N.filter(s=>s.is_thin_content).length,optimized:N.filter(s=>s.is_optimized).length,byType:Object.entries(ye).map(([s,t])=>({type:s,label:t,count:N.filter(n=>n.page_type===s).length,withContent:N.filter(n=>n.page_type===s&&n.content&&(n.word_count||0)>=100).length})).filter(s=>s.count>0)}:null,[N]),E=l.useMemo(()=>N?N.filter(s=>{if(K!=="__all__"&&s.page_type!==K||k.length>0&&!(W?.filter(x=>k.includes(x.id))||[]).some(x=>{const g=x.name?.toLowerCase().replace(/\s+/g,"-")||"",f=s.slug.replace(/^\/+/,"").toLowerCase();return f===g||f.startsWith(`${g}/`)}))return!1;if(ee!=="__all__"){const n=pe?.find(c=>c.id===ee);if(n&&!s.slug.toLowerCase().includes(n.slug.toLowerCase()))return!1}if(L==="has_content"&&(!s.content||(s.word_count||0)<100)||L==="no_content"&&s.content&&(s.word_count||0)>=50||L==="thin_content"&&!s.is_thin_content||L==="optimized"&&!s.is_optimized||L==="not_optimized"&&s.is_optimized||L==="has_meta"&&(!s.meta_title||!s.meta_description)||L==="no_meta"&&s.meta_title&&s.meta_description)return!1;const t=s.word_count||0;if(t<R[0]||t>R[1])return!1;if(se){const n=se.toLowerCase();if(!s.slug.toLowerCase().includes(n)&&!(s.title||"").toLowerCase().includes(n)&&!(s.h1||"").toLowerCase().includes(n))return!1}return!0}):[],[N,K,k,ee,L,R,se,W,pe]),Te=()=>{xe(E.map(s=>s.id))},Ae=()=>{xe([])},os=s=>{xe(t=>t.includes(s)?t.filter(n=>n!==s):[...t,s])},B=s=>{Q(t=>t?{...t,logs:[...t.logs,{...s,timestamp:new Date}]}:null)},ds=()=>{$.current=!0,C.info("Stopping generation... Please wait for current page to complete.")},xs=async()=>{if(j.length===0){C.error("Please select at least one page");return}Se(!0),$.current=!1,de("generation");const s=`job_${Date.now()}`;Q({id:s,status:"running",total:j.length,processed:0,success:0,errors:0,logs:[],startedAt:new Date}),B({page:"",action:"started",message:`Starting content generation for ${j.length} pages...`});let t=0,n=0;for(let c=0;c<j.length;c++){if($.current){B({page:"",action:"skipped",message:`Generation stopped. ${j.length-c} pages skipped.`}),Q(i=>i?{...i,status:"stopped"}:null);break}const x=j[c],f=N?.find(i=>i.id===x)?.slug||x;Q(i=>i?{...i,processed:c,currentPage:f}:null),B({page:f,action:"started",message:"Generating content..."});try{const{data:i,error:Ee}=await b.functions.invoke("content-generation-studio",{body:{action:"generate_content",page_id:x,config:{word_count:o.wordCount,rewrite_entire:o.rewriteEntire,generate_intro:o.generateIntro,generate_sections:o.generateSections,generate_internal_links:o.generateInternalLinks,expand_existing:o.expandExisting,save_as_draft:o.saveAsDraft,do_not_overwrite_existing:o.doNotOverwriteExisting,rewrite_only_thin_sections:o.rewriteOnlyThinSections}}});if(Ee)throw Ee;t++,B({page:f,action:"completed",message:`Content generated successfully! Word count: ${i?.word_count||"N/A"}`,details:i})}catch(i){n++,B({page:f,action:"error",message:`Failed: ${i instanceof Error?i.message:"Unknown error"}`})}Q(i=>i?{...i,processed:c+1,success:t,errors:n}:null),c<j.length-1&&!$.current&&await new Promise(i=>setTimeout(i,2500))}$.current||(Q(c=>c?{...c,status:"completed"}:null),B({page:"",action:"completed",message:`Generation complete! Success: ${t}, Errors: ${n}`})),$.current=!1,Se(!1),I.invalidateQueries({queryKey:["content-studio-pages"]}),C.success(`Generation complete! ${t} pages processed, ${n} errors`)},ms=async s=>{he(s),ne(!0);try{const{data:t,error:n}=await b.functions.invoke("content-generation-studio",{body:{action:"preview_content",page_id:s.id,config:{word_count:o.wordCount}}});if(n)throw n;ue(t)}catch(t){C.error(`Preview failed: ${t instanceof Error?t.message:"Unknown error"}`)}},hs=async()=>{if(!(!u||!T))try{const{error:s}=await b.functions.invoke("content-generation-studio",{body:{action:"apply_content",page_id:u.id,content:T,save_as_draft:o.saveAsDraft}});if(s)throw s;C.success("Content applied successfully!"),ne(!1),he(null),ue(null),I.invalidateQueries({queryKey:["content-studio-pages"]})}catch(s){C.error(`Apply failed: ${s instanceof Error?s.message:"Unknown error"}`)}},us=async s=>{if(u)try{const{error:t}=await b.functions.invoke("content-generation-studio",{body:{action:"rollback_version",page_id:u.id,version_id:s}});if(t)throw t;C.success("Rolled back successfully!"),I.invalidateQueries({queryKey:["content-studio-pages"]}),I.invalidateQueries({queryKey:["content-versions"]})}catch(t){C.error(`Rollback failed: ${t instanceof Error?t.message:"Unknown error"}`)}},gs=async s=>{const{data:t}=await b.from("seo_pages").select("*").eq("id",s.id).single(),n=t||s,c=n.content||"",x=c?ks(c):{intro:"",sections:[]},g=n.page_intro||x.intro||"",f=n.h2_sections?n.h2_sections:x.sections.length>0?x.sections.map(i=>({title:i.heading,content:i.content?.trim()||""})):[];ae(s),ke("seo"),v({meta_title:n.meta_title||"",meta_description:n.meta_description||"",og_title:n.og_title||"",og_description:n.og_description||"",canonical_url:n.canonical_url||"",h1:n.h1||"",page_intro:g,content:c,h2_sections:JSON.stringify(f,null,2),internal_links_intro:n.internal_links_intro||"",faqs:n.faqs?JSON.stringify(n.faqs,null,2):"[]",is_indexed:n.is_indexed??!0})},ps=async()=>{if(A)try{let s=null,t=null;try{s=JSON.parse(a.h2_sections)}catch{s=null}try{t=JSON.parse(a.faqs)}catch{t=null}let n="";if(a.page_intro&&(n+=a.page_intro.trim()+`

`),s&&Array.isArray(s)&&s.length>0)for(const i of s)i.title&&(n+=`## ${i.title}

`),i.content&&(n+=i.content.trim()+`

`);const x=a.content.trim().length>0&&a.content.trim()!==n.trim()?a.content:n.trim(),g=x?x.split(/\s+/).filter(Boolean).length:0,{error:f}=await b.from("seo_pages").update({meta_title:a.meta_title||null,meta_description:a.meta_description||null,og_title:a.og_title||null,og_description:a.og_description||null,canonical_url:a.canonical_url||null,h1:a.h1||null,page_intro:a.page_intro||null,content:x||null,h2_sections:s,internal_links_intro:a.internal_links_intro||null,faqs:t,is_indexed:a.is_indexed,word_count:g,is_thin_content:g<100,is_optimized:g>=200&&(a.meta_title?.length||0)>0,last_content_edit_source:"manual_studio",updated_at:new Date().toISOString()}).eq("id",A.id);if(f)throw f;C.success("All changes saved successfully! Changes will appear on the live page."),ae(null),I.invalidateQueries({queryKey:["content-studio-pages"]}),I.invalidateQueries({queryKey:["seo-page-content"]})}catch(s){C.error(`Save failed: ${s instanceof Error?s.message:"Unknown error"}`)}},je=fs({mutationFn:async s=>{const{data:t,error:n}=await b.functions.invoke("setup-state-seo-pages",{body:{state_id:s}});if(n)throw n;return t},onSuccess:s=>{C.success(s.message||"State SEO pages created successfully!"),I.invalidateQueries({queryKey:["content-studio-pages"]}),Pe()},onError:s=>{C.error(`Setup failed: ${s instanceof Error?s.message:"Unknown error"}`)}});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(qs,{className:"h-6 w-6 text-primary"}),"Content Generation Studio"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Generate high-quality, SEO-optimized content for any page type"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(m,{variant:"outline",onClick:()=>Pe(),disabled:ge,children:[e.jsx(zs,{className:`h-4 w-4 mr-2 ${ge?"animate-spin":""}`}),"Refresh"]})})]}),e.jsxs(y,{className:"border-dashed border-2 border-primary/30 bg-primary/5",children:[e.jsxs(G,{className:"pb-3",children:[e.jsxs(D,{className:"text-lg flex items-center gap-2",children:[e.jsx(vs,{className:"h-5 w-5 text-primary"}),"Quick Actions: State Setup"]}),e.jsx(oe,{children:"Create all city + service pages for a state with one click"})]}),e.jsxs(w,{children:[e.jsx("div",{className:"flex flex-wrap gap-3",children:W?.map(s=>e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>{confirm(`Create all city and service+city SEO pages for ${s.name}? This may create hundreds of pages.`)&&je.mutate(s.id)},disabled:je.isPending,children:[je.isPending?e.jsx(M,{className:"h-4 w-4 mr-1 animate-spin"}):e.jsx(Ye,{className:"h-4 w-4 mr-1"}),s.name," (",s.abbreviation,")"]},s.id))}),e.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:"Each state setup creates city pages + service+city pages for all services. After setup, select pages above and generate content."})]})]}),q&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx(y,{children:e.jsxs(w,{className:"pt-4",children:[e.jsx("div",{className:"text-2xl font-bold",children:q.total.toLocaleString()}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Pages"})]})}),e.jsx(y,{children:e.jsxs(w,{className:"pt-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:q.withContent.toLocaleString()}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"With Content"})]})}),e.jsx(y,{children:e.jsxs(w,{className:"pt-4",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:q.noContent.toLocaleString()}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"No Content"})]})}),e.jsx(y,{children:e.jsxs(w,{className:"pt-4",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:q.thinContent.toLocaleString()}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Thin Content"})]})}),e.jsx(y,{children:e.jsxs(w,{className:"pt-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:q.optimized.toLocaleString()}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Optimized"})]})})]}),e.jsxs($e,{value:Xe,onValueChange:s=>de(s),children:[e.jsxs(Be,{children:[e.jsxs(z,{value:"selection",className:"flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4"}),"Page Selection"]}),e.jsxs(z,{value:"generation",className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),"Generation",me&&e.jsx(M,{className:"h-3 w-3 animate-spin"})]}),e.jsxs(z,{value:"history",className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),"History"]})]}),e.jsxs(O,{value:"selection",className:"space-y-4",children:[e.jsxs(y,{children:[e.jsxs(G,{className:"pb-3",children:[e.jsxs(D,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ns,{className:"h-5 w-5"}),"Page Selection Engine"]}),e.jsx(oe,{children:"Select pages by type, location, service, or content status"})]}),e.jsxs(w,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Page Type"}),e.jsxs(re,{value:K,onValueChange:be,children:[e.jsx(ie,{children:e.jsx(le,{placeholder:"All Types"})}),e.jsxs(ce,{children:[e.jsx(h,{value:"__all__",children:"All Types"}),Object.entries(ye).map(([s,t])=>e.jsx(h,{value:s,children:t},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Emirates (Multi-Select)"}),e.jsxs("div",{className:"border rounded-md p-2 space-y-1 max-h-48 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between pb-1 mb-1 border-b",children:[e.jsx("button",{className:"text-xs text-primary hover:underline",onClick:()=>X(W?.map(s=>s.id)||[]),children:"Select All"}),e.jsx("button",{className:"text-xs text-muted-foreground hover:underline",onClick:()=>X([]),children:"Clear"})]}),W?.map(s=>e.jsxs("label",{className:"flex items-center gap-2 px-1 py-0.5 hover:bg-muted/50 rounded cursor-pointer text-sm",children:[e.jsx(ve,{checked:k.includes(s.id),onCheckedChange:t=>{X(t?n=>[...n,s.id]:n=>n.filter(c=>c!==s.id)),es("__all__")}}),s.name," (",s.abbreviation,")"]},s.id))]}),k.length>0&&e.jsxs(F,{variant:"secondary",className:"text-xs",children:[k.length," emirate",k.length>1?"s":""," selected"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Service/Treatment"}),e.jsxs(re,{value:ee,onValueChange:ss,children:[e.jsx(ie,{children:e.jsx(le,{placeholder:"All Services"})}),e.jsxs(ce,{children:[e.jsx(h,{value:"__all__",children:"All Services"}),pe?.map(s=>e.jsx(h,{value:s.id,children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Content Status"}),e.jsxs(re,{value:L,onValueChange:ts,children:[e.jsx(ie,{children:e.jsx(le,{placeholder:"All Status"})}),e.jsxs(ce,{children:[e.jsx(h,{value:"__all__",children:"All Status"}),e.jsx(h,{value:"no_content",children:"No Content"}),e.jsx(h,{value:"thin_content",children:"Thin Content"}),e.jsx(h,{value:"has_content",children:"Has Content"}),e.jsx(h,{value:"no_meta",children:"Missing Meta"}),e.jsx(h,{value:"has_meta",children:"Has Meta"}),e.jsx(h,{value:"optimized",children:"Optimized"}),e.jsx(h,{value:"not_optimized",children:"Not Optimized"})]})]})]})]}),e.jsxs(Es,{open:Ce,onOpenChange:rs,children:[e.jsx(Fs,{asChild:!0,children:e.jsxs(m,{variant:"ghost",size:"sm",className:"w-full justify-start",children:[Ce?e.jsx(ys,{className:"h-4 w-4 mr-2"}):e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Advanced Filters"]})}),e.jsx(Ls,{className:"space-y-4 pt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Search (URL, Title, H1)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(U,{placeholder:"Search pages...",value:se,onChange:s=>as(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{children:["Word Count Range: ",R[0]," - ",R[1]]}),e.jsx(As,{value:R,onValueChange:s=>ns(s),min:0,max:5e3,step:50})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-between border-t pt-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(F,{variant:"secondary",className:"text-base px-3 py-1",children:[E.length.toLocaleString()," pages match filters"]}),e.jsxs(F,{variant:j.length>0?"default":"outline",className:"text-base px-3 py-1",children:[j.length.toLocaleString()," selected"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:Ae,disabled:j.length===0,children:[e.jsx(Le,{className:"h-4 w-4 mr-1"}),"Clear"]}),e.jsxs(m,{variant:"secondary",size:"sm",onClick:Te,children:[e.jsx(Is,{className:"h-4 w-4 mr-1"}),"Select All Filtered (",E.length,")"]})]})]})]})]}),e.jsxs(y,{children:[e.jsx(G,{className:"pb-3",children:e.jsxs(D,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ve,{className:"h-5 w-5"}),"Generation Controls"]})}),e.jsxs(w,{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Content Length"}),e.jsxs(re,{value:o.wordCount.toString(),onValueChange:s=>P(t=>({...t,wordCount:parseInt(s)})),children:[e.jsx(ie,{children:e.jsx(le,{})}),e.jsxs(ce,{children:[e.jsx(h,{value:"500",children:"500 words"}),e.jsx(h,{value:"700",children:"700 words"}),e.jsx(h,{value:"1000",children:"1000 words"}),e.jsx(h,{value:"1500",children:"1500 words"})]})]})]})}),e.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border mb-4",children:e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[e.jsx(H,{className:"h-3 w-3"}),e.jsxs("span",{children:["Content Studio generates ",e.jsx("strong",{children:"body content only"}),". Use ",e.jsx("strong",{children:"FAQ Studio"})," for FAQs and ",e.jsx("strong",{children:"Meta Optimizer"})," for meta tags."]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{id:"h1",checked:o.generateH1,onCheckedChange:s=>P(t=>({...t,generateH1:s}))}),e.jsx(r,{htmlFor:"h1",children:"Generate H1"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{id:"rewrite",checked:o.rewriteEntire,onCheckedChange:s=>P(t=>({...t,rewriteEntire:s}))}),e.jsx(r,{htmlFor:"rewrite",children:"Rewrite Entire Page"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{id:"intro",checked:o.generateIntro,onCheckedChange:s=>P(t=>({...t,generateIntro:s}))}),e.jsx(r,{htmlFor:"intro",children:"Generate Intro"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{id:"sections",checked:o.generateSections,onCheckedChange:s=>P(t=>({...t,generateSections:s}))}),e.jsx(r,{htmlFor:"sections",children:"Generate Sections"})]}),e.jsxs("div",{className:"flex items-center space-x-2 opacity-50 cursor-not-allowed",children:[e.jsx(S,{id:"faqs-disabled",checked:!1,disabled:!0}),e.jsxs(r,{htmlFor:"faqs-disabled",className:"text-muted-foreground",children:["FAQs ",e.jsx("span",{className:"text-xs",children:"(FAQ Studio)"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{id:"links",checked:o.generateInternalLinks,onCheckedChange:s=>P(t=>({...t,generateInternalLinks:s}))}),e.jsx(r,{htmlFor:"links",children:"Internal Links Intro"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4 p-3 bg-muted/30 rounded-lg border border-dashed",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{id:"no-overwrite",checked:o.doNotOverwriteExisting,onCheckedChange:s=>P(t=>({...t,doNotOverwriteExisting:s}))}),e.jsx(r,{htmlFor:"no-overwrite",className:"text-sm",children:"Don't Overwrite Existing"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{id:"thin-only",checked:o.rewriteOnlyThinSections,onCheckedChange:s=>P(t=>({...t,rewriteOnlyThinSections:s}))}),e.jsx(r,{htmlFor:"thin-only",className:"text-sm",children:"Rewrite Thin Sections Only"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{id:"expand",checked:o.expandExisting,onCheckedChange:s=>P(t=>({...t,expandExisting:s}))}),e.jsx(r,{htmlFor:"expand",className:"text-sm",children:"Expand (Don't Replace)"})]})]}),e.jsxs("div",{className:"flex items-center justify-between border-t pt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{id:"draft",checked:o.saveAsDraft,onCheckedChange:s=>P(t=>({...t,saveAsDraft:s}))}),e.jsx(r,{htmlFor:"draft",children:"Save as Draft (Don't Apply Live)"})]}),e.jsx(m,{onClick:xs,disabled:j.length===0||me,size:"lg",children:me?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Generate Content (",j.length," pages)"]})})]})]})]}),q&&e.jsxs(y,{children:[e.jsx(G,{className:"pb-3",children:e.jsxs(D,{className:"text-lg flex items-center gap-2",children:[e.jsx(Rs,{className:"h-5 w-5"}),"Page Type Distribution"]})}),e.jsx(w,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:q.byType.map(({type:s,label:t,count:n,withContent:c})=>{const x=Ke[s]||we,g=n>0?Math.round(c/n*100):0;return e.jsxs("button",{onClick:()=>be(s),className:`p-3 rounded-lg border text-left transition-colors hover:bg-muted ${K===s?"border-primary bg-primary/5":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(x,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium text-sm",children:t})]}),e.jsx("div",{className:"text-xl font-bold",children:n.toLocaleString()}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[g,"% with content"]}),e.jsx(De,{value:g,className:"h-1 mt-1"})]},s)})})})]}),e.jsxs(y,{children:[e.jsx(G,{className:"pb-3",children:e.jsxs(D,{className:"text-lg",children:["Pages (",E.length,")"]})}),e.jsx(w,{children:e.jsxs(qe,{className:"h-[500px]",children:[e.jsxs(He,{children:[e.jsx(Re,{children:e.jsxs(J,{children:[e.jsx(_,{className:"w-10",children:e.jsx(ve,{checked:E.length>0&&E.every(s=>j.includes(s.id)),onCheckedChange:s=>{s?Te():Ae()}})}),e.jsx(_,{children:"Page"}),e.jsx(_,{children:"Type"}),e.jsx(_,{children:"Words"}),e.jsx(_,{children:"Status"}),e.jsx(_,{children:"Updated"}),e.jsx(_,{className:"text-right",children:"Actions"})]})}),e.jsx(Qe,{children:ge?e.jsx(J,{children:e.jsxs(p,{colSpan:7,className:"text-center py-8",children:[e.jsx(M,{className:"h-6 w-6 animate-spin mx-auto mb-2"}),"Loading pages..."]})}):E.length===0?e.jsx(J,{children:e.jsx(p,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No pages match the current filters"})}):E.slice(0,100).map(s=>{const t=Ke[s.page_type]||we,n=s.content&&(s.word_count||0)>=100;return s.meta_title&&s.meta_description,e.jsxs(J,{children:[e.jsx(p,{children:e.jsx(ve,{checked:j.includes(s.id),onCheckedChange:()=>os(s.id)})}),e.jsx(p,{children:e.jsxs("div",{className:"max-w-[300px]",children:[e.jsx("div",{className:"font-medium truncate",title:s.h1||s.title||s.slug,children:s.h1||s.title||s.slug}),e.jsxs("div",{className:"text-xs text-muted-foreground truncate",children:["/",s.slug]})]})}),e.jsx(p,{children:e.jsxs(F,{variant:"outline",className:"flex items-center gap-1 w-fit",children:[e.jsx(t,{className:"h-3 w-3"}),ye[s.page_type]||s.page_type]})}),e.jsx(p,{children:e.jsx("span",{className:s.word_count&&s.word_count>=300?"text-green-600":"text-amber-600",children:s.word_count?.toLocaleString()||0})}),e.jsx(p,{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[n?e.jsxs(F,{variant:"outline",className:"bg-green-500/10 text-green-700 border-green-200 w-fit",children:[e.jsx(Ne,{className:"h-3 w-3 mr-1"}),"Content"]}):e.jsxs(F,{variant:"outline",className:"bg-red-500/10 text-red-700 border-red-200 w-fit",children:[e.jsx(H,{className:"h-3 w-3 mr-1"}),"No Content"]}),s.is_optimized&&e.jsx(F,{variant:"outline",className:"bg-blue-500/10 text-blue-700 border-blue-200 w-fit",children:"Optimized"})]})}),e.jsx(p,{className:"text-sm text-muted-foreground",children:s.updated_at?Z(new Date(s.updated_at),"MMM d, yyyy"):"-"}),e.jsx(p,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>ms(s),title:"Preview & Generate",children:e.jsx(Ms,{className:"h-4 w-4"})}),e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>gs(s),title:"Manual Edit",children:e.jsx(Je,{className:"h-4 w-4"})})]})})]},s.id)})})]}),E.length>100&&e.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:["Showing 100 of ",E.length," pages. Use filters to narrow down."]})]})})]})]}),e.jsx(O,{value:"generation",className:"space-y-4",children:d?e.jsxs(y,{children:[e.jsxs(G,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(D,{className:"flex items-center gap-2",children:[d.status==="running"?e.jsx(M,{className:"h-5 w-5 animate-spin text-primary"}):d.status==="completed"?e.jsx(Ne,{className:"h-5 w-5 text-green-600"}):d.status==="stopped"?e.jsx(H,{className:"h-5 w-5 text-amber-600"}):e.jsx(H,{className:"h-5 w-5 text-red-600"}),"Generation Job"]}),d.status==="running"&&e.jsx(m,{variant:"destructive",size:"sm",onClick:ds,children:"Stop Generation"})]}),e.jsxs(oe,{children:["Started ",Z(d.startedAt,"PPpp")]})]}),e.jsxs(w,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{children:["Progress: ",d.processed," / ",d.total]}),e.jsxs("span",{children:[Math.round(d.processed/d.total*100),"%"]})]}),e.jsx(De,{value:d.processed/d.total*100})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.success}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Success"})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:d.errors}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Errors"})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted",children:[e.jsx("div",{className:"text-2xl font-bold",children:d.total-d.processed}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Remaining"})]})]}),d.currentPage&&d.status==="running"&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(M,{className:"h-4 w-4 animate-spin"}),"Currently processing: ",e.jsx("span",{className:"font-mono",children:d.currentPage})]}),e.jsxs("div",{className:"border rounded-lg",children:[e.jsx("div",{className:"p-2 bg-muted font-medium text-sm border-b",children:"Generation Logs"}),e.jsx(qe,{className:"h-[300px]",ref:te,children:e.jsx("div",{className:"p-2 space-y-1",children:d.logs.map((s,t)=>e.jsxs("div",{className:`text-xs font-mono p-1.5 rounded ${s.action==="completed"?"bg-green-500/10 text-green-700":s.action==="error"?"bg-red-500/10 text-red-700":s.action==="skipped"?"bg-amber-500/10 text-amber-700":"bg-muted"}`,children:[e.jsxs("span",{className:"opacity-60",children:["[",Z(s.timestamp,"HH:mm:ss"),"]"]})," ",s.page&&e.jsx("span",{className:"font-semibold",children:s.page})," ",s.message]},t))})})]})]})]}):e.jsx(y,{children:e.jsxs(w,{className:"py-12 text-center",children:[e.jsx(fe,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Active Generation Job"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Select pages and start generation from the Page Selection tab"}),e.jsx(m,{onClick:()=>de("selection"),children:"Go to Page Selection"})]})})}),e.jsx(O,{value:"history",className:"space-y-4",children:e.jsxs(y,{children:[e.jsxs(G,{children:[e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-5 w-5"}),"Content Version History"]}),e.jsx(oe,{children:"View and rollback to previous versions of any page"})]}),e.jsx(w,{children:u?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:u.h1||u.slug}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["/",u.slug]})]}),e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>he(null),children:[e.jsx(Le,{className:"h-4 w-4 mr-1"}),"Close"]})]}),e.jsxs(He,{children:[e.jsx(Re,{children:e.jsxs(J,{children:[e.jsx(_,{children:"Version"}),e.jsx(_,{children:"Source"}),e.jsx(_,{children:"Words"}),e.jsx(_,{children:"Score"}),e.jsx(_,{children:"Created"}),e.jsx(_,{children:"Actions"})]})}),e.jsx(Qe,{children:cs?.map(s=>e.jsxs(J,{children:[e.jsx(p,{children:e.jsxs(F,{variant:s.is_current?"default":"outline",children:["v",s.version_number,s.is_current&&" (Current)"]})}),e.jsx(p,{className:"capitalize",children:s.change_source||"Unknown"}),e.jsx(p,{children:s.word_count||0}),e.jsx(p,{children:s.seo_score||"-"}),e.jsx(p,{children:s.created_at?Z(new Date(s.created_at),"MMM d, HH:mm"):"-"}),e.jsx(p,{children:!s.is_current&&e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>us(s.id),children:[e.jsx(Gs,{className:"h-3 w-3 mr-1"}),"Rollback"]})})]},s.id))})]})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Select a page from the Page Selection tab and click the preview icon to view its history"})})]})})]}),e.jsx(ze,{open:is,onOpenChange:ne,children:e.jsxs(Oe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ie,{children:[e.jsx(Me,{children:"Content Preview"}),e.jsxs(Ge,{children:["Preview generated content before applying to: ",u?.slug]})]}),T?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Current H1"}),e.jsx("div",{className:"p-2 bg-muted rounded text-sm",children:u?.h1||"None"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"New H1"}),e.jsx("div",{className:"p-2 bg-green-500/10 rounded text-sm font-medium",children:T.h1})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Current Meta Title"}),e.jsx("div",{className:"p-2 bg-muted rounded text-sm",children:u?.meta_title||"None"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"New Meta Title"}),e.jsx("div",{className:"p-2 bg-green-500/10 rounded text-sm",children:T.meta_title})]})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"New Content Preview"}),e.jsx("div",{className:"p-3 bg-muted rounded text-sm max-h-[200px] overflow-y-auto whitespace-pre-wrap",children:T.intro_paragraph})]}),T.faq&&T.faq.length>0&&e.jsxs("div",{children:[e.jsxs(r,{className:"text-xs text-muted-foreground",children:["FAQs (",T.faq.length,")"]}),e.jsx("div",{className:"p-3 bg-muted rounded space-y-2",children:T.faq.slice(0,3).map((s,t)=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"font-medium",children:["Q: ",s.question]}),e.jsxs("div",{className:"text-muted-foreground truncate",children:["A: ",s.answer]})]},t))})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(m,{variant:"outline",onClick:()=>{ne(!1),ue(null)},children:"Cancel"}),e.jsxs(m,{onClick:hs,children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Apply Content"]})]})]}):e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(M,{className:"h-8 w-8 animate-spin"})})]})}),e.jsx(ze,{open:!!A,onOpenChange:s=>!s&&ae(null),children:e.jsxs(Oe,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ie,{children:[e.jsxs(Me,{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"h-5 w-5 text-primary"}),"Edit Page Content"]}),e.jsxs(Ge,{children:[e.jsxs("code",{className:"text-primary font-mono",children:["/",A?.slug]}),e.jsx("span",{className:"ml-2",children:e.jsx(F,{variant:"outline",className:"capitalize",children:A?.page_type})})]})]}),e.jsxs($e,{value:ls,onValueChange:ke,className:"w-full",children:[e.jsxs(Be,{className:"grid w-full grid-cols-5 mb-4",children:[e.jsxs(z,{value:"seo",className:"flex items-center gap-1 text-xs",children:[e.jsx(Fe,{className:"h-3 w-3"}),"SEO & Meta"]}),e.jsxs(z,{value:"hero",className:"flex items-center gap-1 text-xs",children:[e.jsx(Ds,{className:"h-3 w-3"}),"Hero & Intro"]}),e.jsxs(z,{value:"content",className:"flex items-center gap-1 text-xs",children:[e.jsx(Ze,{className:"h-3 w-3"}),"Body Content"]}),e.jsxs(z,{value:"faqs",className:"flex items-center gap-1 text-xs",children:[e.jsx(_e,{className:"h-3 w-3"}),"FAQs"]}),e.jsxs(z,{value:"settings",className:"flex items-center gap-1 text-xs",children:[e.jsx(Ve,{className:"h-3 w-3"}),"Settings"]})]}),e.jsxs(O,{value:"seo",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Meta Title (max 60 chars)"}),e.jsx(U,{value:a.meta_title,onChange:s=>v(t=>({...t,meta_title:s.target.value}))}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Appears in browser tab & search results"}),e.jsxs("span",{className:a.meta_title.length>60?"text-destructive":"text-muted-foreground",children:[a.meta_title.length,"/60"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Meta Description (max 155 chars)"}),e.jsx(V,{value:a.meta_description,onChange:s=>v(t=>({...t,meta_description:s.target.value})),rows:3}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Appears in search engine snippets"}),e.jsxs("span",{className:a.meta_description.length>155?"text-destructive":"text-muted-foreground",children:[a.meta_description.length,"/155"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"OG Title (Social Share)"}),e.jsx(U,{value:a.og_title,onChange:s=>v(t=>({...t,og_title:s.target.value})),placeholder:"Defaults to meta title if empty"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"OG Description"}),e.jsx(U,{value:a.og_description,onChange:s=>v(t=>({...t,og_description:s.target.value})),placeholder:"Defaults to meta description if empty"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Canonical URL"}),e.jsx(U,{value:a.canonical_url,onChange:s=>v(t=>({...t,canonical_url:s.target.value})),placeholder:"Leave empty for default (self-referencing)"})]}),e.jsxs("div",{className:"p-4 rounded-xl border bg-card",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Google Search Preview"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-blue-600 text-lg hover:underline cursor-pointer truncate",children:a.meta_title||a.h1||"Page Title"}),e.jsxs("p",{className:"text-green-700 text-sm truncate",children:["appointpanda.ae/",A?.slug]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:a.meta_description||"No meta description set..."})]})]})]}),e.jsxs(O,{value:"hero",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"H1 Heading (Main Title)"}),e.jsx(U,{value:a.h1,onChange:s=>v(t=>({...t,h1:s.target.value})),placeholder:"Main visible heading on the page"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"The primary heading users see on the page"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Page Introduction / Intro Paragraph"}),e.jsx(V,{value:a.page_intro,onChange:s=>v(t=>({...t,page_intro:s.target.value})),placeholder:"Introduction text shown after the hero section. Supports Markdown...",rows:5,className:"font-mono text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Displayed in the PageIntroSection below the hero. Supports Markdown formatting."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Internal Links Intro"}),e.jsx(V,{value:a.internal_links_intro,onChange:s=>v(t=>({...t,internal_links_intro:s.target.value})),placeholder:"Introductory text for the internal links section...",rows:3,className:"font-mono text-sm"})]})]}),e.jsxs(O,{value:"content",className:"space-y-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-primary/10 border border-primary/20",children:e.jsxs("p",{className:"text-xs text-primary flex items-center gap-2",children:[e.jsx(H,{className:"h-3 w-3"}),e.jsx("strong",{children:"How it works:"}),' The raw markdown below is what appears on the live site. Editing "Page Intro" or "H2 Sections" in other tabs will update this field when you save. If you edit this raw content directly, it takes priority.']})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{children:["Raw Content (Markdown) — ",e.jsx("span",{className:"text-muted-foreground font-normal",children:"This is what the live page renders"})]}),e.jsx(V,{value:a.content,onChange:s=>v(t=>({...t,content:s.target.value})),placeholder:"Main page content. Supports Markdown formatting...",rows:18,className:"font-mono text-sm"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"Supports: **bold**, *italic*, ## H2 headings, ### H3, - lists, [links](url)"}),e.jsxs("span",{children:["~",a.content.split(/\s+/).filter(Boolean).length," words"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{children:["H2 Sections (JSON) — ",e.jsx("span",{className:"text-muted-foreground font-normal",children:"Auto-extracted from content above"})]}),e.jsx(V,{value:a.h2_sections,onChange:s=>v(t=>({...t,h2_sections:s.target.value})),placeholder:'[{"title": "Section Title", "content": "Section content..."}]',rows:8,className:"font-mono text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"These sections are automatically parsed from the content. You can edit them here to restructure the page."})]})]}),e.jsxs(O,{value:"faqs",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"FAQ Content (JSON Array)"}),e.jsx(V,{value:a.faqs,onChange:s=>v(t=>({...t,faqs:s.target.value})),placeholder:'[{"question": "What is...?", "answer": "It is..."}]',rows:14,className:"font-mono text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:'JSON array of FAQ objects. Each must have "question" and "answer" string properties.'})]}),(()=>{try{const s=JSON.parse(a.faqs);return Array.isArray(s)&&s.length>0?e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("p",{className:"text-sm font-medium text-muted-foreground",children:["Preview (",s.length," FAQs)"]}),s.slice(0,5).map((t,n)=>e.jsxs("div",{className:"border-l-2 border-primary/30 pl-3",children:[e.jsxs("p",{className:"font-medium text-sm",children:["Q: ",t.question]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:["A: ",t.answer]})]},n)),s.length>5&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["...and ",s.length-5," more"]})]}):null}catch{return e.jsx("div",{className:"p-3 rounded-lg bg-destructive/10 border border-destructive/20",children:e.jsxs("p",{className:"text-sm text-destructive flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),"Invalid JSON format. Please fix before saving."]})})}})()]}),e.jsxs(O,{value:"settings",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted/50 border",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Indexed by Search Engines"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"When enabled, search engines will index this page"})]}),e.jsx(S,{checked:a.is_indexed,onCheckedChange:s=>v(t=>({...t,is_indexed:s}))})]}),e.jsxs("div",{className:"p-4 rounded-xl border bg-muted/30 space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Page Info"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Page Type:"}),e.jsx(F,{variant:"outline",className:"capitalize w-fit",children:A?.page_type}),e.jsx("span",{className:"text-muted-foreground",children:"Slug:"}),e.jsxs("code",{className:"text-xs",children:["/",A?.slug]}),e.jsx("span",{className:"text-muted-foreground",children:"Word Count:"}),e.jsx("span",{children:a.content.split(/\s+/).filter(Boolean).length}),e.jsx("span",{className:"text-muted-foreground",children:"Last Updated:"}),e.jsx("span",{children:A?.updated_at?Z(new Date(A.updated_at),"MMM d, yyyy HH:mm"):"-"})]})]}),e.jsx("div",{className:"p-3 rounded-lg bg-amber-500/10 border border-amber-200",children:e.jsxs("p",{className:"text-xs text-amber-700 flex items-center gap-2",children:[e.jsx(H,{className:"h-3 w-3"}),"Changes are saved directly to the database. Use version history to rollback if needed."]})})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:["~",a.content.split(/\s+/).filter(Boolean).length," words"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{variant:"outline",onClick:()=>ae(null),children:"Cancel"}),e.jsxs(m,{onClick:ps,children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Save All Changes"]})]})]})]})})]})}export{Lt as default};
