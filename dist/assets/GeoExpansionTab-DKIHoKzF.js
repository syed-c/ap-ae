import{u as V,b as C,c as q,j as e}from"./chunk-CPh6voF3.js";import{r as R}from"./chunk-CffrGP6S.js";import{C as d,d as o,a as v,b,c as _}from"./chunk-Dwq_v72W.js";import{s as h,b as x,G as re,B as j,x as G,w as D,C as w,L as p,t as J,T as le,i as m,Q as M,S as ce,b7 as X,a as y,I as E,o as de}from"./index-DflORfjh.js";import{T as oe,a as me,b as F,c as T}from"./chunk-k8HiDHrE.js";import{S as O}from"./chunk-DfjE-bP6.js";import{P as B}from"./chunk-DSDQubI6.js";import{m as xe,n as ue}from"./chunk-DlLtMEml.js";import{R as Z}from"./chunk-BOvFDp2b.js";import{D as W}from"./chunk-CedtSHBb.js";import{H as z}from"./chunk-C077LRJi.js";import{F as ee}from"./chunk-BaL04tya.js";import{S as he}from"./chunk-C2VW2Ml6.js";import{T as ge}from"./chunk-DbdCK11k.js";import{C as Y}from"./chunk-CbEmr7WL.js";import"./chunk-B8auUmee.js";import"./chunk-DK8nT4cj.js";import"./chunk-Drd-rt-S.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";import"./chunk-BSjc5zjM.js";function je(){return V({queryKey:["geo-expansion-stats"],queryFn:async()=>{const{data:t,error:n}=await h.functions.invoke("geo-expansion",{body:{action:"get_stats"}});if(n)throw n;if(!t?.success)throw new Error(t?.error||"Failed to fetch stats");return t.data},refetchInterval:3e4})}function pe(t){return V({queryKey:["geo-expansion-queue",t],queryFn:async()=>{const{data:n,error:i}=await h.functions.invoke("geo-expansion",{body:{action:"get_queue",filters:t}});if(i)throw i;if(!n?.success)throw new Error(n?.error||"Failed to fetch queue");return n.data},refetchInterval:1e4})}function fe(){return V({queryKey:["geo-expansion-settings"],queryFn:async()=>{const{data:t,error:n}=await h.functions.invoke("geo-expansion",{body:{action:"get_settings"}});if(n)throw n;if(!t?.success)throw new Error(t?.error||"Failed to fetch settings");return t.data}})}function Ne(){const t=C();return q({mutationFn:async({entityType:n,entityId:i,queueId:r})=>{const l=n==="state"?"generate_state_content":"generate_city_content",{data:c,error:a}=await h.functions.invoke("geo-expansion",{body:{action:l,entityId:i,queueId:r}});if(a)throw a;if(!c?.success)throw new Error(c?.error||"Failed to generate content");return c},onSuccess:()=>{t.invalidateQueries({queryKey:["geo-expansion-queue"]}),t.invalidateQueries({queryKey:["geo-expansion-stats"]}),x.success("Content generated successfully")},onError:n=>{x.error(`Generation failed: ${n.message}`)}})}function ve(){const t=C();return q({mutationFn:async n=>{const{data:i,error:r}=await h.functions.invoke("geo-expansion",{body:{action:"publish_page",queueId:n}});if(r)throw r;if(!i?.success)throw new Error(i?.error||"Failed to publish page");return i},onSuccess:()=>{t.invalidateQueries({queryKey:["geo-expansion-queue"]}),t.invalidateQueries({queryKey:["geo-expansion-stats"]}),t.invalidateQueries({queryKey:["admin-seo-pages"]}),x.success("Page published successfully")},onError:n=>{x.error(`Publish failed: ${n.message}`)}})}function be(){const t=C();return q({mutationFn:async n=>{const{data:i,error:r}=await h.functions.invoke("geo-expansion",{body:{action:"reject_page",queueId:n}});if(r)throw r;if(!i?.success)throw new Error(i?.error||"Failed to reject page");return i},onSuccess:()=>{t.invalidateQueries({queryKey:["geo-expansion-queue"]}),t.invalidateQueries({queryKey:["geo-expansion-stats"]}),x.success("Page rejected")},onError:n=>{x.error(`Reject failed: ${n.message}`)}})}function ye(){const t=C();return q({mutationFn:async({settingKey:n,settingValue:i})=>{const{data:r,error:l}=await h.functions.invoke("geo-expansion",{body:{action:"update_settings",settingKey:n,settingValue:i}});if(l)throw l;if(!r?.success)throw new Error(r?.error||"Failed to update settings");return r},onSuccess:()=>{t.invalidateQueries({queryKey:["geo-expansion-settings"]}),x.success("Settings updated")},onError:n=>{x.error(`Update failed: ${n.message}`)}})}function we(){const t=C();return q({mutationFn:async n=>{const i=[];for(const r of n)try{const{data:l,error:c}=await h.functions.invoke("geo-expansion",{body:{action:"publish_page",queueId:r}});i.push({id:r,success:l?.success||!1,error:c?.message||l?.error})}catch(l){i.push({id:r,success:!1,error:l.message})}return i},onSuccess:n=>{t.invalidateQueries({queryKey:["geo-expansion-queue"]}),t.invalidateQueries({queryKey:["geo-expansion-stats"]}),t.invalidateQueries({queryKey:["admin-seo-pages"]});const i=n.filter(r=>r.success).length;x.success(`Published ${i} pages`)},onError:n=>{x.error(`Bulk publish failed: ${n.message}`)}})}function He(){const[t,n]=R.useState("overview"),[i,r]=R.useState("all"),[l,c]=R.useState(new Set),{data:a,isLoading:K,refetch:S}=je(),{data:g=[],isLoading:A,refetch:Q}=pe({status:i==="all"?void 0:i,limit:100}),{data:u}=fe(),{data:P,refetch:se}=xe(),U=ve(),$=be(),H=Ne(),I=we(),f=ye(),L=ue(),ae=()=>{S(),Q(),se()},te=s=>{if(s){const N=g.filter(k=>k.status==="generated"&&k.seo_validation_passed).map(k=>k.id);c(new Set(N))}else c(new Set)},ne=s=>{const N=new Set(l);N.has(s)?N.delete(s):N.add(s),c(N)},ie=async()=>{l.size!==0&&(await I.mutateAsync(Array.from(l)),c(new Set))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(re,{className:"h-6 w-6 text-primary"}),"Geographic Expansion"]}),e.jsx("p",{className:"text-muted-foreground",children:"Automatic SEO page generation for states and cities"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(j,{onClick:ae,variant:"outline",size:"sm",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx(d,{className:"border-dashed border-2 border-primary/30 bg-primary/5",children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-primary/10 flex items-center justify-center",children:e.jsx(W,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Database Population"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"Populate all 51 US states and 1,500+ major cities into the master database. This enables dentists to search and list their practice in any US city."}),e.jsxs("div",{className:"flex gap-4 mt-3 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(G,{className:"h-4 w-4 text-primary"}),e.jsx("strong",{children:P?.totalStates||0})," states"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"h-4 w-4 text-teal"}),e.jsx("strong",{children:P?.totalCities||0})," cities"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(w,{className:"h-4 w-4 text-green-600"}),e.jsx("strong",{children:P?.activeStatePages||0})," live state pages"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(w,{className:"h-4 w-4 text-green-600"}),e.jsx("strong",{children:P?.activeCityPages||0})," live city pages"]})]})]})]}),e.jsx(j,{onClick:()=>L.mutate(),disabled:L.isPending,className:"shrink-0",children:L.isPending?e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"h-4 w-4 mr-2 animate-spin"}),"Seeding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Seed All US Locations"]})})]})})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(d,{children:e.jsxs(o,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx(G,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:a?.states.total||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total States"})]})]}),e.jsxs("div",{className:"mt-3 flex gap-2 text-xs",children:[e.jsxs("span",{className:"text-green-600",children:[a?.states.live||0," live"]}),e.jsxs("span",{className:"text-amber-600",children:[a?.states.draft||0," draft"]})]})]})}),e.jsx(d,{children:e.jsxs(o,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-teal/10 flex items-center justify-center",children:e.jsx(D,{className:"h-5 w-5 text-teal"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:a?.cities.total||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Cities"})]})]}),e.jsxs("div",{className:"mt-3 flex gap-2 text-xs",children:[e.jsxs("span",{className:"text-green-600",children:[a?.cities.live||0," live"]}),e.jsxs("span",{className:"text-amber-600",children:[a?.cities.draft||0," draft"]})]})]})}),e.jsx(d,{children:e.jsxs(o,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-amber-100 flex items-center justify-center",children:e.jsx(J,{className:"h-5 w-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:a?.queue.pending||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Queue Pending"})]})]}),e.jsxs("div",{className:"mt-3 flex gap-2 text-xs",children:[e.jsxs("span",{className:"text-blue-600",children:[a?.queue.generated||0," ready"]}),e.jsxs("span",{className:"text-red-600",children:[a?.queue.failed||0," failed"]})]})]})}),e.jsx(d,{children:e.jsxs(o,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-green-100 flex items-center justify-center",children:e.jsx(le,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:a?.queue.published||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Published"})]})]}),e.jsx("div",{className:"mt-3",children:e.jsx(B,{value:a?a.queue.published/Math.max(1,a.queue.published+a.queue.pending+a.queue.generated)*100:0,className:"h-1"})})]})})]}),e.jsxs(oe,{value:t,onValueChange:n,children:[e.jsxs(me,{children:[e.jsx(F,{value:"overview",children:"Overview"}),e.jsxs(F,{value:"queue",children:["Generation Queue",(a?.queue.pending||0)+(a?.queue.generated||0)>0&&e.jsx(m,{variant:"secondary",className:"ml-2",children:(a?.queue.pending||0)+(a?.queue.generated||0)})]}),e.jsx(F,{value:"settings",children:"Settings"}),e.jsx(F,{value:"history",children:"Change History"})]}),e.jsxs(T,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(d,{children:[e.jsxs(v,{children:[e.jsxs(b,{className:"text-lg flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5"}),"States Coverage"]}),e.jsxs(_,{children:[a?.states.live||0," of ",a?.states.total||0," states have live pages"]})]}),e.jsxs(o,{children:[e.jsx(B,{value:a?a.states.live/Math.max(1,a.states.total)*100:0,className:"h-2 mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),"Live Pages"]}),e.jsx("span",{className:"font-medium",children:a?.states.live||0})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),"Draft Pages"]}),e.jsx("span",{className:"font-medium",children:a?.states.draft||0})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-300"}),"No Page Yet"]}),e.jsx("span",{className:"font-medium",children:a?.states.inactive||0})]})]})]})]}),e.jsxs(d,{children:[e.jsxs(v,{children:[e.jsxs(b,{className:"text-lg flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),"Cities Coverage"]}),e.jsxs(_,{children:[a?.cities.live||0," of ",a?.cities.total||0," cities have live pages"]})]}),e.jsxs(o,{children:[e.jsx(B,{value:a?a.cities.live/Math.max(1,a.cities.total)*100:0,className:"h-2 mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),"Live Pages"]}),e.jsx("span",{className:"font-medium",children:a?.cities.live||0})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),"Draft Pages"]}),e.jsx("span",{className:"font-medium",children:a?.cities.draft||0})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-300"}),"No Page Yet"]}),e.jsx("span",{className:"font-medium",children:a?.cities.inactive||0})]})]})]})]})]}),e.jsxs(d,{children:[e.jsx(v,{children:e.jsxs(b,{className:"text-lg flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),"Recent Changes"]})}),e.jsx(o,{children:a?.recentChanges&&a.recentChanges.length>0?e.jsx("div",{className:"space-y-2",children:a.recentChanges.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m,{variant:"outline",className:"text-xs",children:s.page_type}),e.jsx("span",{className:"font-medium text-sm",children:s.field_name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.change_trigger})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.created_at&&M(new Date(s.created_at),"MMM d, h:mm a")})]},s.id))}):e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No recent changes"})})]})]}),e.jsxs(T,{value:"queue",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex gap-2",children:["all","pending","generated","published","failed"].map(s=>e.jsxs(j,{variant:i===s?"default":"outline",size:"sm",onClick:()=>r(s),children:[s.charAt(0).toUpperCase()+s.slice(1),s==="generated"&&(a?.queue.generated||0)>0&&e.jsx(m,{variant:"secondary",className:"ml-1",children:a?.queue.generated})]},s))}),e.jsx("div",{className:"flex gap-2",children:l.size>0&&e.jsxs(j,{onClick:ie,disabled:I.isPending,className:"bg-green-600 hover:bg-green-700",children:[I.isPending?e.jsx(p,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(w,{className:"h-4 w-4 mr-2"}),"Publish ",l.size," Selected"]})})]}),e.jsx(d,{children:e.jsx(o,{className:"p-0",children:A?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(p,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):g.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(ee,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No items in queue"})]}):e.jsx(ce,{className:"h-[500px]",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left w-10",children:e.jsx(X,{checked:l.size>0&&g.filter(s=>s.status==="generated").every(s=>l.has(s.id)),onCheckedChange:te})}),e.jsx("th",{className:"p-3 text-left text-sm font-medium",children:"Page"}),e.jsx("th",{className:"p-3 text-left text-sm font-medium",children:"Type"}),e.jsx("th",{className:"p-3 text-left text-sm font-medium",children:"Status"}),e.jsx("th",{className:"p-3 text-left text-sm font-medium",children:"Confidence"}),e.jsx("th",{className:"p-3 text-left text-sm font-medium",children:"Created"}),e.jsx("th",{className:"p-3 text-right text-sm font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:g.map(s=>e.jsx(_e,{item:s,isSelected:l.has(s.id),onToggleSelect:()=>ne(s.id),onPublish:()=>U.mutate(s.id),onReject:()=>$.mutate(s.id),onRegenerate:()=>H.mutate({entityType:s.page_type,entityId:s.entity_id,queueId:s.id}),isPublishing:U.isPending,isRejecting:$.isPending,isRegenerating:H.isPending},s.id))})]})})})})]}),e.jsxs(T,{value:"settings",className:"space-y-4",children:[e.jsxs(d,{children:[e.jsxs(v,{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5"}),"Expansion Settings"]}),e.jsx(_,{children:"Control how geographic pages are generated and published"})]}),e.jsxs(o,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(y,{className:"font-medium",children:"Auto-Publish Enabled"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically publish pages with high confidence scores"})]}),e.jsx(O,{checked:u?.auto_publish_enabled??!1,onCheckedChange:s=>f.mutate({settingKey:"auto_publish_enabled",settingValue:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(y,{className:"font-medium",children:"Require Admin Approval"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"All pages must be manually approved before publishing"})]}),e.jsx(O,{checked:u?.require_admin_approval??!0,onCheckedChange:s=>f.mutate({settingKey:"require_admin_approval",settingValue:s})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(y,{className:"font-medium",children:"Auto-Publish Threshold"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Minimum AI confidence score for auto-publish"}),e.jsx(E,{type:"number",min:"0",max:"1",step:"0.05",value:u?.auto_publish_threshold??.85,onChange:s=>f.mutate({settingKey:"auto_publish_threshold",settingValue:parseFloat(s.target.value)}),className:"w-32"})]}),e.jsxs("div",{children:[e.jsx(y,{className:"font-medium",children:"Max Daily Generations"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Maximum pages to generate per day"}),e.jsx(E,{type:"number",min:"1",max:"1000",value:u?.max_daily_generations??100,onChange:s=>f.mutate({settingKey:"max_daily_generations",settingValue:parseInt(s.target.value)}),className:"w-32"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(y,{className:"font-medium",children:"Content Min Words"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Minimum word count for generated content"}),e.jsx(E,{type:"number",min:"100",max:"2000",value:u?.content_min_words??400,onChange:s=>f.mutate({settingKey:"content_min_words",settingValue:parseInt(s.target.value)}),className:"w-32"})]}),e.jsxs("div",{children:[e.jsx(y,{className:"font-medium",children:"Content Max Words"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Maximum word count for generated content"}),e.jsx(E,{type:"number",min:"200",max:"5000",value:u?.content_max_words??800,onChange:s=>f.mutate({settingKey:"content_max_words",settingValue:parseInt(s.target.value)}),className:"w-32"})]})]})]})]}),e.jsxs(d,{children:[e.jsxs(v,{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5"}),"SEO Safety Rules"]}),e.jsx(_,{children:"Built-in protections to ensure quality content"})]}),e.jsx(o,{children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-green-50 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(w,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"font-medium text-green-800",children:"Active Protections"})]}),e.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[e.jsx("li",{children:"• Duplicate content detection (Jaccard similarity)"}),e.jsx("li",{children:'• Spam pattern blocking ("near me", "#1", etc.)'}),e.jsx("li",{children:"• Meta length validation"}),e.jsx("li",{children:"• Keyword density limits"}),e.jsx("li",{children:"• E-E-A-T compliance checks"})]})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-amber-50 border border-amber-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ge,{className:"h-4 w-4 text-amber-600"}),e.jsx("span",{className:"font-medium text-amber-800",children:"Blocked Patterns"})]}),e.jsxs("ul",{className:"text-sm text-amber-700 space-y-1",children:[e.jsx("li",{children:'• "near me" / "nearby"'}),e.jsx("li",{children:'• "best ... in"'}),e.jsx("li",{children:'• "top ... dentist"'}),e.jsx("li",{children:'• "#1 dentist"'}),e.jsx("li",{children:"• Fake statistics"})]})]})]})})]})]}),e.jsx(T,{value:"history",className:"space-y-4",children:e.jsxs(d,{children:[e.jsxs(v,{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),"Content Version History"]}),e.jsx(_,{children:"Track all changes and rollback if needed"})]}),e.jsx(o,{children:a?.recentChanges&&a.recentChanges.length>0?e.jsx("div",{className:"space-y-3",children:a.recentChanges.map(s=>e.jsx("div",{className:"p-4 rounded-lg border bg-card hover:bg-muted/30 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(m,{variant:"outline",children:s.page_type}),e.jsx("span",{className:"font-medium",children:s.field_name})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Trigger: ",s.change_trigger]}),s.ai_confidence_score&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["AI Confidence: ",(s.ai_confidence_score*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm",children:s.created_at&&M(new Date(s.created_at),"MMM d, yyyy")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.created_at&&M(new Date(s.created_at),"h:mm a")})]})]})},s.id))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(z,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No version history yet"})]})})]})})]})]})}function _e({item:t,isSelected:n,onToggleSelect:i,onPublish:r,onReject:l,onRegenerate:c,isPublishing:a,isRejecting:K,isRegenerating:S}){const g=t.status==="generated"&&t.seo_validation_passed,A=t.status==="failed"||t.status==="generated",Q=u=>{switch(u){case"pending":return e.jsxs(m,{variant:"secondary",children:[e.jsx(J,{className:"h-3 w-3 mr-1"}),"Pending"]});case"processing":return e.jsxs(m,{className:"bg-blue-500",children:[e.jsx(p,{className:"h-3 w-3 mr-1 animate-spin"}),"Processing"]});case"generated":return e.jsxs(m,{className:"bg-amber-500",children:[e.jsx(ee,{className:"h-3 w-3 mr-1"}),"Generated"]});case"published":return e.jsxs(m,{className:"bg-green-500",children:[e.jsx(w,{className:"h-3 w-3 mr-1"}),"Published"]});case"failed":return e.jsxs(m,{variant:"destructive",children:[e.jsx(Y,{className:"h-3 w-3 mr-1"}),"Failed"]});default:return e.jsx(m,{variant:"outline",children:u})}};return e.jsxs("tr",{className:"border-b hover:bg-muted/30 transition-colors",children:[e.jsx("td",{className:"p-3",children:e.jsx(X,{checked:n,onCheckedChange:i,disabled:!g})}),e.jsxs("td",{className:"p-3",children:[e.jsx("div",{className:"font-medium",children:t.entity_slug}),t.error_message&&e.jsx("p",{className:"text-xs text-destructive mt-1 truncate max-w-[200px]",children:t.error_message})]}),e.jsx("td",{className:"p-3",children:e.jsx(m,{variant:"outline",className:"capitalize",children:t.page_type})}),e.jsx("td",{className:"p-3",children:Q(t.status)}),e.jsx("td",{className:"p-3",children:t.ai_confidence_score!=null?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${t.ai_confidence_score>=.8?"bg-green-500":t.ai_confidence_score>=.6?"bg-amber-500":"bg-red-500"}`}),e.jsxs("span",{className:"text-sm",children:[(t.ai_confidence_score*100).toFixed(0),"%"]})]}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx("td",{className:"p-3 text-sm text-muted-foreground",children:t.created_at&&M(new Date(t.created_at),"MMM d, h:mm a")}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[g&&e.jsx(j,{size:"sm",variant:"ghost",className:"text-green-600 hover:text-green-700 hover:bg-green-50",onClick:r,disabled:a,children:a?e.jsx(p,{className:"h-4 w-4 animate-spin"}):e.jsx(w,{className:"h-4 w-4"})}),A&&e.jsx(j,{size:"sm",variant:"ghost",onClick:c,disabled:S,children:S?e.jsx(p,{className:"h-4 w-4 animate-spin"}):e.jsx(Z,{className:"h-4 w-4"})}),t.status!=="published"&&e.jsx(j,{size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:l,disabled:K,children:K?e.jsx(p,{className:"h-4 w-4 animate-spin"}):e.jsx(Y,{className:"h-4 w-4"})})]})})]})}export{He as default};
