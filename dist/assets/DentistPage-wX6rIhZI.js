import{j as e,b as z,u as k}from"./chunk-CPh6voF3.js";import{r as x}from"./chunk-CffrGP6S.js";import{b as J,L as _}from"./chunk-Drd-rt-S.js";import{f as K,l as Q,o as V,i as b,ak as M,u as G,ah as H,s as S,B as N,ai as W,aq as Y,n as P,t as U,m as X,aK as Z,aj as ee,aL as se}from"./index-DflORfjh.js";import{u as ie,T as te,A as ae,I as ne,a as le}from"./chunk-BnpBy_la.js";import{P as $}from"./chunk-D3ia1n3Z.js";import{B as re}from"./chunk-C-nCkXKs.js";import{S as C}from"./chunk-DXeotKgJ.js";import{S as y}from"./chunk-CQtADEjB.js";import{u as ce}from"./chunk-D4pwncBY.js";import{G as de}from"./chunk-DrzOALbo.js";import{A as q}from"./chunk-bmpXwoJk.js";import{S as oe}from"./chunk-D2ZJfdpI.js";import"./chunk-B8auUmee.js";import"./chunk-DK8nT4cj.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";import"./chunk-8Vpa5_RZ.js";import"./chunk-aAsotRsv.js";import"./chunk-C_nua8Pg.js";import"./chunk-DncHrJ4I.js";import"./chunk-BcyAVLmp.js";import"./chunk-B2Rulxe9.js";import"./chunk-CFYlT1Dp.js";import"./chunk-HiDpIwK7.js";import"./chunk-I1o_Hd8I.js";import"./chunk-CTiJdJKN.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=K("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);function me({qualifications:n,specializations:a,yearsExperience:c,languages:d,className:l}){return n&&n.length>0||a&&a.length>0||c?e.jsxs("div",{className:Q("card-modern p-5 space-y-4",l),children:[e.jsxs("h3",{className:"font-display text-base font-bold flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4 text-primary"}),"Credentials & Qualifications"]}),c&&c>0&&e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-primary/5 border border-primary/10",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-primary/10 flex items-center justify-center shrink-0",children:e.jsx(V,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-sm",children:[c,"+ Years of Practice"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Licensed dental professional"})]})]}),n&&n.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Qualifications"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((o,r)=>e.jsxs(b,{variant:"outline",className:"rounded-lg px-3 py-1.5 font-medium text-xs bg-background",children:[e.jsx(q,{className:"h-3 w-3 mr-1.5 text-primary"}),o]},r))})]}),a&&a.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Specializations"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.map((o,r)=>e.jsx(b,{className:"rounded-lg px-3 py-1.5 font-medium text-xs bg-teal/10 text-teal border-teal/20",children:o},r))})]}),d&&d.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Languages"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:d.map((o,r)=>e.jsx(b,{variant:"secondary",className:"rounded-full px-3 py-1 text-xs",children:o},r))})]})]}):null}const Je=()=>{const{dentistSlug:n}=J(),a=n||"",[c,d]=x.useState(!1),[l,v]=x.useState(!1),[o,r]=x.useState(0),[F,A]=x.useState(!1),{toast:p}=M();G(),z();const{trackProfileView:D}=ie(),{data:L}=H(`dentist/${a}`),{data:s,isLoading:B,error:xe}=k({queryKey:["dentist",a],queryFn:async()=>{if(!a||a.includes("/"))return null;const{data:i,error:t}=await S.from("dentists").select("*, clinic:clinics(id, name, slug, address, phone, latitude, longitude, city:cities(name, slug, state:states(name, abbreviation, slug)))").eq("slug",a).maybeSingle();if(t)throw t;return i},enabled:!!a&&!a.includes("/")}),{data:g}=k({queryKey:["dentist-clinic-treatments",s?.clinic_id],queryFn:async()=>{if(!s?.clinic_id)return[];const{data:i}=await S.from("clinic_treatments").select("*, treatment:treatments(*)").eq("clinic_id",s.clinic_id);return i||[]},enabled:!!s?.clinic_id}),{data:w}=k({queryKey:["dentist-reviews",s?.clinic_id],queryFn:async()=>{if(!s?.clinic_id)return[];const{data:i}=await S.from("review_funnel_events").select("*").eq("clinic_id",s.clinic_id).eq("event_type","rating_submitted").order("created_at",{ascending:!1}).limit(10);return(i||[]).map(t=>({id:t.id,patient_name:t.visitor_id||"Anonymous",rating:t.rating||5,content:t.comment||"",created_at:t.created_at}))},enabled:!!s?.clinic_id}),O=async()=>{const i=window.location.href,t=`${s?.name||"Dentist"} - AppointPanda`;if(navigator.share)try{await navigator.share({title:t,url:i}),p({title:"Shared successfully!"})}catch(h){h.name!=="AbortError"&&I(i)}else I(i)},I=async i=>{try{await navigator.clipboard.writeText(i),A(!0),p({title:"Link copied to clipboard!"}),setTimeout(()=>A(!1),2e3)}catch{p({title:"Failed to copy link",variant:"destructive"})}},E=()=>{v(!l),r(t=>l?t-1:t+1);const i=JSON.parse(localStorage.getItem("likedDentists")||"[]");if(l){const t=i.filter(h=>h!==s?.id);localStorage.setItem("likedDentists",JSON.stringify(t)),p({title:"Removed from favorites"})}else i.push(s?.id),localStorage.setItem("likedDentists",JSON.stringify(i)),p({title:"Added to favorites!",description:"Find your favorites in your profile"})};if(x.useEffect(()=>{if(s?.id){const i=JSON.parse(localStorage.getItem("likedDentists")||"[]");v(i.includes(s.id))}},[s?.id]),x.useEffect(()=>{s?.id&&s?.name&&D({profile_type:"dentist",profile_id:s.id,profile_name:s.name,city:s.clinic?.city?.name,state:s.clinic?.city?.state?.abbreviation})},[s?.id,s?.name,s?.clinic?.city?.name,s?.clinic?.city?.state?.abbreviation,D]),ce(!B&&!!s),B)return e.jsx($,{children:e.jsxs("div",{className:"container py-8",children:[e.jsx(y,{className:"h-64 rounded-3xl mb-8"}),e.jsx("div",{className:"grid lg:grid-cols-3 gap-8",children:e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx(y,{className:"h-12 w-3/4"}),e.jsx(y,{className:"h-6 w-1/2"}),e.jsx(y,{className:"h-32 w-full"})]})})]})});if(!s)return e.jsx($,{children:e.jsx(C,{children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h1",{className:"font-display text-3xl font-bold mb-4",children:"Dentist Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"The dentist profile you're looking for doesn't exist."}),e.jsx(N,{asChild:!0,className:"rounded-xl font-bold",children:e.jsx(_,{to:"/search",children:"Find Dentists"})})]})})});const u=s.clinic?.city?.name||"Unknown";s.clinic?.city?.state?.abbreviation;const m=s.clinic?.city?.state?.slug||"",f=s.clinic?.city?.slug||"",j=s.clinic?.city?.state?.name?`${u}, ${s.clinic?.city?.state?.name}`:u,R=[{label:"Dentists",href:"/search"},...m?[{label:s.clinic?.city?.state?.name||"",href:`/${m}`}]:[],...f&&m?[{label:u,href:`/${m}/${f}`}]:[],{label:s.name}];return e.jsxs($,{children:[e.jsx(W,{title:L?.meta_title||`${s.name}${s.title?`, ${s.title}`:""} - Dentist in ${j}`,description:L?.meta_description||s.bio||`Book an appointment with ${s.name}. ${s.years_experience?`${s.years_experience}+ years of experience.`:""} Verified dental professional in ${j}.`,canonical:`/dentist/${s.slug}/`,keywords:[s.name,`dentist ${u}`,s.title||"dental specialist"],ogType:"profile"}),e.jsx(Y,{type:"person",name:s.name,jobTitle:s.title||"Dental Professional",description:s.bio||`${s.name} is a verified dental professional in ${j}.`,image:s.image_url||void 0,url:`/dentist/${s.slug}/`,worksFor:s.clinic?{name:s.clinic.name,url:`/clinic/${s.clinic.slug}/`}:void 0}),e.jsx("section",{className:"gradient-hero py-12 md:py-16",children:e.jsxs("div",{className:"container",children:[e.jsx(re,{items:R,className:"mb-8"}),e.jsx("div",{className:"card-modern p-6 md:p-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-32 h-32 md:w-40 md:h-40 rounded-2xl overflow-hidden border-4 border-background shadow-elevated",children:s.image_url?e.jsx("img",{src:s.image_url,alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/20 to-purple/20 flex items-center justify-center",children:e.jsx("span",{className:"text-4xl font-display font-bold text-primary/50",children:s.name.split(" ").map(i=>i[0]).join("")})})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex flex-wrap items-start gap-3 mb-2",children:s.is_active&&e.jsxs(b,{className:"bg-gold/10 text-gold border border-gold/20 rounded-full px-3 py-1 font-bold",children:[e.jsx(q,{className:"h-4 w-4 mr-1"}),"Active"]})}),e.jsx("h1",{className:"font-display text-3xl md:text-4xl font-bold mb-1",children:s.name}),s.title&&e.jsx("p",{className:"text-lg text-muted-foreground font-medium mb-4",children:s.title}),e.jsx("div",{className:"flex items-center gap-4 mb-4",children:(Number(s.rating)||0)>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-gold",children:[e.jsx(P,{className:"h-5 w-5 fill-current"}),e.jsx("span",{className:"font-bold text-lg",children:Number(s.rating).toFixed(1)})]}),e.jsxs("span",{className:"text-muted-foreground",children:["(",s.review_count||0," reviews)"]})]})}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.years_experience&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(U,{className:"h-4 w-4 text-primary"}),e.jsxs("span",{className:"font-medium",children:[s.years_experience,"+ Years Experience"]})]}),s.clinic&&e.jsxs(_,{to:`/clinic/${s.clinic.slug}`,className:"flex items-center gap-2 text-sm hover:text-primary transition-colors",children:[e.jsx(T,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"font-medium",children:s.clinic.name})]})]}),e.jsx(te,{isVerified:s.is_active,isClaimed:!0,reviewCount:s.review_count||0,rating:Number(s.rating)||0,yearsExperience:s.years_experience||void 0,className:"mt-3"})]}),e.jsxs("div",{className:"flex md:flex-col gap-3",children:[e.jsxs(N,{size:"lg",className:"rounded-xl font-bold flex-1 md:flex-none",onClick:()=>d(!0),children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Book Appointment"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{variant:"outline",size:"icon",className:"rounded-xl",onClick:O,children:F?e.jsx(Z,{className:"h-4 w-4 text-teal"}):e.jsx(oe,{className:"h-4 w-4"})}),e.jsx(N,{variant:"outline",size:"icon",className:`rounded-xl ${l?"bg-coral/10 border-coral/30":""}`,onClick:E,children:e.jsx(ee,{className:`h-4 w-4 ${l?"fill-coral text-coral":""}`})})]})]})]})})]})}),e.jsx(C,{size:"md",children:e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"card-modern p-6",children:[e.jsx("h2",{className:"font-display text-xl font-bold mb-4",children:"About"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:s.bio||`${s.name} is a dedicated dental professional committed to providing exceptional patient care. With expertise in various dental procedures and a patient-centered approach, they ensure comfortable and effective treatments.`})]}),e.jsx(me,{qualifications:s.qualifications,specializations:s.specializations,yearsExperience:s.years_experience,languages:s.languages}),g&&g.length>0&&e.jsx("div",{className:"card-modern p-6",children:e.jsx(ae,{treatments:g.map(i=>({name:i.treatment?.name||"",slug:i.treatment?.slug||"",priceAed:i.price_aed||null}))})}),e.jsxs("div",{className:"card-modern p-6",children:[e.jsx("h2",{className:"font-display text-xl font-bold mb-4",children:"Patient Reviews"}),w&&w.length>0?e.jsx("div",{className:"space-y-4",children:w.map(i=>e.jsxs("div",{className:"p-4 rounded-xl bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"font-bold text-primary",children:i.patient_name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:i.patient_name}),e.jsx("div",{className:"flex items-center gap-1 text-gold text-sm",children:[...Array(i.rating||5)].map((t,h)=>e.jsx(P,{className:"h-3 w-3 fill-current"},h))})]})]}),i.content&&e.jsx("p",{className:"text-muted-foreground",children:i.content})]},i.id))}):e.jsx("p",{className:"text-muted-foreground",children:"No reviews yet."})]})]}),e.jsxs("div",{className:"space-y-6",children:[s.clinic&&e.jsxs("div",{className:"card-modern p-6",children:[e.jsxs("h3",{className:"font-display font-bold mb-4 flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5 text-primary"}),"Works At"]}),e.jsxs(_,{to:`/clinic/${s.clinic.slug}`,className:"block p-4 rounded-xl bg-muted/50 hover:bg-muted transition-colors",children:[e.jsx("p",{className:"font-bold text-lg",children:s.clinic.name}),s.clinic.city&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:j})]})]}),e.jsx("div",{className:"lg:sticky lg:top-24",children:e.jsx(ne,{profileId:s.id,profileName:s.name,profileType:"dentist",clinicId:s.clinic_id||void 0,clinicLatitude:s.clinic?.latitude?Number(s.clinic.latitude):void 0,clinicLongitude:s.clinic?.longitude?Number(s.clinic.longitude):void 0,clinicAddress:s.clinic?.address||void 0})})]})]})}),e.jsx(C,{size:"md",children:e.jsx(le,{variant:"dentist",currentLocationName:u,currentLocationSlug:f,citySlug:m?`${m}/${f}`:f,relatedServices:(g||[]).map(i=>({name:i.treatment?.name||"",slug:i.treatment?.slug||""})).filter(i=>i.name)})}),e.jsx(se,{open:c,onOpenChange:d,profileId:s.id,profileName:s.name,profileType:"dentist",clinicId:s.clinic_id||void 0,clinicLatitude:s.clinic?.latitude?Number(s.clinic.latitude):void 0,clinicLongitude:s.clinic?.longitude?Number(s.clinic.longitude):void 0,clinicAddress:s.clinic?.address||void 0})]})};export{Je as default};
