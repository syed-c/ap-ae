import{b as De,u as F,c as M,j as e}from"./chunk-CPh6voF3.js";import{r as c}from"./chunk-CffrGP6S.js";import{f as Te,B as m,a9 as I,bc as ie,aa as O,ab as U,ac as V,ad as z,a as r,p as ve,I as u,S as Le,C as N,w as R,ae as G,ap as Be,i as v,T as Q,y as Y,al as $e,a2 as Fe,a3 as Me,a5 as Ie,a6 as Oe,a7 as H,m as Ue,n as Ve,A as ze,o as Ge,G as He,U as Qe,P as Ye,s as x,b as y}from"./index-DflORfjh.js";import{C as P,d as k,a as le,b as ne,c as re}from"./chunk-Dwq_v72W.js";import{S as ce}from"./chunk-DfjE-bP6.js";import{T as oe,a as de,b as w,c as p,d as me,e as o}from"./chunk-NLs5Ye4A.js";import{T as We,a as Xe,b as ue,c as xe}from"./chunk-k8HiDHrE.js";import{S as he}from"./chunk-CQtADEjB.js";import{A as Je,a as Ke}from"./chunk-BY_S87Nl.js";import{c as ge}from"./chunk-BSjc5zjM.js";import{C as _}from"./chunk-DI0yTdYZ.js";import{S as Ze}from"./chunk-C7BdFRQZ.js";import{P as pe}from"./chunk-HAC-i_a2.js";import{T as es}from"./chunk-DbdCK11k.js";import{S as be}from"./chunk-B51FxpoB.js";import{C as fe}from"./chunk-CbEmr7WL.js";import{B as ss}from"./chunk-CFYlT1Dp.js";import{L as as}from"./chunk-CG1o0-Xj.js";import{C as ts}from"./chunk-wy0nNZZG.js";import{B as is,S as ls}from"./chunk-C2VW2Ml6.js";import"./chunk-B8auUmee.js";import"./chunk-DK8nT4cj.js";import"./chunk-Drd-rt-S.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=Te("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),ns=[{id:"basic",name:"Basic",slug:"basic",price_usd:99,billing_period:"year",description:"Essential features for getting started",color:"slate",expected_patients:2,features:{claim_profile:{enabled:!0,limit:null,name:"Claim & Customize Profile"},profile_listing:{enabled:!0,limit:1,name:"Profile Listing"},appointment_booking:{enabled:!0,limit:null,name:"Appointment Booking"},booking_url:{enabled:!0,limit:null,name:"Shareable Booking URL"},basic_analytics:{enabled:!0,limit:null,name:"Basic Analytics"},review_collection:{enabled:!0,limit:10,name:"Review Collection"},email_support:{enabled:!0,limit:null,name:"Email Support"},verification_badge:{enabled:!1,limit:null,name:"Verification Badge"},priority_listing:{enabled:!1,limit:null,name:"Priority Search Ranking"},sms_reminders:{enabled:!1,limit:null,name:"SMS Reminders"},reputation_management:{enabled:!1,limit:null,name:"Reputation Management"},gmb_sync:{enabled:!1,limit:null,name:"Google My Business Sync"},custom_branding:{enabled:!1,limit:null,name:"Custom Branding"},api_access:{enabled:!1,limit:null,name:"API Access"},dedicated_manager:{enabled:!1,limit:null,name:"Dedicated Account Manager"},phone_support:{enabled:!1,limit:null,name:"Phone Support"}}},{id:"professional",name:"Professional",slug:"professional",price_usd:499,billing_period:"year",description:"Advanced tools for growing practices",color:"primary",popular:!0,expected_patients:6,features:{claim_profile:{enabled:!0,limit:null,name:"Claim & Customize Profile"},profile_listing:{enabled:!0,limit:3,name:"Profile Listing"},appointment_booking:{enabled:!0,limit:null,name:"Appointment Booking"},booking_url:{enabled:!0,limit:null,name:"Shareable Booking URL"},basic_analytics:{enabled:!0,limit:null,name:"Advanced Analytics"},review_collection:{enabled:!0,limit:100,name:"Review Collection"},email_support:{enabled:!0,limit:null,name:"Priority Email Support"},verification_badge:{enabled:!0,limit:null,name:"Verification Badge"},priority_listing:{enabled:!0,limit:null,name:"Priority Search Ranking"},sms_reminders:{enabled:!0,limit:200,name:"SMS Reminders"},reputation_management:{enabled:!0,limit:null,name:"Reputation Management"},gmb_sync:{enabled:!0,limit:null,name:"Google My Business Sync"},custom_branding:{enabled:!1,limit:null,name:"Custom Branding"},api_access:{enabled:!1,limit:null,name:"API Access"},dedicated_manager:{enabled:!1,limit:null,name:"Dedicated Account Manager"},phone_support:{enabled:!1,limit:null,name:"Phone Support"}}},{id:"enterprise",name:"Enterprise",slug:"enterprise",price_usd:999,billing_period:"year",description:"Full suite for multi-location practices",color:"gold",expected_patients:11,features:{claim_profile:{enabled:!0,limit:null,name:"Claim & Customize Profile"},profile_listing:{enabled:!0,limit:null,name:"Unlimited Profile Listings"},appointment_booking:{enabled:!0,limit:null,name:"Unlimited Appointment Booking"},booking_url:{enabled:!0,limit:null,name:"Shareable Booking URL"},basic_analytics:{enabled:!0,limit:null,name:"Enterprise Analytics"},review_collection:{enabled:!0,limit:null,name:"Unlimited Review Collection"},email_support:{enabled:!0,limit:null,name:"Priority Email Support"},verification_badge:{enabled:!0,limit:null,name:"Premium Verification Badge"},priority_listing:{enabled:!0,limit:null,name:"Top Priority Search Ranking"},sms_reminders:{enabled:!0,limit:null,name:"Unlimited SMS Reminders"},reputation_management:{enabled:!0,limit:null,name:"Full Reputation Suite"},gmb_sync:{enabled:!0,limit:null,name:"Google My Business Sync"},custom_branding:{enabled:!0,limit:null,name:"Custom Branding"},api_access:{enabled:!0,limit:null,name:"Full API Access"},dedicated_manager:{enabled:!0,limit:null,name:"Dedicated Account Manager"},phone_support:{enabled:!0,limit:null,name:"24/7 Phone Support"}}}],Ne={claim_profile:ss,profile_listing:R,appointment_booking:Ue,booking_url:as,basic_analytics:ts,review_collection:Ve,email_support:ze,verification_badge:Ge,priority_listing:ve,sms_reminders:is,reputation_management:Q,gmb_sync:He,custom_branding:Y,api_access:ls,dedicated_manager:Qe,phone_support:Ye};function Ds(){const W=De(),[ye,we]=c.useState("plans"),[_e,E]=c.useState(!1),[Ce,A]=c.useState(!1),[Se,D]=c.useState(!1),[b,X]=c.useState(""),[T,J]=c.useState(""),[d,h]=c.useState(null),[g,L]=c.useState(ns),[Pe,B]=c.useState(!1),[n,f]=c.useState({clinicName:"",contactEmail:"",contactPhone:"",expectedAppointments:"",reviewRequestsNeeded:"",additionalRequirements:""}),{data:q,isLoading:ke}=F({queryKey:["admin-plans-config"],queryFn:async()=>{const{data:s,error:a}=await x.from("global_settings").select("*").eq("key","pricing_plans").maybeSingle();if(a)throw a;return s?.value&&Array.isArray(s.value)?s.value:null}}),{data:K=[]}=F({queryKey:["clinic-subscriptions-admin"],queryFn:async()=>{const{data:s,error:a}=await x.from("clinic_subscriptions").select(`
          *,
          clinic:clinics(id, name, slug, verification_status),
          plan:subscription_plans(id, name, slug)
        `).order("created_at",{ascending:!1});if(a)throw a;return s}}),[C,Z]=c.useState(""),{data:S=[],isLoading:Ae}=F({queryKey:["all-clinics-for-plans-unlimited"],queryFn:async()=>{const s=[];let a=0;const t=1e3;let i=!0;for(;i;){const{data:l,error:j}=await x.from("clinics").select("id, name, slug, city:cities(name, state:states(name))").order("name").range(a,a+t-1);if(j)throw j;l&&l.length>0?(s.push(...l),a+=t,i=l.length===t):i=!1}return s}}),$=c.useMemo(()=>{if(!C.trim())return S;const s=C.toLowerCase();return S.filter(a=>a.name?.toLowerCase().includes(s)||a.slug?.toLowerCase().includes(s)||a.city?.name?.toLowerCase().includes(s)||a.city?.state?.name?.toLowerCase().includes(s))},[S,C]);c.useEffect(()=>{q&&Array.isArray(q)&&L(q)},[q]);const ee=M({mutationFn:async s=>{const{data:a}=await x.from("global_settings").select("id").eq("key","pricing_plans").maybeSingle();if(a){const{error:t}=await x.from("global_settings").update({value:s,updated_at:new Date().toISOString()}).eq("key","pricing_plans");if(t)throw t}else{const{error:t}=await x.from("global_settings").insert({key:"pricing_plans",value:s,description:"Platform subscription pricing plans configuration"});if(t)throw t}await ge({action:"UPDATE_PRICING_PLANS",entityType:"global_settings",entityId:"pricing_plans",newValues:{plans:s.map(t=>({name:t.name,price:t.price_usd}))}})},onSuccess:()=>{W.invalidateQueries({queryKey:["admin-plans-config"]}),y.success("Plans saved successfully"),B(!1)},onError:s=>y.error("Failed to save: "+s.message)}),se=M({mutationFn:async({clinicId:s,planId:a})=>{const{data:t}=await x.from("clinic_subscriptions").select("id").eq("clinic_id",s).maybeSingle();if(t){const{error:i}=await x.from("clinic_subscriptions").update({plan_id:a,status:"active",updated_at:new Date().toISOString()}).eq("clinic_id",s);if(i)throw i}else{const{error:i}=await x.from("clinic_subscriptions").insert({clinic_id:s,plan_id:a,status:"active"});if(i)throw i}await ge({action:"ASSIGN_PLAN",entityType:"clinic_subscription",entityId:s,newValues:{planId:a}})},onSuccess:()=>{W.invalidateQueries({queryKey:["clinic-subscriptions-admin"]}),y.success("Plan assigned successfully"),E(!1),X(""),J("")},onError:s=>y.error("Failed: "+s.message)}),ae=M({mutationFn:async()=>{const{error:s}=await x.from("leads").insert({patient_name:n.clinicName,patient_email:n.contactEmail,patient_phone:n.contactPhone,message:`Custom Plan Request:
- Expected Appointments/Year: ${n.expectedAppointments}
- Review Requests Needed: ${n.reviewRequestsNeeded}
- Additional Requirements: ${n.additionalRequirements}`,source:"custom_plan_request",status:"new"});if(s)throw s},onSuccess:()=>{y.success("Custom plan request submitted! Our team will contact you."),D(!1),f({clinicName:"",contactEmail:"",contactPhone:"",expectedAppointments:"",reviewRequestsNeeded:"",additionalRequirements:""})},onError:s=>y.error("Failed to submit: "+s.message)}),te=(s,a,t)=>{L(i=>i.map(l=>l.id===s?{...l,features:{...l.features,[a]:{...l.features[a],...t}}}:l)),B(!0)},qe=(s,a)=>{L(t=>t.map(i=>i.id===s?{...i,...a}:i)),B(!0)},Re=s=>{h({...s}),A(!0)},Ee=()=>{d&&(qe(d.id,d),A(!1),h(null))};return ke?e.jsxs("div",{className:"space-y-4",children:[e.jsx(he,{className:"h-32"}),e.jsx(he,{className:"h-64"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-violet-600 rounded-2xl p-6 text-white shadow-xl",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-14 w-14 rounded-xl bg-white/20 backdrop-blur flex items-center justify-center",children:e.jsx(_,{className:"h-7 w-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Plans & Features"}),e.jsx("p",{className:"text-white/80",children:"Manage subscription plans and control feature access"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[Pe&&e.jsxs(m,{onClick:()=>ee.mutate(g),disabled:ee.isPending,className:"gap-2 bg-emerald-500 hover:bg-emerald-600 text-white shadow-lg",children:[e.jsx(Ze,{className:"h-4 w-4"}),"Save All Changes"]}),e.jsxs(I,{open:_e,onOpenChange:s=>{E(s),s||Z("")},children:[e.jsx(ie,{asChild:!0,children:e.jsxs(m,{className:"gap-2 bg-white text-indigo-700 hover:bg-white/90 shadow-lg font-semibold",children:[e.jsx(pe,{className:"h-4 w-4"}),"Assign Plan to Clinic"]})}),e.jsxs(O,{className:"bg-white max-w-xl",children:[e.jsxs(U,{children:[e.jsxs(V,{className:"flex items-center gap-3 text-xl",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center",children:e.jsx(_,{className:"h-5 w-5 text-white"})}),"Assign Plan to Clinic"]}),e.jsxs(z,{className:"text-muted-foreground",children:["Search from ",S.length.toLocaleString()," clinics and assign a subscription plan"]})]}),e.jsxs("div",{className:"space-y-5 py-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(r,{className:"text-sm font-bold text-foreground",children:"Select Clinic"}),e.jsxs("div",{className:"relative",children:[e.jsx(ve,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(u,{placeholder:"Search by name, city, or state...",value:C,onChange:s=>Z(s.target.value),className:"pl-10 h-11 border-2 focus:border-indigo-500"})]}),e.jsx(Le,{className:"h-44 border-2 rounded-xl bg-slate-50",children:e.jsxs("div",{className:"p-2 space-y-1",children:[Ae?e.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"Loading clinics..."}):$.length===0?e.jsx("div",{className:"text-center py-6 text-muted-foreground",children:C?"No clinics found":"No clinics available"}):$.slice(0,100).map(s=>e.jsx("button",{type:"button",onClick:()=>X(s.id),className:`w-full text-left px-4 py-3 rounded-lg transition-all ${b===s.id?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-md":"hover:bg-white hover:shadow-sm"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.name}),s.city&&e.jsxs("p",{className:`text-xs ${b===s.id?"text-white/80":"text-muted-foreground"}`,children:[s.city.name,s.city.state?.name&&`, ${s.city.state.name}`]})]}),b===s.id&&e.jsx(N,{className:"h-5 w-5"})]})},s.id)),$.length>100&&e.jsx("p",{className:"text-center text-xs text-muted-foreground py-2 bg-white rounded-lg",children:"Showing first 100 results. Refine search to see more."})]})}),b&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-indigo-200 rounded-xl p-3 flex items-center gap-3",children:[e.jsx(R,{className:"h-5 w-5 text-indigo-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-indigo-600 font-medium",children:"Selected Clinic"}),e.jsx("p",{className:"font-bold text-indigo-800",children:S.find(s=>s.id===b)?.name})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(r,{className:"text-sm font-bold text-foreground",children:"Select Plan"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(s=>{const a=T===s.id;return e.jsxs("button",{type:"button",onClick:()=>J(s.id),className:`relative p-4 rounded-xl border-2 transition-all text-left ${a?"border-indigo-500 bg-indigo-50 shadow-lg ring-2 ring-indigo-200":"border-slate-200 hover:border-slate-300 bg-white"}`,children:[a&&e.jsx("div",{className:"absolute -top-2 -right-2 h-6 w-6 bg-indigo-600 rounded-full flex items-center justify-center",children:e.jsx(N,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_,{className:`h-5 w-5 ${s.color==="gold"?"text-amber-500":s.color==="primary"?"text-indigo-500":"text-slate-500"}`}),e.jsx("span",{className:"font-bold text-foreground",children:s.name})]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsxs("span",{className:"text-2xl font-black text-foreground",children:["$",s.price_usd]}),e.jsxs("span",{className:"text-muted-foreground text-sm",children:["/",s.billing_period]})]})]},s.id)})})]})]}),e.jsxs(G,{className:"gap-2",children:[e.jsx(m,{variant:"outline",onClick:()=>E(!1),children:"Cancel"}),e.jsxs(m,{onClick:()=>se.mutate({clinicId:b,planId:T}),disabled:!b||!T||se.isPending,className:"gap-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",children:[e.jsx(N,{className:"h-4 w-4"}),"Assign Plan"]})]})]})]})]})]})}),e.jsx(P,{className:"border-0 shadow-lg bg-gradient-to-r from-emerald-500 to-teal-600 text-white overflow-hidden",children:e.jsx(k,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"h-14 w-14 rounded-xl bg-white/20 backdrop-blur flex items-center justify-center shrink-0",children:e.jsx(Be,{className:"h-7 w-7 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Unbeatable Value vs Competitors"}),e.jsxs("p",{className:"text-emerald-100 mb-4",children:["While other platforms charge ",e.jsx("span",{className:"text-red-300 font-bold",children:"$120-$190 per new patient booking"}),", our platform offers new patient acquisition at just ",e.jsx("span",{className:"text-white font-bold",children:"$99 per booking equivalent"})," — saving practices thousands annually."]}),e.jsxs("div",{className:"flex gap-6 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white/10 rounded-lg px-4 py-2",children:[e.jsx(v,{className:"bg-red-500/80 text-white border-0",children:"Competitors"}),e.jsx("span",{className:"font-bold",children:"$120-190/booking"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/20 rounded-lg px-4 py-2",children:[e.jsx(v,{className:"bg-white text-emerald-700 border-0 font-bold",children:"Our Platform"}),e.jsx("span",{className:"font-bold",children:"~$99/booking"})]})]})]})]})})}),e.jsxs(Je,{className:"border-2 border-amber-300 bg-amber-50",children:[e.jsx(es,{className:"h-5 w-5 text-amber-600"}),e.jsxs(Ke,{className:"text-amber-800 ml-2",children:[e.jsx("strong",{className:"text-amber-900",children:"Expected Patient Numbers Disclaimer:"})," Patient acquisition estimates are based on average platform performance and are ",e.jsx("strong",{children:"not guaranteed"}),". Actual results depend on profile completeness, reviews, competitive landscape, and responsiveness to leads. We recommend optimizing your profile for best results."]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 lg:grid-cols-4 gap-6",children:[g.map(s=>e.jsxs(P,{className:`relative card-modern overflow-hidden ${s.popular?"ring-2 ring-primary/50 shadow-lg":""}`,children:[e.jsx("div",{className:`h-1.5 w-full ${s.color==="primary"?"bg-gradient-to-r from-primary to-teal":s.color==="gold"?"bg-gradient-to-r from-gold to-amber-400":"bg-gradient-to-r from-muted-foreground to-muted"}`}),e.jsxs(k,{className:"p-6",children:[s.popular&&e.jsx("div",{className:"absolute -top-0 left-1/2 -translate-x-1/2",children:e.jsx(v,{className:"bg-primary text-primary-foreground shadow-lg shadow-primary/25 rounded-t-none",children:"Most Popular"})}),e.jsx(m,{variant:"ghost",size:"sm",className:"absolute top-4 right-2 text-muted-foreground hover:text-foreground",onClick:()=>Re(s),children:e.jsx(be,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center gap-3 mb-4 mt-2",children:[e.jsx("div",{className:`h-12 w-12 rounded-xl flex items-center justify-center ${s.color==="primary"?"bg-primary/10":s.color==="gold"?"bg-gold/10":"bg-muted"}`,children:e.jsx(_,{className:`h-6 w-6 ${s.color==="primary"?"text-primary":s.color==="gold"?"text-gold":"text-muted-foreground"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-foreground",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})]}),e.jsxs("div",{className:"text-center py-4 border-y border-border my-4",children:[e.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"$"}),e.jsx("span",{className:"text-4xl font-black text-foreground",children:s.price_usd}),e.jsxs("span",{className:"text-muted-foreground",children:["/",s.billing_period]})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-center gap-1 text-sm",children:[e.jsx(Q,{className:"h-4 w-4 text-teal"}),e.jsx("span",{className:"text-muted-foreground",children:"Expected:"}),e.jsxs("span",{className:"text-teal font-semibold",children:[s.expected_patients," new patients/year"]})]})]}),e.jsx("div",{className:"space-y-2 max-h-72 overflow-y-auto pr-2",children:Object.entries(s.features).map(([a,t])=>{const i=Ne[a]||N;return e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border/50 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[t.enabled?e.jsx(N,{className:"h-4 w-4 text-teal shrink-0"}):e.jsx(fe,{className:"h-4 w-4 text-muted-foreground/50 shrink-0"}),e.jsx(i,{className:`h-4 w-4 shrink-0 ${t.enabled?"text-foreground":"text-muted-foreground/50"}`}),e.jsx("span",{className:`text-sm truncate ${t.enabled?"text-foreground":"text-muted-foreground/50"}`,children:t.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.enabled&&t.limit!==null&&e.jsx(u,{type:"number",value:t.limit,onChange:l=>te(s.id,a,{limit:parseInt(l.target.value)||0}),className:"w-16 h-6 text-xs text-center"}),t.enabled&&t.limit===null&&e.jsx("span",{className:"text-xs text-teal bg-teal/10 px-2 py-0.5 rounded",children:"∞"}),e.jsx(ce,{checked:t.enabled,onCheckedChange:l=>te(s.id,a,{enabled:l}),className:"data-[state=checked]:bg-teal"})]})]},a)})})]})]},s.id)),e.jsx(P,{className:"border-dashed border-2 border-border card-modern",children:e.jsxs(k,{className:"p-6 flex flex-col items-center justify-center h-full min-h-[400px] text-center",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-gradient-to-br from-primary/10 to-gold/10 flex items-center justify-center mb-4",children:e.jsx(Y,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"text-xl font-bold text-foreground mb-2",children:"Custom Plan"}),e.jsx("p",{className:"text-muted-foreground text-sm mb-6",children:"Need specific features or volume? Build a plan tailored to your practice's unique needs."}),e.jsxs(I,{open:Se,onOpenChange:D,children:[e.jsx(ie,{asChild:!0,children:e.jsxs(m,{variant:"outline",className:"border-primary text-primary hover:bg-primary/10",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Request Custom Plan"]})}),e.jsxs(O,{className:"bg-white max-w-md",children:[e.jsxs(U,{children:[e.jsx(V,{children:"Request Custom Plan"}),e.jsx(z,{children:"Tell us about your practice needs and our team will create a tailored solution"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Practice/Clinic Name"}),e.jsx(u,{value:n.clinicName,onChange:s=>f(a=>({...a,clinicName:s.target.value})),placeholder:"e.g., Smile Dental Center"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Contact Email"}),e.jsx(u,{type:"email",value:n.contactEmail,onChange:s=>f(a=>({...a,contactEmail:s.target.value})),placeholder:"email@example.com"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Phone Number"}),e.jsx(u,{type:"tel",value:n.contactPhone,onChange:s=>f(a=>({...a,contactPhone:s.target.value})),placeholder:"+971 50 123 4567"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Expected Appointments/Year"}),e.jsx(u,{type:"number",value:n.expectedAppointments,onChange:s=>f(a=>({...a,expectedAppointments:s.target.value})),placeholder:"e.g., 500"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Review Requests Needed"}),e.jsx(u,{type:"number",value:n.reviewRequestsNeeded,onChange:s=>f(a=>({...a,reviewRequestsNeeded:s.target.value})),placeholder:"e.g., 200"})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Additional Requirements"}),e.jsx($e,{value:n.additionalRequirements,onChange:s=>f(a=>({...a,additionalRequirements:s.target.value})),placeholder:"Describe any specific features, integrations, or needs...",rows:3})]})]}),e.jsxs(G,{children:[e.jsx(m,{variant:"outline",onClick:()=>D(!1),children:"Cancel"}),e.jsx(m,{onClick:()=>ae.mutate(),disabled:!n.clinicName||!n.contactEmail||ae.isPending,children:"Submit Request"})]})]})]})]})})]}),e.jsx(I,{open:Ce,onOpenChange:A,children:e.jsxs(O,{className:"bg-white max-w-lg",children:[e.jsxs(U,{children:[e.jsxs(V,{children:["Edit ",d?.name," Plan"]}),e.jsx(z,{children:"Customize plan details and pricing"})]}),d&&e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Plan Name"}),e.jsx(u,{value:d.name,onChange:s=>h(a=>a?{...a,name:s.target.value}:null)})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Price (USD)"}),e.jsx(u,{type:"number",value:d.price_usd,onChange:s=>h(a=>a?{...a,price_usd:parseInt(s.target.value)||0}:null)})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Description"}),e.jsx(u,{value:d.description,onChange:s=>h(a=>a?{...a,description:s.target.value}:null)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Expected Patients/Year"}),e.jsx(u,{type:"number",value:d.expected_patients,onChange:s=>h(a=>a?{...a,expected_patients:parseInt(s.target.value)||0}:null)})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Color Theme"}),e.jsxs(Fe,{value:d.color,onValueChange:s=>h(a=>a?{...a,color:s}:null),children:[e.jsx(Me,{className:"bg-white",children:e.jsx(Ie,{})}),e.jsxs(Oe,{className:"bg-white",children:[e.jsx(H,{value:"slate",children:"Slate (Default)"}),e.jsx(H,{value:"primary",children:"Primary (Blue)"}),e.jsx(H,{value:"gold",children:"Gold (Premium)"})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{checked:d.popular||!1,onCheckedChange:s=>h(a=>a?{...a,popular:s}:null)}),e.jsx(r,{children:'Mark as "Most Popular"'})]})]}),e.jsxs(G,{children:[e.jsx(m,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),e.jsx(m,{onClick:Ee,children:"Save Changes"})]})]})}),e.jsxs(We,{value:ye,onValueChange:we,children:[e.jsxs(Xe,{className:"grid w-full grid-cols-2 h-14 rounded-xl bg-slate-100 p-1",children:[e.jsxs(ue,{value:"assignments",className:"rounded-lg h-12 font-semibold text-slate-600 data-[state=active]:bg-white data-[state=active]:text-indigo-700 data-[state=active]:shadow-md",children:[e.jsx(R,{className:"h-5 w-5 mr-2"}),"Clinic Assignments"]}),e.jsxs(ue,{value:"features",className:"rounded-lg h-12 font-semibold text-slate-600 data-[state=active]:bg-white data-[state=active]:text-indigo-700 data-[state=active]:shadow-md",children:[e.jsx(je,{className:"h-5 w-5 mr-2"}),"Feature Comparison"]})]}),e.jsx(xe,{value:"assignments",className:"mt-4",children:e.jsxs(P,{className:"overflow-hidden border shadow-sm",children:[e.jsxs(le,{className:"bg-muted/30 border-b",children:[e.jsx(ne,{className:"text-xl text-foreground",children:"Clinic Plan Assignments"}),e.jsx(re,{className:"text-muted-foreground",children:"View and manage which clinics have which plans"})]}),e.jsx(k,{className:"p-0",children:e.jsxs(oe,{children:[e.jsx(de,{children:e.jsxs(w,{className:"bg-slate-50",children:[e.jsx(p,{className:"font-bold text-foreground",children:"Clinic"}),e.jsx(p,{className:"font-bold text-foreground",children:"Plan"}),e.jsx(p,{className:"font-bold text-foreground",children:"Status"}),e.jsx(p,{className:"font-bold text-foreground",children:"Expires"}),e.jsx(p,{className:"text-right font-bold text-foreground",children:"Actions"})]})}),e.jsxs(me,{children:[K.map(s=>e.jsxs(w,{className:"hover:bg-muted/30",children:[e.jsx(o,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-9 w-9 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx(R,{className:"h-4 w-4 text-primary"})}),e.jsx("span",{className:"font-medium text-foreground",children:s.clinic?.name})]})}),e.jsx(o,{children:e.jsxs(v,{variant:"outline",className:"gap-1 font-medium",children:[e.jsx(_,{className:"h-3 w-3 text-amber-500"}),s.plan?.name]})}),e.jsx(o,{children:e.jsx(v,{className:`capitalize ${s.status==="active"?"bg-emerald-100 text-emerald-700 border-emerald-200":"bg-slate-100 text-slate-600"}`,children:s.status})}),e.jsx(o,{className:"text-muted-foreground",children:s.expires_at?new Date(s.expires_at).toLocaleDateString():"Never"}),e.jsx(o,{className:"text-right",children:e.jsx(m,{variant:"ghost",size:"sm",className:"text-primary hover:text-primary hover:bg-primary/10",children:e.jsx(be,{className:"h-4 w-4"})})})]},s.id)),K.length===0&&e.jsx(w,{children:e.jsxs(o,{colSpan:5,className:"text-center py-12 text-muted-foreground",children:[e.jsx(je,{className:"h-12 w-12 mx-auto mb-3 text-muted-foreground/50"}),e.jsx("p",{className:"font-medium",children:"No plan assignments yet"}),e.jsx("p",{className:"text-sm",children:"Assign plans to clinics to get started"})]})})]})]})})]})}),e.jsx(xe,{value:"features",className:"mt-4",children:e.jsxs(P,{className:"overflow-hidden border shadow-sm",children:[e.jsxs(le,{className:"bg-muted/30 border-b",children:[e.jsx(ne,{className:"text-xl text-foreground",children:"Feature Comparison"}),e.jsx(re,{className:"text-muted-foreground",children:"Compare features across all subscription tiers"})]}),e.jsx(k,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(oe,{children:[e.jsx(de,{children:e.jsxs(w,{className:"bg-slate-50 border-b-2",children:[e.jsx(p,{className:"w-72 font-bold text-foreground py-4",children:"Feature"}),g.map(s=>e.jsx(p,{className:"text-center py-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx(_,{className:`h-5 w-5 ${s.color==="gold"?"text-amber-500":s.color==="primary"?"text-primary":"text-slate-500"}`}),e.jsx("span",{className:"font-bold text-foreground text-base",children:s.name}),e.jsxs("span",{className:"text-sm text-muted-foreground font-medium",children:["$",s.price_usd,"/year"]})]})},s.id)),e.jsx(p,{className:"text-center py-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx(Y,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"font-bold text-foreground text-base",children:"Custom"}),e.jsx("span",{className:"text-sm text-muted-foreground font-medium",children:"Contact us"})]})})]})}),e.jsxs(me,{children:[e.jsxs(w,{className:"bg-emerald-50/50 border-b-2 border-emerald-100",children:[e.jsx(o,{className:"font-semibold py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-emerald-100 flex items-center justify-center",children:e.jsx(Q,{className:"h-4 w-4 text-emerald-600"})}),e.jsx("span",{className:"text-foreground",children:"Expected New Patients/Year"})]})}),g.map(s=>e.jsx(o,{className:"text-center py-4",children:e.jsx("span",{className:"font-bold text-lg text-emerald-600",children:s.expected_patients})},s.id)),e.jsx(o,{className:"text-center py-4",children:e.jsx("span",{className:"font-semibold text-primary",children:"Unlimited"})})]}),Object.keys(g[0]?.features||{}).map((s,a)=>{const t=Ne[s]||N,i=g[0]?.features[s]?.name||s;return e.jsxs(w,{className:a%2===0?"bg-white":"bg-muted/20",children:[e.jsx(o,{className:"py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-7 w-7 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx(t,{className:"h-3.5 w-3.5 text-primary"})}),e.jsx("span",{className:"font-medium text-foreground",children:i})]})}),g.map(l=>{const j=l.features[s];return e.jsx(o,{className:"text-center py-3",children:j?.enabled?e.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[e.jsx(N,{className:"h-5 w-5 text-emerald-500"}),j.limit!==null&&e.jsx("span",{className:"text-sm font-medium text-foreground",children:j.limit}),j.limit===null&&e.jsx("span",{className:"text-sm font-semibold text-emerald-600",children:"∞"})]}):e.jsx(fe,{className:"h-5 w-5 text-slate-300 mx-auto"})},l.id)}),e.jsx(o,{className:"text-center py-3",children:e.jsx(v,{variant:"outline",className:"text-xs border-primary/30 text-primary font-medium",children:"Configurable"})})]},s)})]})]})})})]})})]})]})}export{Ds as default};
