import{c as F,u as U,j as e}from"./chunk-CPh6voF3.js";import{r as m}from"./chunk-CffrGP6S.js";import{f as W,p as H,a2 as M,a3 as D,a5 as q,a6 as $,a7 as b,bw as O,B as o,Z,S as R,i as x,y as K,T as X,s as y,b as z}from"./index-DflORfjh.js";import{C as i,a as h,b as u,c as _,d as n}from"./chunk-Dwq_v72W.js";import{P as Y}from"./chunk-DSDQubI6.js";import{T as J,a as ee,b as w,c as C}from"./chunk-k8HiDHrE.js";import{C as se}from"./chunk-wy0nNZZG.js";import{C as g}from"./chunk-BFhD_ct7.js";import{E as I}from"./chunk-CcezodbN.js";import{R as N}from"./chunk-BOvFDp2b.js";import{F as te}from"./chunk-BaL04tya.js";import{C as j}from"./chunk-f2aNMA4v.js";import{F as ae}from"./chunk-CwDzaQ9n.js";import{C as le}from"./chunk-CbEmr7WL.js";import{T as ie}from"./chunk-DbdCK11k.js";import"./chunk-B8auUmee.js";import"./chunk-DK8nT4cj.js";import"./chunk-Drd-rt-S.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=W("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]),ne=[{value:"all",label:"All Page Types"},{value:"state",label:"State Pages"},{value:"city",label:"City Pages"},{value:"service",label:"Service Pages"},{value:"service_location",label:"Service Location Pages"},{value:"clinic",label:"Clinic Pages"},{value:"dentist",label:"Dentist Pages"}],A={excellent:"bg-emerald-500",good:"bg-green-500",thin:"bg-amber-500",missing:"bg-red-500"};function Se(){const[T,V]=m.useState("all"),[S,B]=m.useState(""),[p,P]=m.useState(""),[a,Q]=m.useState(null),[E,k]=m.useState("audit"),c=F({mutationFn:async()=>{const{data:s,error:t}=await y.functions.invoke("content-audit-bot",{body:{action:"run_audit",page_type:T,state_filter:S,limit:1e3}});if(t)throw t;return s},onSuccess:s=>{z.success(`Audit complete! Analyzed ${s.summary.total_audited} pages.`)},onError:s=>{z.error(`Audit failed: ${s instanceof Error?s.message:"Unknown error"}`)}}),r=U({queryKey:["content-duplication-report"],queryFn:async()=>{const{data:s,error:t}=await y.functions.invoke("content-audit-bot",{body:{action:"get_duplication_report"}});if(t)throw t;return s},enabled:E==="duplicates"}),f=F({mutationFn:async s=>{const{data:t,error:d}=await y.functions.invoke("content-audit-bot",{body:{action:"analyze_page",page_id:s}});if(d)throw d;return t}}),v=m.useMemo(()=>{if(!c.data?.results)return[];let s=c.data.results;return p&&(s=s.filter(t=>t.content_status===p)),s},[c.data?.results,p]),l=c.data?.summary;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(H,{className:"h-6 w-6 text-primary"}),"Content Audit Bot"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"AI-powered content analysis with duplication detection and E-E-A-T compliance checking"})]})}),e.jsxs(J,{value:E,onValueChange:k,children:[e.jsxs(ee,{className:"grid w-full grid-cols-3",children:[e.jsxs(w,{value:"audit",className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"Content Audit"]}),e.jsxs(w,{value:"duplicates",className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4"}),"Duplication Report"]}),e.jsxs(w,{value:"details",className:"flex items-center gap-2",disabled:!a,children:[e.jsx(I,{className:"h-4 w-4"}),"Page Details"]})]}),e.jsxs(C,{value:"audit",className:"space-y-6",children:[e.jsxs(i,{children:[e.jsxs(h,{children:[e.jsx(u,{className:"text-lg",children:"Audit Controls"}),e.jsx(_,{children:"Configure filters and run the content audit"})]}),e.jsx(n,{children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Page Type"}),e.jsxs(M,{value:T,onValueChange:V,children:[e.jsx(D,{className:"w-[200px]",children:e.jsx(q,{})}),e.jsx($,{children:ne.map(s=>e.jsx(b,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"State"}),e.jsxs(M,{value:S,onValueChange:B,children:[e.jsx(D,{className:"w-[200px]",children:e.jsx(q,{placeholder:"All States"})}),e.jsxs($,{children:[e.jsx(b,{value:"",children:"All Active States"}),O.map(s=>e.jsxs(b,{value:s.slug,children:[s.name," (",s.abbr,")"]},s.slug))]})]})]}),e.jsx(o,{onClick:()=>c.mutate(),disabled:c.isPending,className:"gap-2",children:c.isPending?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"h-4 w-4 animate-spin"}),"Auditing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"h-4 w-4"}),"Run Audit"]})})]})})]}),l&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[e.jsx(i,{children:e.jsx(n,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(te,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:l.total_audited}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pages Audited"})]})]})})}),e.jsx(i,{children:e.jsx(n,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/10",children:e.jsx(j,{className:"h-5 w-5 text-emerald-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:l.excellent_content+l.good_content}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Good+ Content"})]})]})})}),e.jsx(i,{children:e.jsx(n,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-amber-500/10",children:e.jsx(ae,{className:"h-5 w-5 text-amber-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:l.thin_content}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Thin Content"})]})]})})}),e.jsx(i,{children:e.jsx(n,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-500/10",children:e.jsx(le,{className:"h-5 w-5 text-red-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:l.missing_content}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Missing Content"})]})]})})}),e.jsx(i,{children:e.jsx(n,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-500/10",children:e.jsx(g,{className:"h-5 w-5 text-purple-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:l.duplicate_issues}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Duplicates"})]})]})})})]}),l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(i,{children:[e.jsx(h,{className:"pb-2",children:e.jsx(u,{className:"text-sm",children:"Average Quality Score"})}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Y,{value:l.avg_quality_score,className:"flex-1"}),e.jsxs("span",{className:"text-lg font-bold",children:[l.avg_quality_score,"%"]})]})})]}),e.jsxs(i,{children:[e.jsx(h,{className:"pb-2",children:e.jsx(u,{className:"text-sm",children:"Content Status Distribution"})}),e.jsxs(n,{children:[e.jsx("div",{className:"flex gap-2",children:["excellent","good","thin","missing"].map(s=>{const t=l[`${s}_content`],d=l.total_audited>0?Math.round(t/l.total_audited*100):0;return e.jsx("div",{className:`h-8 ${A[s]} rounded`,style:{width:`${Math.max(d,2)}%`},title:`${s}: ${t} (${d}%)`},s)})}),e.jsxs("div",{className:"flex justify-between mt-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Excellent: ",l.excellent_content]}),e.jsxs("span",{children:["Good: ",l.good_content]}),e.jsxs("span",{children:["Thin: ",l.thin_content]}),e.jsxs("span",{children:["Missing: ",l.missing_content]})]})]})]})]}),c.data?.results&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{variant:p===""?"default":"outline",size:"sm",onClick:()=>P(""),children:["All (",c.data.results.length,")"]}),["missing","thin","good","excellent"].map(s=>{const t=c.data.results.filter(d=>d.content_status===s).length;return e.jsxs(o,{variant:p===s?"default":"outline",size:"sm",onClick:()=>P(s),children:[s.charAt(0).toUpperCase()+s.slice(1)," (",t,")"]},s)})]}),v.length>0&&e.jsxs(i,{children:[e.jsxs(h,{children:[e.jsx(u,{className:"text-lg",children:"Audit Results"}),e.jsxs(_,{children:["Showing ",v.length," pages sorted by priority"]})]}),e.jsx(n,{children:e.jsx(R,{className:"h-[500px]",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"sticky top-0 bg-background border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-2",children:"Page"}),e.jsx("th",{className:"text-left p-2",children:"Type"}),e.jsx("th",{className:"text-center p-2",children:"Words"}),e.jsx("th",{className:"text-center p-2",children:"Status"}),e.jsx("th",{className:"text-center p-2",children:"Quality"}),e.jsx("th",{className:"text-center p-2",children:"Duplicates"}),e.jsx("th",{className:"text-center p-2",children:"E-E-A-T"}),e.jsx("th",{className:"text-center p-2",children:"Actions"})]})}),e.jsx("tbody",{children:v.map(s=>e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-2",children:e.jsxs("code",{className:"text-xs bg-muted px-1 py-0.5 rounded",children:["/",s.slug]})}),e.jsx("td",{className:"p-2",children:e.jsx(x,{variant:"outline",children:s.page_type})}),e.jsx("td",{className:"p-2 text-center font-mono",children:s.word_count}),e.jsx("td",{className:"p-2 text-center",children:e.jsx(x,{className:A[s.content_status],children:s.content_status})}),e.jsx("td",{className:"p-2 text-center",children:e.jsxs("span",{className:s.quality_score>=70?"text-green-500":s.quality_score>=40?"text-amber-500":"text-red-500",children:[s.quality_score,"%"]})}),e.jsx("td",{className:"p-2 text-center",children:s.duplication_score>.7?e.jsxs(x,{variant:"destructive",children:[Math.round(s.duplication_score*100),"%"]}):s.duplication_score>.5?e.jsxs(x,{variant:"secondary",children:[Math.round(s.duplication_score*100),"%"]}):e.jsx(j,{className:"h-4 w-4 text-green-500 mx-auto"})}),e.jsx("td",{className:"p-2 text-center",children:s.eeat_compliance?e.jsx(j,{className:"h-4 w-4 text-green-500 mx-auto"}):e.jsx(G,{className:"h-4 w-4 text-red-500 mx-auto"})}),e.jsx("td",{className:"p-2 text-center",children:e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>{Q(s),k("details")},children:e.jsx(I,{className:"h-4 w-4"})})})]},s.id))})]})})})]})]}),e.jsx(C,{value:"duplicates",className:"space-y-6",children:e.jsxs(i,{children:[e.jsx(h,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5"}),"Duplication Analysis"]}),e.jsx(_,{children:"Identifies pages with >70% content similarity"})]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>r.refetch(),disabled:r.isFetching,children:[e.jsx(N,{className:`h-4 w-4 mr-2 ${r.isFetching?"animate-spin":""}`}),"Refresh"]})]})}),e.jsx(n,{children:r.isLoading?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(N,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):r.data?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(i,{children:e.jsxs(n,{className:"pt-6 text-center",children:[e.jsx("p",{className:"text-3xl font-bold",children:r.data.summary.total_pages}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Pages"})]})}),e.jsx(i,{children:e.jsxs(n,{className:"pt-6 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-amber-500",children:r.data.summary.duplicate_groups}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Duplicate Groups"})]})}),e.jsx(i,{children:e.jsxs(n,{className:"pt-6 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-red-500",children:r.data.summary.total_duplicate_pages}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Affected Pages"})]})})]}),r.data.groups.length>0?e.jsx(R,{className:"h-[400px]",children:e.jsx("div",{className:"space-y-4",children:r.data.groups.map((s,t)=>e.jsx(i,{className:"border-amber-500/30",children:e.jsxs(n,{className:"pt-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"outline",className:"mb-2",children:s.page_type}),e.jsxs("p",{className:"font-medium",children:["/",s.primary_slug]})]}),e.jsxs(x,{variant:"destructive",children:[s.duplicates.length," duplicates"]})]}),e.jsx("div",{className:"mt-3 space-y-1",children:s.duplicates.map((d,L)=>e.jsxs("div",{className:"flex items-center justify-between text-sm bg-muted/50 rounded px-2 py-1",children:[e.jsxs("code",{className:"text-xs",children:["/",d.slug]}),e.jsxs(x,{variant:"secondary",children:[Math.round(d.similarity*100),"% similar"]})]},L))})]})},t))})}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(j,{className:"h-12 w-12 mx-auto mb-4 text-green-500"}),e.jsx("p",{className:"text-lg font-medium",children:"No Duplicate Content Found"}),e.jsx("p",{className:"text-sm",children:"All pages have unique content above the 70% threshold."})]})]}):null})]})}),e.jsx(C,{value:"details",className:"space-y-6",children:a&&e.jsxs(i,{children:[e.jsx(h,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(u,{children:"Page Analysis"}),e.jsxs("code",{className:"text-sm text-muted-foreground",children:["/",a.slug]})]}),e.jsxs(o,{variant:"outline",onClick:()=>{f.mutate(a.id)},disabled:f.isPending,children:[f.isPending?e.jsx(N,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(K,{className:"h-4 w-4 mr-2"}),"Deep AI Analysis"]})]})}),e.jsxs(n,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold",children:a.word_count}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Words"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx(x,{className:A[a.content_status],children:a.content_status}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Status"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[a.quality_score,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Quality Score"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsxs("p",{className:`text-2xl font-bold ${a.duplication_score>.7?"text-red-500":"text-green-500"}`,children:[Math.round(a.duplication_score*100),"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Duplication"})]})]}),a.issues.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4 text-amber-500"}),"Issues Found (",a.issues.length,")"]}),e.jsx("ul",{className:"space-y-1",children:a.issues.map((s,t)=>e.jsx("li",{className:"text-sm bg-red-500/10 text-red-700 dark:text-red-400 px-3 py-2 rounded",children:s},t))})]}),a.recommendations.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4 text-primary"}),"Recommendations"]}),e.jsx("ul",{className:"space-y-1",children:a.recommendations.map((s,t)=>e.jsx("li",{className:"text-sm bg-primary/10 text-primary-foreground dark:text-primary px-3 py-2 rounded",children:s},t))})]}),a.similar_pages.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4 text-purple-500"}),"Similar Pages"]}),e.jsx("div",{className:"space-y-1",children:a.similar_pages.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between text-sm bg-muted px-3 py-2 rounded",children:[e.jsxs("code",{children:["/",s.slug]}),e.jsxs(x,{variant:s.similarity>.8?"destructive":"secondary",children:[Math.round(s.similarity*100),"% similar"]})]},t))})]}),e.jsx("div",{className:"flex items-center gap-4 p-4 rounded-lg border",children:a.eeat_compliance?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-600",children:"E-E-A-T Compliant"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This page meets Google's Experience, Expertise, Authoritativeness, and Trustworthiness guidelines."})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"h-8 w-8 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-600",children:"E-E-A-T Issues Detected"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This page needs improvement to meet Google's content quality standards."})]})]})})]})]})})]})]})}export{Se as default};
