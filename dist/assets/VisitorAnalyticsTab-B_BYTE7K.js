import{u as Ue,j as e}from"./chunk-CPh6voF3.js";import{r as f}from"./chunk-CffrGP6S.js";import{f as be,s as V,Q as N,B as ne,a4 as Oe,a2 as I,a3 as q,m as He,a5 as z,a6 as $,a7 as c,G as le,x as pe,U as je,E as ue,t as Ge,i as w,aI as Qe,Y as Xe,C as Ye}from"./index-DflORfjh.js";import{C as n,d as l,a as h,b as p,c as ce}from"./chunk-Dwq_v72W.js";import{T as Ze,a as We,b as A,c as P}from"./chunk-k8HiDHrE.js";import{T as oe,a as de,b as v,c as m,d as xe,e as o}from"./chunk-NLs5Ye4A.js";import{S as es}from"./chunk-CQtADEjB.js";import{P as E}from"./chunk-DSDQubI6.js";import{R as ss}from"./chunk-BOvFDp2b.js";import{D as as}from"./chunk-z-mlRDN4.js";import{L as ts}from"./chunk-Bpcq5jED.js";import{E as rs}from"./chunk-CcezodbN.js";import{T as is}from"./chunk-C76wK-Kz.js";import{A as ns}from"./chunk-C2VW2Ml6.js";import{C as ls}from"./chunk-wy0nNZZG.js";import{R as me,A as cs,e as ge,X as ve,Y as ye,T as he,L as os,a as fe,B as ds,d as xs,P as ms,b as hs,C as ps}from"./chunk-DK8nT4cj.js";import{C as js}from"./chunk-CbEmr7WL.js";import{s as Ne}from"./chunk-aAsotRsv.js";import"./chunk-B8auUmee.js";import"./chunk-Drd-rt-S.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=be("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=be("MousePointerClick",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]);function vs(J={}){const{dateFrom:K,dateTo:U,clinicId:b,pageType:C,country:k,city:y}=J,j=K||new Date(Date.now()-30*24*60*60*1e3).toISOString(),u=U||new Date().toISOString();return Ue({queryKey:["analytics-dashboard",j,u,b,C,k,y],queryFn:async()=>{let g=V.from("visitor_sessions").select("*").gte("created_at",j).lte("created_at",u).eq("is_bot",!1);k&&(g=g.eq("country",k)),y&&(g=g.eq("city",y));const{data:B,error:S}=await g;if(S)throw S;let r=V.from("page_views").select("*").gte("created_at",j).lte("created_at",u);b&&(r=r.eq("clinic_id",b)),C&&(r=r.eq("page_type",C));const{data:O,error:F}=await r;if(F)throw F;const{data:H,error:R}=await V.from("visitor_events").select("*").gte("created_at",j).lte("created_at",u);if(R)throw R;const{data:t,error:i}=await V.from("visitor_journeys").select("*").gte("created_at",j).lte("created_at",u);if(i)throw i;const{data:_,error:T}=await V.from("appointments").select("id, source, booking_page_path, booking_session_id, patient_name, created_at").gte("created_at",j).lte("created_at",u);if(T)throw T;const d=B||[],L=O||[],Ce=H||[],ke=t||[],Se=_||[],G=d.length,_e=new Set(d.map(s=>s.ip_hash)).size,Te=L.length,Me=Ce.length,M=new Map;L.forEach(s=>{const a=M.get(s.session_id)||0;M.set(s.session_id,a+1)});const De=Array.from(M.values()).filter(s=>s===1).length,Ve=M.size>0?De/M.size*100:0,Q=d.map(s=>s.session_duration_seconds||0).filter(s=>s>0),Ae=Q.length>0?Q.reduce((s,a)=>s+a,0)/Q.length:0,Pe=d.filter(s=>s.linked_at).length,Ee=G>0?Pe/G*100:0,X=new Map;L.forEach(s=>{const a=s.page_path,x=X.get(a)||{views:0,type:s.page_type||"other"};X.set(a,{views:x.views+1,type:x.type})});const Be=Array.from(X.entries()).map(([s,a])=>({page:s,views:a.views,type:a.type})).sort((s,a)=>a.views-s.views).slice(0,20),Y=new Map;d.forEach(s=>{s.country&&Y.set(s.country,(Y.get(s.country)||0)+1)});const Fe=Array.from(Y.entries()).map(([s,a])=>({country:s,visitors:a})).sort((s,a)=>a.visitors-s.visitors).slice(0,10),Z=new Map;d.forEach(s=>{s.city&&Z.set(s.city,(Z.get(s.city)||0)+1)});const Re=Array.from(Z.entries()).map(([s,a])=>({city:s,visitors:a})).sort((s,a)=>a.visitors-s.visitors).slice(0,10),W=new Map;d.forEach(s=>{const a=s.device_type||"unknown";W.set(a,(W.get(a)||0)+1)});const Le=Array.from(W.entries()).map(([s,a])=>({device:s,count:a})),ee=new Map;d.forEach(s=>{const a=s.browser||"unknown";ee.set(a,(ee.get(a)||0)+1)});const Ie=Array.from(ee.entries()).map(([s,a])=>({browser:s,count:a})),se=new Map;d.forEach(s=>{const a=s.utm_source||(s.referrer?new URL(s.referrer).hostname:"direct");se.set(a,(se.get(a)||0)+1)});const qe=Array.from(se.entries()).map(([s,a])=>({source:s,visitors:a})).sort((s,a)=>a.visitors-s.visitors),ae=new Map;d.forEach(s=>{const a=new Date(s.created_at).getHours();ae.set(a,(ae.get(a)||0)+1)});const ze=Array.from({length:24},(s,a)=>({hour:a,visitors:ae.get(a)||0})),D=new Map;d.forEach(s=>{const a=s.created_at.split("T")[0],x=D.get(a)||{visitors:0,pageviews:0};D.set(a,{visitors:x.visitors+1,pageviews:x.pageviews})}),L.forEach(s=>{const a=s.created_at.split("T")[0],x=D.get(a)||{visitors:0,pageviews:0};D.set(a,{visitors:x.visitors,pageviews:x.pageviews+1})});const $e=Array.from(D.entries()).map(([s,a])=>({date:s,...a})).sort((s,a)=>s.date.localeCompare(a.date)),te=new Map;Se.forEach(s=>{const a=`${s.source||"website"}|${s.booking_page_path||"/"}`;te.set(a,(te.get(a)||0)+1)});const Je=Array.from(te.entries()).map(([s,a])=>{const[x,ie]=s.split("|");return{source:x,page:ie,count:a}}).sort((s,a)=>a.count-s.count),re=new Map;ke.forEach(s=>{const a=re.get(s.session_id)||{pages:[],converted:!1,appointmentId:null};a.pages.push(s.page_path),s.converted&&(a.converted=!0,a.appointmentId=s.appointment_id),re.set(s.session_id,a)});const Ke=Array.from(re.entries()).map(([s,a])=>{const x=d.find(ie=>ie.session_id===s);return{sessionId:s,patientName:x?.patient_name||null,pages:a.pages,converted:a.converted,appointmentId:a.appointmentId}}).slice(0,50);return{totalVisitors:G,totalPageviews:Te,totalEvents:Me,uniqueVisitors:_e,bounceRate:Math.round(Ve*10)/10,avgSessionDuration:Math.round(Ae),conversionRate:Math.round(Ee*100)/100,topPages:Be,topCountries:Fe,topCities:Re,deviceBreakdown:Le,browserBreakdown:Ie,sourceBreakdown:qe,hourlyVisitors:ze,dailyVisitors:$e,appointmentSources:Je,visitorJourneys:Ke}},staleTime:6e4,refetchInterval:12e4})}const we=["hsl(var(--primary))","hsl(var(--teal))","hsl(var(--coral))","hsl(var(--gold))","hsl(var(--purple))"];function $s(){const[J,K]=f.useState("30"),[U,b]=f.useState(N(Ne(new Date,30),"yyyy-MM-dd")),[C,k]=f.useState(N(new Date,"yyyy-MM-dd")),[y,j]=f.useState(""),[u,g]=f.useState(""),[B,S]=f.useState(""),{data:r,isLoading:O,refetch:F}=vs({dateFrom:`${U}T00:00:00Z`,dateTo:`${C}T23:59:59Z`,country:y||void 0,city:u||void 0,pageType:B||void 0}),H=t=>{K(t);const i=parseInt(t);b(N(Ne(new Date,i),"yyyy-MM-dd")),k(N(new Date,"yyyy-MM-dd"))},R=t=>{const i=Math.floor(t/60),_=t%60;return`${i}m ${_}s`};return O?e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[...Array(8)].map((t,i)=>e.jsx(es,{className:"h-32"},i))})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-display font-bold text-foreground",children:"Visitor Analytics"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Track visitor behavior, journeys, and conversions"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>F(),children:[e.jsx(ss,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(ne,{variant:"outline",size:"sm",children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),e.jsx(n,{className:"border-2 border-primary/20",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Filters:"})]}),e.jsxs(I,{value:J,onValueChange:H,children:[e.jsxs(q,{className:"w-[140px] border-2",children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),e.jsx(z,{})]}),e.jsxs($,{children:[e.jsx(c,{value:"7",children:"Last 7 days"}),e.jsx(c,{value:"14",children:"Last 14 days"}),e.jsx(c,{value:"30",children:"Last 30 days"}),e.jsx(c,{value:"90",children:"Last 90 days"})]})]}),e.jsxs(I,{value:B||"all",onValueChange:t=>S(t==="all"?"":t),children:[e.jsxs(q,{className:"w-[140px] border-2",children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),e.jsx(z,{placeholder:"Page Type"})]}),e.jsxs($,{children:[e.jsx(c,{value:"all",children:"All Pages"}),e.jsx(c,{value:"home",children:"Home"}),e.jsx(c,{value:"clinic",children:"Clinic"}),e.jsx(c,{value:"dentist",children:"Dentist"}),e.jsx(c,{value:"city",children:"City"}),e.jsx(c,{value:"service",children:"Service"}),e.jsx(c,{value:"search",children:"Search"}),e.jsx(c,{value:"blog",children:"Blog"})]})]}),r?.topCountries&&r.topCountries.length>0&&e.jsxs(I,{value:y||"all",onValueChange:t=>j(t==="all"?"":t),children:[e.jsxs(q,{className:"w-[160px] border-2",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),e.jsx(z,{placeholder:"Country"})]}),e.jsxs($,{children:[e.jsx(c,{value:"all",children:"All Countries"}),r.topCountries.map(t=>e.jsx(c,{value:t.country||"unknown",children:t.country||"Unknown"},t.country))]})]}),r?.topCities&&r.topCities.length>0&&e.jsxs(I,{value:u||"all",onValueChange:t=>g(t==="all"?"":t),children:[e.jsxs(q,{className:"w-[160px] border-2",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),e.jsx(z,{placeholder:"City"})]}),e.jsxs($,{children:[e.jsx(c,{value:"all",children:"All Cities"}),r.topCities.map(t=>e.jsx(c,{value:t.city||"unknown",children:t.city||"Unknown"},t.city))]})]}),e.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>{j(""),g(""),S("")},children:"Clear Filters"})]})})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(n,{className:"border-2 border-primary/20 bg-primary/5",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/10 border border-primary/20",children:e.jsx(je,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-foreground",children:r?.totalVisitors?.toLocaleString()||0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Sessions"})]})]})})}),e.jsx(n,{className:"border-2 border-teal/20 bg-teal/5",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-teal/10 border border-teal/20",children:e.jsx(rs,{className:"h-6 w-6 text-teal"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-foreground",children:r?.totalPageviews?.toLocaleString()||0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Page Views"})]})]})})}),e.jsx(n,{className:"border-2 border-coral/20 bg-coral/5",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-coral/10 border border-coral/20",children:e.jsx(gs,{className:"h-6 w-6 text-coral"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-foreground",children:r?.totalEvents?.toLocaleString()||0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Events Tracked"})]})]})})}),e.jsx(n,{className:"border-2 border-gold/20 bg-gold/5",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gold/10 border border-gold/20",children:e.jsx(ue,{className:"h-6 w-6 text-gold"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-3xl font-bold text-foreground",children:[r?.conversionRate?.toFixed(2)||0,"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Conversion Rate"})]})]})})}),e.jsx(n,{className:"border border-border",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-muted",children:e.jsx(je,{className:"h-5 w-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:r?.uniqueVisitors?.toLocaleString()||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique Visitors"})]})]})})}),e.jsx(n,{className:"border border-border",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-muted",children:e.jsx(is,{className:"h-5 w-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold",children:[r?.bounceRate?.toFixed(1)||0,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Bounce Rate"})]})]})})}),e.jsx(n,{className:"border border-border",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-muted",children:e.jsx(Ge,{className:"h-5 w-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:R(r?.avgSessionDuration||0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg. Session"})]})]})})}),e.jsx(n,{className:"border border-border",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-muted",children:e.jsx(ns,{className:"h-5 w-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:r?.totalPageviews&&r?.totalVisitors?(r.totalPageviews/r.totalVisitors).toFixed(1):0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pages/Session"})]})]})})})]}),e.jsxs(Ze,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(We,{className:"grid w-full grid-cols-5 lg:w-auto lg:inline-grid",children:[e.jsx(A,{value:"overview",children:"Overview"}),e.jsx(A,{value:"pages",children:"Pages"}),e.jsx(A,{value:"sources",children:"Sources"}),e.jsx(A,{value:"geo",children:"Geographic"}),e.jsx(A,{value:"journeys",children:"Journeys"})]}),e.jsxs(P,{value:"overview",className:"space-y-4",children:[e.jsxs(n,{children:[e.jsx(h,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(ls,{className:"h-5 w-5 text-primary"}),"Daily Visitors & Pageviews"]})}),e.jsx(l,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(me,{width:"100%",height:"100%",children:e.jsxs(cs,{data:r?.dailyVisitors||[],children:[e.jsx(ge,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(ve,{dataKey:"date",tickFormatter:t=>N(new Date(t),"MMM d"),className:"text-xs"}),e.jsx(ye,{className:"text-xs"}),e.jsx(he,{labelFormatter:t=>N(new Date(t),"MMM d, yyyy"),contentStyle:{background:"hsl(var(--card))",border:"1px solid hsl(var(--border))"}}),e.jsx(os,{}),e.jsx(fe,{type:"monotone",dataKey:"visitors",name:"Sessions",stroke:"hsl(var(--primary))",fill:"hsl(var(--primary))",fillOpacity:.3}),e.jsx(fe,{type:"monotone",dataKey:"pageviews",name:"Page Views",stroke:"hsl(var(--teal))",fill:"hsl(var(--teal))",fillOpacity:.3})]})})})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs(n,{children:[e.jsx(h,{children:e.jsx(p,{className:"text-lg",children:"Hourly Distribution"})}),e.jsx(l,{children:e.jsx("div",{className:"h-[200px]",children:e.jsx(me,{width:"100%",height:"100%",children:e.jsxs(ds,{data:r?.hourlyVisitors||[],children:[e.jsx(ge,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(ve,{dataKey:"hour",tickFormatter:t=>`${t}:00`,className:"text-xs"}),e.jsx(ye,{className:"text-xs"}),e.jsx(he,{}),e.jsx(xs,{dataKey:"visitors",fill:"hsl(var(--primary))",radius:[4,4,0,0]})]})})})})]}),e.jsxs(n,{children:[e.jsx(h,{children:e.jsx(p,{className:"text-lg",children:"Device Breakdown"})}),e.jsx(l,{children:e.jsx("div",{className:"h-[200px]",children:e.jsx(me,{width:"100%",height:"100%",children:e.jsxs(ms,{children:[e.jsx(hs,{data:r?.deviceBreakdown||[],dataKey:"count",nameKey:"device",cx:"50%",cy:"50%",outerRadius:70,label:({device:t,percent:i})=>`${t} ${(i*100).toFixed(0)}%`,children:r?.deviceBreakdown?.map((t,i)=>e.jsx(ps,{fill:we[i%we.length]},`cell-${i}`))}),e.jsx(he,{})]})})})})]})]})]}),e.jsxs(P,{value:"pages",className:"space-y-4",children:[e.jsxs(n,{children:[e.jsxs(h,{children:[e.jsx(p,{children:"Top Pages"}),e.jsx(ce,{children:"Most viewed pages on your website"})]}),e.jsx(l,{children:e.jsxs(oe,{children:[e.jsx(de,{children:e.jsxs(v,{children:[e.jsx(m,{children:"Page"}),e.jsx(m,{children:"Type"}),e.jsx(m,{className:"text-right",children:"Views"}),e.jsx(m,{className:"w-[200px]",children:"Share"})]})}),e.jsx(xe,{children:r?.topPages?.map((t,i)=>e.jsxs(v,{children:[e.jsx(o,{className:"font-mono text-sm max-w-[300px] truncate",children:t.page}),e.jsx(o,{children:e.jsx(w,{variant:"outline",className:"capitalize",children:t.type})}),e.jsx(o,{className:"text-right font-medium",children:t.views.toLocaleString()}),e.jsx(o,{children:e.jsx(E,{value:t.views/(r?.totalPageviews||1)*100,className:"h-2"})})]},i))})]})})]}),e.jsxs(n,{children:[e.jsxs(h,{children:[e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5 text-primary"}),"Appointment Booking Sources"]}),e.jsx(ce,{children:"Where appointments are booked from"})]}),e.jsx(l,{children:e.jsxs(oe,{children:[e.jsx(de,{children:e.jsxs(v,{children:[e.jsx(m,{children:"Source"}),e.jsx(m,{children:"Page"}),e.jsx(m,{className:"text-right",children:"Bookings"})]})}),e.jsxs(xe,{children:[r?.appointmentSources?.map((t,i)=>e.jsxs(v,{children:[e.jsx(o,{children:e.jsx(w,{variant:"secondary",className:"capitalize",children:t.source})}),e.jsx(o,{className:"font-mono text-sm",children:t.page}),e.jsx(o,{className:"text-right font-bold",children:t.count})]},i)),(!r?.appointmentSources||r.appointmentSources.length===0)&&e.jsx(v,{children:e.jsx(o,{colSpan:3,className:"text-center text-muted-foreground py-8",children:"No appointment source data yet"})})]})]})})]})]}),e.jsx(P,{value:"sources",className:"space-y-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs(n,{children:[e.jsx(h,{children:e.jsx(p,{children:"Traffic Sources"})}),e.jsx(l,{children:e.jsx("div",{className:"space-y-3",children:r?.sourceBreakdown?.slice(0,10).map((t,i)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:t.source})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:t.visitors}),e.jsx(E,{value:t.visitors/(r?.totalVisitors||1)*100,className:"h-2 w-20"})]})]},i))})})]}),e.jsxs(n,{children:[e.jsx(h,{children:e.jsx(p,{children:"Browsers"})}),e.jsx(l,{children:e.jsx("div",{className:"space-y-3",children:r?.browserBreakdown?.map((t,i)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(us,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:t.browser})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:t.count}),e.jsx(E,{value:t.count/(r?.totalVisitors||1)*100,className:"h-2 w-20"})]})]},i))})})]})]})}),e.jsx(P,{value:"geo",className:"space-y-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs(n,{children:[e.jsx(h,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5"}),"Top Countries"]})}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-3",children:[r?.topCountries?.map((t,i)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:t.country||"Unknown"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:t.visitors}),e.jsx(E,{value:t.visitors/(r?.totalVisitors||1)*100,className:"h-2 w-24"})]})]},i)),(!r?.topCountries||r.topCountries.length===0)&&e.jsx("p",{className:"text-muted-foreground text-sm text-center py-4",children:"Geographic data will appear once visitors are tracked"})]})})]}),e.jsxs(n,{children:[e.jsx(h,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5"}),"Top Cities"]})}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-3",children:[r?.topCities?.map((t,i)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:t.city||"Unknown"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:t.visitors}),e.jsx(E,{value:t.visitors/(r?.totalVisitors||1)*100,className:"h-2 w-24"})]})]},i)),(!r?.topCities||r.topCities.length===0)&&e.jsx("p",{className:"text-muted-foreground text-sm text-center py-4",children:"City data will appear once visitors are tracked"})]})})]})]})}),e.jsx(P,{value:"journeys",className:"space-y-4",children:e.jsxs(n,{children:[e.jsxs(h,{children:[e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"h-5 w-5 text-primary"}),"Visitor Journeys"]}),e.jsx(ce,{children:"Track how visitors navigate through your site before booking"})]}),e.jsx(l,{children:e.jsxs(oe,{children:[e.jsx(de,{children:e.jsxs(v,{children:[e.jsx(m,{children:"Session"}),e.jsx(m,{children:"Visitor"}),e.jsx(m,{children:"Journey"}),e.jsx(m,{children:"Converted"})]})}),e.jsxs(xe,{children:[r?.visitorJourneys?.map((t,i)=>e.jsxs(v,{children:[e.jsxs(o,{className:"font-mono text-xs",children:[t.sessionId.slice(0,12),"..."]}),e.jsx(o,{children:t.patientName||e.jsx("span",{className:"text-muted-foreground",children:"Anonymous"})}),e.jsx(o,{children:e.jsxs("div",{className:"flex items-center gap-1 flex-wrap max-w-[400px]",children:[t.pages.slice(0,5).map((_,T)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{variant:"outline",className:"text-xs truncate max-w-[100px]",children:_}),T<Math.min(t.pages.length-1,4)&&e.jsx(Xe,{className:"h-3 w-3 mx-1 text-muted-foreground"})]},T)),t.pages.length>5&&e.jsxs(w,{variant:"secondary",className:"text-xs",children:["+",t.pages.length-5," more"]})]})}),e.jsx(o,{children:t.converted?e.jsxs(w,{className:"bg-teal/10 text-teal border border-teal/20",children:[e.jsx(Ye,{className:"h-3 w-3 mr-1"}),"Booked"]}):e.jsxs(w,{variant:"outline",className:"text-muted-foreground",children:[e.jsx(js,{className:"h-3 w-3 mr-1"}),"No"]})})]},i)),(!r?.visitorJourneys||r.visitorJourneys.length===0)&&e.jsx(v,{children:e.jsx(o,{colSpan:4,className:"text-center text-muted-foreground py-8",children:"No visitor journey data yet. Journeys will appear once tracking is active."})})]})]})})]})})]})]})}export{$s as default};
