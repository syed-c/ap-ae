import{b as Ie,u as z,j as e}from"./chunk-CPh6voF3.js";import{r as c}from"./chunk-CffrGP6S.js";import{f as ze,B as N,G as X,y as De,L as D,a4 as Re,a as _,a2 as R,a3 as V,a5 as B,a6 as H,a7 as u,p as Ve,I as Be,i as P,X as He,Z as Me,bA as We,S as J,b7 as me,C as xe,Q as Ke,a9 as Ue,aa as Oe,ab as Je,ac as Ye,ad as Ze,t as Xe,ae as es,x as ss,v as as,w as he,b as S,s as q,bK as ts,bB as rs}from"./index-DflORfjh.js";import{C as x,d as h,a as F,b as C,c as ls}from"./chunk-Dwq_v72W.js";import{P as ue}from"./chunk-DSDQubI6.js";import{T as ns,a as is,b as ge,c as T,d as cs,e as k}from"./chunk-NLs5Ye4A.js";import{T as os,a as ds,b as pe,c as fe}from"./chunk-k8HiDHrE.js";import{S as ms}from"./chunk-FxOzQZIr.js";import{A as xs,a as hs,b as us,c as gs}from"./chunk-BMzWzDrf.js";import{R as ps}from"./chunk-BOvFDp2b.js";import{C as fs}from"./chunk-wy0nNZZG.js";import{L as js}from"./chunk-BIb-dHdK.js";import{S as Ns}from"./chunk-qKgaU6ML.js";import{E as je}from"./chunk-CcezodbN.js";import{C as Y}from"./chunk-GLPyMM0F.js";import{C as vs}from"./chunk-C14yCe0w.js";import{L as Ne}from"./chunk-Bpcq5jED.js";import"./chunk-B8auUmee.js";import"./chunk-DK8nT4cj.js";import"./chunk-Drd-rt-S.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";import"./chunk-CKWDY2Lf.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=ze("FileQuestion",[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]]),Z={state:"State Pages",city:"City Pages",treatment:"Service Pages",service_location:"Service + Location",city_treatment:"City + Treatment",clinic:"Clinic Pages",dentist:"Dentist Profiles"},ye={state:X,city:ss,treatment:as,service_location:Ne,city_treatment:Ne,clinic:he,dentist:he};function Ws(){const ee=Ie(),[we,se]=c.useState("selection"),[d,M]=c.useState([]),[L,be]=c.useState("__all__"),[G,Ae]=c.useState("__all__"),[W,_e]=c.useState("__all__"),[Q,Se]=c.useState("__all__"),[E,qe]=c.useState(""),[v,Fe]=c.useState(10),[n,y]=c.useState(null),[K,ae]=c.useState(!1),w=c.useRef(!1),$=c.useRef(null),[p,te]=c.useState(null),[f,U]=c.useState(null),[Ce,I]=c.useState(!1),[re,le]=c.useState(!1);c.useEffect(()=>{$.current&&($.current.scrollTop=$.current.scrollHeight)},[n?.logs]);const{data:m,isLoading:ne,refetch:Qe}=z({queryKey:["faq-studio-pages"],queryFn:async()=>{const a=[];let t=0;for(;;){const{data:r,error:o}=await q.from("seo_pages").select("id, slug, page_type, title, h1, content, faqs, word_count, updated_at").order("updated_at",{ascending:!1}).range(t,t+1e3-1);if(o)throw o;const i=r||[],g=i.filter(l=>ts(l.slug,l.page_type));if(a.push(...g),i.length<1e3)break;t+=1e3}return a}}),{data:O}=z({queryKey:["faq-studio-states"],queryFn:async()=>{const{data:s,error:a}=await q.from("states").select("id, name, abbreviation, slug").eq("is_active",!0).in("slug",rs).order("name");if(a)throw a;return s||[]}}),{data:ie}=z({queryKey:["faq-studio-treatments"],queryFn:async()=>{const{data:s,error:a}=await q.from("treatments").select("id, name, slug").eq("is_active",!0).order("name");if(a)throw a;return s||[]}}),{data:b,refetch:ys}=z({queryKey:["faq-audit"],queryFn:async()=>{if(!m)return{totalPages:0,pagesWithFAQs:0,pagesWithoutFAQs:0,avgFAQCount:0,duplicateIssues:0};const s=m.filter(i=>i.faqs&&Array.isArray(i.faqs)&&i.faqs.length>0),a=m.filter(i=>!i.faqs||!Array.isArray(i.faqs)||i.faqs.length===0);let t=0;const r=new Map;for(const i of s)if(i.faqs&&Array.isArray(i.faqs)){t+=i.faqs.length;for(const g of i.faqs)if(g?.question){const l=g.question.toLowerCase().replace(/[^a-z0-9\s]/g,"").trim();r.has(l)||r.set(l,[]),r.get(l).push(i.slug)}}const o=[...r.values()].filter(i=>i.length>1).length;return{totalPages:m.length,pagesWithFAQs:s.length,pagesWithoutFAQs:a.length,avgFAQCount:s.length>0?Math.round(t/s.length):0,duplicateIssues:o}},enabled:!!m}),Pe=c.useMemo(()=>m?Object.entries(Z).map(([s,a])=>{const t=m.filter(o=>o.page_type===s),r=t.filter(o=>o.faqs&&Array.isArray(o.faqs)&&o.faqs.length>0);return{type:s,label:a,total:t.length,withFAQs:r.length,withoutFAQs:t.length-r.length,coverage:t.length>0?Math.round(r.length/t.length*100):0}}).filter(s=>s.total>0):[],[m]),j=c.useMemo(()=>m?m.filter(s=>{if(L!=="__all__"&&s.page_type!==L)return!1;if(G!=="__all__"){const t=O?.find(r=>r.id===G);if(t){const r=t.slug?.toLowerCase()||t.name?.toLowerCase().replace(/\s+/g,"-")||"",o=s.slug.replace(/^\/+/,"").toLowerCase();if(o!==r&&!o.startsWith(`${r}/`))return!1}}if(W!=="__all__"){const t=ie?.find(r=>r.id===W);if(t&&!s.slug.toLowerCase().includes(t.slug.toLowerCase()))return!1}const a=s.faqs&&Array.isArray(s.faqs)&&s.faqs.length>0;if(Q==="has_faqs"&&!a||Q==="no_faqs"&&a||Q==="few_faqs"&&(!a||s.faqs.length>=5))return!1;if(E){const t=E.toLowerCase();if(!s.slug.toLowerCase().includes(t)&&!(s.title||"").toLowerCase().includes(t)&&!(s.h1||"").toLowerCase().includes(t))return!1}return!0}):[],[m,L,G,Q,E,O]),ce=()=>{M(j.map(s=>s.id))},oe=()=>{M([])},Te=s=>{M(a=>a.includes(s)?a.filter(t=>t!==s):[...a,s])},A=s=>{y(a=>a?{...a,logs:[...a.logs,{...s,timestamp:new Date}]}:null)},ke=()=>{w.current=!0,S.info("Stopping generation... Please wait for current page to complete.")},Le=async()=>{if(d.length===0){S.error("Please select at least one page");return}ae(!0),w.current=!1,se("generation");const s=`job_${Date.now()}`;y({id:s,status:"running",total:d.length,processed:0,success:0,errors:0,logs:[],startedAt:new Date}),A({page:"",action:"started",message:`Starting FAQ generation for ${d.length} pages (${v} FAQs each)...`});let a=0,t=0;for(let r=0;r<d.length;r++){if(w.current){A({page:"",action:"skipped",message:`Generation stopped. ${d.length-r} pages skipped.`}),y(l=>l?{...l,status:"stopped"}:null);break}const o=d[r],g=m?.find(l=>l.id===o)?.slug||o;y(l=>l?{...l,processed:r,currentPage:g}:null),A({page:g,action:"started",message:`Generating ${v} FAQs...`});try{const{data:l,error:de}=await q.functions.invoke("faq-generation-studio",{body:{action:"generate_faqs",page_id:o,config:{faq_count:v,use_paa_style:!0,include_local_context:!0,make_unique:!0}}});if(de)throw de;a++;const $e=l?.uniqueness?.isUnique?"✓ Unique":`⚠ ${l?.uniqueness?.duplicateCount||0} potential duplicates`;A({page:g,action:"completed",message:`Generated ${l?.faq_count||0} FAQs. ${$e}`,details:l})}catch(l){t++,A({page:g,action:"error",message:`Failed: ${l instanceof Error?l.message:"Unknown error"}`})}y(l=>l?{...l,processed:r+1,success:a,errors:t}:null),r<d.length-1&&!w.current&&await new Promise(l=>setTimeout(l,2500))}w.current||(y(r=>r?{...r,status:"completed"}:null),A({page:"",action:"completed",message:`Generation complete! Success: ${a}, Errors: ${t}`})),w.current=!1,ae(!1),ee.invalidateQueries({queryKey:["faq-studio-pages"]}),S.success(`FAQ generation complete! ${a} pages processed, ${t} errors`)},Ge=async s=>{te(s),I(!0),le(!0),U(null);try{const{data:a,error:t}=await q.functions.invoke("faq-generation-studio",{body:{action:"preview_faqs",page_id:s.id,config:{faq_count:v}}});if(t)throw t;U(a?.faqs||[])}catch(a){S.error(`Preview failed: ${a instanceof Error?a.message:"Unknown error"}`)}finally{le(!1)}},Ee=async()=>{if(!(!p||!f))try{const{error:s}=await q.functions.invoke("faq-generation-studio",{body:{action:"apply_faqs",page_id:p.id,faqs:f}});if(s)throw s;S.success("FAQs applied successfully!"),I(!1),te(null),U(null),ee.invalidateQueries({queryKey:["faq-studio-pages"]})}catch(s){S.error(`Apply failed: ${s instanceof Error?s.message:"Unknown error"}`)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(ve,{className:"h-6 w-6 text-primary"}),"FAQ Generation Studio"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:'Generate unique, "People Also Ask" style FAQs for every page'})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(N,{variant:"outline",onClick:()=>Qe(),disabled:ne,children:[e.jsx(ps,{className:`h-4 w-4 mr-2 ${ne?"animate-spin":""}`}),"Refresh"]})})]}),b&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx(x,{children:e.jsxs(h,{className:"pt-4",children:[e.jsx("div",{className:"text-2xl font-bold",children:b.totalPages.toLocaleString()}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Pages"})]})}),e.jsx(x,{children:e.jsxs(h,{className:"pt-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:b.pagesWithFAQs.toLocaleString()}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"With FAQs"})]})}),e.jsx(x,{children:e.jsxs(h,{className:"pt-4",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:b.pagesWithoutFAQs.toLocaleString()}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"No FAQs"})]})}),e.jsx(x,{children:e.jsxs(h,{className:"pt-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:b.avgFAQCount}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg FAQs/Page"})]})}),e.jsx(x,{children:e.jsxs(h,{className:"pt-4",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:b.duplicateIssues}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Duplicate Issues"})]})})]}),e.jsxs(x,{children:[e.jsx(F,{className:"pb-3",children:e.jsxs(C,{className:"text-lg flex items-center gap-2",children:[e.jsx(fs,{className:"h-5 w-5"}),"FAQ Coverage by Page Type"]})}),e.jsx(h,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Pe.map(s=>{const a=ye[s.type]||X;return e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(a,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:s.label})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-2xl font-bold",children:[s.coverage,"%"]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.withFAQs,"/",s.total]})]}),e.jsx(ue,{value:s.coverage,className:"h-2"})]},s.type)})})})]}),e.jsxs(os,{value:we,onValueChange:s=>se(s),children:[e.jsxs(ds,{children:[e.jsxs(pe,{value:"selection",className:"flex items-center gap-2",children:[e.jsx(js,{className:"h-4 w-4"}),"Page Selection"]}),e.jsxs(pe,{value:"generation",className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-4 w-4"}),"Generation",K&&e.jsx(D,{className:"h-3 w-3 animate-spin"})]})]}),e.jsxs(fe,{value:"selection",className:"space-y-4",children:[e.jsxs(x,{children:[e.jsxs(F,{className:"pb-3",children:[e.jsxs(C,{className:"text-lg flex items-center gap-2",children:[e.jsx(Re,{className:"h-5 w-5"}),"Page Selection"]}),e.jsx(ls,{children:"Select pages by type, location, or FAQ status"})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Page Type"}),e.jsxs(R,{value:L,onValueChange:be,children:[e.jsx(V,{children:e.jsx(B,{placeholder:"All Types"})}),e.jsxs(H,{children:[e.jsx(u,{value:"__all__",children:"All Types"}),Object.entries(Z).map(([s,a])=>e.jsx(u,{value:s,children:a},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Emirate"}),e.jsxs(R,{value:G,onValueChange:Ae,children:[e.jsx(V,{children:e.jsx(B,{placeholder:"All Emirates"})}),e.jsxs(H,{children:[e.jsx(u,{value:"__all__",children:"All Emirates"}),O?.map(s=>e.jsx(u,{value:s.id,children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Service"}),e.jsxs(R,{value:W,onValueChange:_e,children:[e.jsx(V,{children:e.jsx(B,{placeholder:"All Services"})}),e.jsxs(H,{children:[e.jsx(u,{value:"__all__",children:"All Services"}),ie?.map(s=>e.jsx(u,{value:s.id,children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"FAQ Status"}),e.jsxs(R,{value:Q,onValueChange:Se,children:[e.jsx(V,{children:e.jsx(B,{placeholder:"All Status"})}),e.jsxs(H,{children:[e.jsx(u,{value:"__all__",children:"All Status"}),e.jsx(u,{value:"no_faqs",children:"No FAQs"}),e.jsx(u,{value:"few_faqs",children:"Few FAQs (<5)"}),e.jsx(u,{value:"has_faqs",children:"Has FAQs"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Be,{placeholder:"Search pages...",value:E,onChange:s=>qe(s.target.value),className:"pl-10"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between border-t pt-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(P,{variant:"secondary",className:"text-base px-3 py-1",children:[j.length.toLocaleString()," pages match"]}),e.jsxs(P,{variant:d.length>0?"default":"outline",className:"text-base px-3 py-1",children:[d.length.toLocaleString()," selected"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:oe,disabled:d.length===0,children:[e.jsx(He,{className:"h-4 w-4 mr-1"}),"Clear"]}),e.jsxs(N,{variant:"secondary",size:"sm",onClick:ce,children:[e.jsx(Ns,{className:"h-4 w-4 mr-1"}),"Select All (",j.length,")"]})]})]})]})]}),e.jsxs(x,{children:[e.jsx(F,{className:"pb-3",children:e.jsxs(C,{className:"text-lg flex items-center gap-2",children:[e.jsx(Me,{className:"h-5 w-5"}),"Generation Settings"]})}),e.jsxs(h,{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs(_,{children:["FAQs per Page: ",v]}),e.jsx(ms,{value:[v],onValueChange:([s])=>Fe(s),min:5,max:15,step:1}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Recommended: 10 FAQs for SEO"})]})}),e.jsx("div",{className:"flex items-center gap-4 pt-4 border-t",children:e.jsx(N,{size:"lg",onClick:Le,disabled:d.length===0||K,children:K?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),"Generate FAQs (",d.length," pages)"]})})})]})]}),e.jsxs(x,{children:[e.jsx(F,{className:"pb-3",children:e.jsx(C,{className:"text-lg",children:"Pages"})}),e.jsx(h,{className:"p-0",children:e.jsxs(J,{className:"h-[500px]",children:[e.jsxs(ns,{children:[e.jsx(is,{children:e.jsxs(ge,{children:[e.jsx(T,{className:"w-12",children:e.jsx(me,{checked:d.length===j.length&&j.length>0,onCheckedChange:s=>s?ce():oe()})}),e.jsx(T,{children:"Page"}),e.jsx(T,{children:"Type"}),e.jsx(T,{className:"text-center",children:"FAQs"}),e.jsx(T,{className:"text-right",children:"Actions"})]})}),e.jsx(cs,{children:j.slice(0,100).map(s=>{const a=ye[s.page_type]||X,t=s.faqs?.length||0;return e.jsxs(ge,{children:[e.jsx(k,{children:e.jsx(me,{checked:d.includes(s.id),onCheckedChange:()=>Te(s.id)})}),e.jsxs(k,{children:[e.jsxs("div",{className:"max-w-md truncate font-mono text-sm",children:["/",s.slug]}),s.title&&e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:s.title})]}),e.jsx(k,{children:e.jsxs(P,{variant:"outline",className:"flex items-center gap-1 w-fit",children:[e.jsx(a,{className:"h-3 w-3"}),Z[s.page_type]||s.page_type]})}),e.jsx(k,{className:"text-center",children:t>0?e.jsxs(P,{variant:"default",className:"bg-green-100 text-green-800",children:[t," FAQs"]}):e.jsx(P,{variant:"outline",className:"text-red-600 border-red-200",children:"No FAQs"})}),e.jsx(k,{className:"text-right",children:e.jsx("div",{className:"flex items-center justify-end gap-1",children:e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>Ge(s),children:e.jsx(je,{className:"h-4 w-4"})})})})]},s.id)})})]}),j.length>100&&e.jsxs("div",{className:"p-4 text-center text-muted-foreground",children:["Showing 100 of ",j.length," pages. Use filters to narrow down."]})]})})]})]}),e.jsxs(fe,{value:"generation",className:"space-y-4",children:[n&&e.jsxs(e.Fragment,{children:[e.jsxs(x,{children:[e.jsx(F,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(C,{className:"text-lg flex items-center gap-2",children:[n.status==="running"?e.jsx(D,{className:"h-5 w-5 animate-spin text-primary"}):n.status==="completed"?e.jsx(xe,{className:"h-5 w-5 text-green-600"}):n.status==="stopped"?e.jsx(Y,{className:"h-5 w-5 text-amber-600"}):e.jsx(Y,{className:"h-5 w-5 text-red-600"}),"FAQ Generation Progress"]}),n.status==="running"&&e.jsx(N,{variant:"destructive",size:"sm",onClick:ke,children:"Stop"})]})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{children:["Progress: ",n.processed,"/",n.total]}),e.jsxs("span",{children:[Math.round(n.processed/n.total*100),"%"]})]}),e.jsx(ue,{value:n.processed/n.total*100}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-2",children:[e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.success}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Success"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:n.errors}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Errors"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold",children:n.total-n.processed}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Remaining"})]})]}),n.currentPage&&n.status==="running"&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Processing: ",e.jsx("span",{className:"font-mono",children:n.currentPage})]})]})]}),e.jsxs(x,{children:[e.jsx(F,{className:"pb-3",children:e.jsx(C,{className:"text-lg",children:"Generation Logs"})}),e.jsx(h,{className:"p-0",children:e.jsx(J,{className:"h-[400px]",ref:$,children:e.jsx("div",{className:"p-4 space-y-2",children:n.logs.map((s,a)=>e.jsxs("div",{className:`flex items-start gap-3 p-2 rounded text-sm ${s.action==="error"?"bg-red-50 text-red-800":s.action==="completed"?"bg-green-50 text-green-800":s.action==="skipped"?"bg-amber-50 text-amber-800":"bg-muted"}`,children:[e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:Ke(s.timestamp,"HH:mm:ss")}),s.page&&e.jsx("span",{className:"font-mono text-xs max-w-[200px] truncate",children:s.page}),e.jsx("span",{className:"flex-1",children:s.message})]},a))})})})]})]}),!n&&e.jsx(x,{children:e.jsxs(h,{className:"py-12 text-center text-muted-foreground",children:[e.jsx(ve,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No generation job in progress."}),e.jsx("p",{className:"text-sm",children:"Select pages and start generating FAQs."})]})})]})]}),e.jsx(Ue,{open:Ce,onOpenChange:I,children:e.jsxs(Oe,{className:"max-w-3xl max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsxs(Je,{children:[e.jsxs(Ye,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-5 w-5"}),"FAQ Preview"]}),e.jsx(Ze,{children:p?.slug&&e.jsxs("span",{className:"font-mono",children:["/",p.slug]})})]}),e.jsxs(J,{className:"flex-1 pr-4",children:[re?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(D,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),e.jsxs("p",{className:"text-muted-foreground",children:["Generating ",v," FAQs..."]})]}):f&&f.length>0?e.jsx(xs,{type:"single",collapsible:!0,className:"space-y-2",children:f.map((s,a)=>e.jsxs(hs,{value:`faq-${a}`,className:"border rounded-lg px-4",children:[e.jsx(us,{className:"text-left hover:no-underline",children:e.jsxs("span",{className:"flex items-start gap-2",children:[e.jsx(vs,{className:"h-4 w-4 mt-1 text-primary shrink-0"}),e.jsx("span",{children:s.question})]})}),e.jsx(gs,{className:"text-muted-foreground pl-6",children:s.answer})]},a))}):e.jsxs("div",{className:"py-12 text-center text-muted-foreground",children:[e.jsx(Y,{className:"h-8 w-8 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No FAQs generated. Try again."})]}),p?.faqs&&p.faqs.length>0&&e.jsxs("div",{className:"mt-6 pt-6 border-t",children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(Xe,{className:"h-4 w-4"}),"Existing FAQs (",p.faqs.length,")"]}),e.jsx("div",{className:"space-y-2 text-sm text-muted-foreground",children:p.faqs.map((s,a)=>e.jsxs("div",{className:"p-2 bg-muted rounded",children:[e.jsx("strong",{children:"Q:"})," ",s.question]},a))})]})]}),e.jsxs(es,{className:"pt-4 border-t",children:[e.jsx(N,{variant:"outline",onClick:()=>I(!1),children:"Cancel"}),e.jsxs(N,{onClick:Ee,disabled:!f||f.length===0||re,children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"Apply ",f?.length||0," FAQs"]})]})]})})]})}export{Ws as default};
