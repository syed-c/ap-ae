import{u as K,b as Oe,c as ze,j as e}from"./chunk-CPh6voF3.js";import{r as _}from"./chunk-CffrGP6S.js";import{f as Qe,s as C,b,B as g,G as Ve,x as G,v as A,w as me,p as ue,I as j,a2 as I,a3 as L,a5 as F,a6 as E,a7 as h,i as T,L as he,a9 as xe,aa as pe,ab as ge,ac as _e,a as d,ae as Re,al as y}from"./index-DflORfjh.js";import{c as je}from"./chunk-BSjc5zjM.js";import{u as Ue}from"./chunk-fofMllkR.js";import{u as We}from"./chunk-Bt-k3HAA.js";import{u as Ke}from"./chunk-Cd8N9UEo.js";import{f as Ge}from"./chunk-D4OU6rOw.js";import{C as Y,d as J,a as Ye,b as Je}from"./chunk-Dwq_v72W.js";import{S as X}from"./chunk-DfjE-bP6.js";import{T as Xe,a as Ze,b as O,c as z}from"./chunk-k8HiDHrE.js";import{T as et,a as tt,b as Z,c as q,d as st,e as w}from"./chunk-NLs5Ye4A.js";import{P as Q}from"./chunk-HAC-i_a2.js";import{F as W}from"./chunk-BaL04tya.js";import{B as fe}from"./chunk-B_ghW3Ra.js";import{E as at}from"./chunk-CcezodbN.js";import{E as it}from"./chunk-Dfi7JVLs.js";import{S as ve}from"./chunk-B51FxpoB.js";import{E as nt}from"./chunk-CbETxTmt.js";import{T as ye}from"./chunk-z7Kqt5JR.js";import{A as rt}from"./chunk-oOYeAGgD.js";import{C as be}from"./chunk-C14yCe0w.js";import{I as Ne}from"./chunk-DZK1lt0q.js";import{A as lt,a as ct}from"./chunk-BRjFAgpB.js";import{T as ot}from"./chunk-BRVan1jG.js";import{S as dt}from"./chunk-C7BdFRQZ.js";import"./chunk-B8auUmee.js";import"./chunk-DK8nT4cj.js";import"./chunk-Drd-rt-S.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";import"./chunk-D4Vl1TkM.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=Qe("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);function mt(c={}){return K({queryKey:["all-page-content",c],queryFn:async()=>{let m=C.from("page_content").select("*").order("updated_at",{ascending:!1});c.pageType&&(m=m.eq("page_type",c.pageType));const{data:x,error:r}=await m;if(r)throw r;return x||[]}})}function ut(){const c=Oe();return ze({mutationFn:async m=>{const{data:x}=await C.from("page_content").select("id").eq("page_slug",m.page_slug).maybeSingle();if(x){const{error:r}=await C.from("page_content").update({...m,updated_at:new Date().toISOString()}).eq("id",x.id);if(r)throw r;return await je({action:"UPDATE",entityType:"page_content",entityId:x.id,newValues:m}),x.id}else{const{data:r,error:N}=await C.from("page_content").insert([m]).select("id").single();if(N)throw N;return await je({action:"CREATE",entityType:"page_content",entityId:r.id,newValues:m}),r.id}},onSuccess:(m,x)=>{c.invalidateQueries({queryKey:["page-content",x.page_slug]}),c.invalidateQueries({queryKey:["all-page-content"]}),b.success("Page content saved successfully")},onError:m=>{b.error("Failed to save: "+m.message)}})}function we(c,m,x){switch(c){case"state":{const r=m?.name||"This State";return m?.abbreviation,{page_slug:x,page_type:"state",h1:`Find Dentists in ${r}`,hero_subtitle:`Discover top-rated dental professionals across ${r}. Browse by city, compare reviews, and book your appointment online.`,hero_intro:"",section_1_title:"Browse by City",section_1_content:`Explore cities in ${r} to find dental clinics near you.`,section_2_title:"Available Services",section_2_content:`Find dental treatments and services available in ${r}.`,body_content:`${r} is home to thousands of dental professionals offering comprehensive care from routine cleanings to advanced cosmetic procedures.`,faqs:[{question:`How do I find a dentist in ${r}?`,answer:`Browse our verified list of dentists across ${r}. Select your city, then filter by specialty, rating, and insurance to find the perfect match.`},{question:`Are dentists in ${r} verified?`,answer:'All dentists on our platform are licensed professionals. Profiles with the "Verified" badge have completed our additional verification process.'},{question:"Can I book same-day appointments?",answer:`Many dental offices in ${r} offer same-day or next-day appointments. Use our search filters to find clinics with immediate availability.`}],is_published:!0}}case"city":{const r=m?.name||"This City";m?.state?.name;const N=m?.state?.abbreviation||"",V=N?`${r}, ${N}`:r;return{page_slug:x,page_type:"city",h1:`Best Dentists in ${V}`,hero_subtitle:`Find and book appointments with top-rated dental professionals in ${r}. Compare verified clinics and read patient reviews.`,hero_intro:"",section_1_title:"Available Now",section_1_content:`Dentists & Clinics in ${r}`,section_2_title:"About This Area",section_2_content:`Dental Care in ${r}`,body_content:`${r} is home to many exceptional dental clinics and specialists. Whether you need a routine checkup, cosmetic dentistry, or specialized treatment, our verified network of dental professionals is here to provide exceptional care.`,faqs:[{question:`How do I find a good dentist in ${r}?`,answer:`Browse our verified list of dentists in ${r}. Look for verified badges, patient reviews, and specializations that match your needs.`},{question:`Are the dentists in ${r} verified?`,answer:'All dentists on our platform are licensed professionals. Profiles with the "Verified" badge have claimed their profile and completed our additional verification process.'},{question:`How much does dental treatment cost in ${r}?`,answer:"Dental costs vary by treatment type. A basic checkup typically ranges from $75-200, while specialized treatments can range from $3,000-6,000."},{question:`Can I book emergency dental appointments in ${r}?`,answer:`Yes, many clinics in ${r} offer same-day emergency appointments. Use our search to find clinics with emergency availability.`}],is_published:!0}}case"treatment":{const r=m?.name||"This Treatment";return{page_slug:x,page_type:"treatment",h1:r,hero_subtitle:`Learn about ${r.toLowerCase()} and find qualified dental professionals near you.`,section_1_title:"What is it?",section_1_content:m?.description||`Information about ${r.toLowerCase()}.`,section_2_title:"Find a Specialist",section_2_content:`Find dentists who specialize in ${r.toLowerCase()}.`,faqs:[{question:`What is ${r}?`,answer:`${r} is a dental procedure designed to improve your oral health and smile.`},{question:`How much does ${r} cost?`,answer:"Costs vary depending on your location and specific needs. Contact a dentist for a personalized quote."}],is_published:!0}}default:return{page_slug:x,page_type:c,h1:m?.name||"Page Title",hero_subtitle:"",faqs:[],is_published:!0}}}function Ut(){const[c,m]=_.useState({type:"all",search:"",stateId:"all"}),[x,r]=_.useState(50),[N,V]=_.useState(!1),{data:M,isLoading:Ce}=K({queryKey:["admin-states-active"],queryFn:async()=>{const{data:t,error:a}=await C.from("states").select("*").eq("is_active",!0).order("name");if(a)throw a;return t}}),{data:$,isLoading:Se}=K({queryKey:["admin-cities-with-active-states"],queryFn:async()=>{const{data:t}=await C.from("states").select("id").eq("is_active",!0),a=(t||[]).map(n=>n.id);if(a.length===0)return[];const{data:l,error:i}=await C.from("cities").select("*, state:states(id, name, slug, abbreviation)").eq("is_active",!0).in("state_id",a).order("name");if(i)throw i;return l}}),{data:k,isLoading:Te}=Ue(),{data:te,isLoading:qe}=We(),{data:se,isLoading:$e}=Ke(),{data:ae}=mt({}),B=ut(),{data:ie}=K({queryKey:["admin-seo-pages-content"],queryFn:async()=>await Ge(async(a,l)=>{const{data:i,error:n}=await C.from("seo_pages").select("id, slug, page_type, title, meta_title, meta_description, h1, h2_sections, page_intro, content, canonical_url, is_indexed, faqs").range(a,l);if(n)throw n;return i||[]})}),[ke,R]=_.useState(!1),[Pe,U]=_.useState(!1),[p,ne]=_.useState(null),[Ae,re]=_.useState("seo"),[o,S]=_.useState({pageType:"",stateId:"",cityId:"",treatmentId:"",customSlug:"",customName:""}),[s,u]=_.useState({meta_title:"",meta_description:"",keywords:[],og_image:"",noindex:!1,h1:"",hero_subtitle:"",hero_intro:"",hero_image:"",section_1_title:"",section_1_content:"",section_2_title:"",section_2_content:"",section_3_title:"",section_3_content:"",body_content:"",cta_text:"",cta_button_text:"",cta_button_url:"",faqs:[],featured_image:"",is_published:!0}),Ie=Ce||Se||Te||qe||$e,P=(t,a,l,i)=>{switch(t){case"state":return`/${a}`;case"city":return a&&l?`/${a}/${l}`:`/${l}`;case"treatment":return`/services/${i}`;case"service-location":return a&&l&&i?`/${a}/${l}/${i}`:`/services/${i}`;case"clinic":return`/clinic/${i}`;case"blog":return`/blog/${i}`;default:return`/${i||""}`}},f=_.useMemo(()=>[{id:"home",type:"static",name:"Home Page",url:"/",published:!0,indexed:!0},{id:"about",type:"static",name:"About Us",url:"/about",published:!0,indexed:!0},{id:"contact",type:"static",name:"Contact Us",url:"/contact",published:!0,indexed:!0},{id:"search",type:"static",name:"Search / Find Dentists",url:"/search",published:!0,indexed:!0},{id:"services",type:"static",name:"All Services",url:"/services",published:!0,indexed:!0},{id:"faq",type:"static",name:"FAQ",url:"/faq",published:!0,indexed:!0},{id:"privacy",type:"static",name:"Privacy Policy",url:"/privacy",published:!0,indexed:!0},{id:"terms",type:"static",name:"Terms of Service",url:"/terms",published:!0,indexed:!0},{id:"insurance",type:"static",name:"Insurance",url:"/insurance",published:!0,indexed:!0},{id:"how-it-works",type:"static",name:"How It Works",url:"/how-it-works",published:!0,indexed:!0},...(M||[]).map(t=>({id:`state-${t.id}`,type:"state",name:`${t.name} (${t.abbreviation})`,url:P("state",t.slug),published:t.is_active,indexed:t.is_active,data:t,stateSlug:t.slug,stateId:t.id})),...($||[]).map(t=>({id:`city-${t.id}`,type:"city",name:`${t.name}, ${t.state?.abbreviation||t.state?.name||""}`,url:P("city",t.state?.slug,t.slug),published:t.is_active,indexed:t.is_active,data:t,stateSlug:t.state?.slug,citySlug:t.slug,stateId:t.state?.id})),...(k||[]).map(t=>({id:`treatment-${t.id}`,type:"treatment",name:t.name,url:P("treatment",void 0,void 0,t.slug),published:t.is_active,indexed:t.is_active,data:t})),...($||[]).flatMap(t=>(k||[]).map(a=>({id:`service-location-${t.id}-${a.id}`,type:"service-location",name:`${a.name} in ${t.name}, ${t.state?.abbreviation||""}`,url:P("service-location",t.state?.slug,t.slug,a.slug),published:t.is_active&&a.is_active,indexed:t.is_active&&a.is_active,data:{city:t,treatment:a},stateSlug:t.state?.slug,citySlug:t.slug,stateId:t.state?.id}))),...(te||[]).map(t=>({id:`clinic-${t.id}`,type:"clinic",name:t.name,url:P("clinic",void 0,void 0,t.slug),published:t.is_active??!0,indexed:t.is_active??!0,data:t})),...(se||[]).map(t=>({id:`blog-${t.id}`,type:"blog",name:t.title,url:P("blog",void 0,void 0,t.slug),published:t.status==="published",indexed:t.status==="published",data:t}))],[M,$,k,te,se]),D=_.useMemo(()=>f.filter(t=>{const a=c.type==="all"||t.type===c.type,l=!c.search||t.name.toLowerCase().includes(c.search.toLowerCase())||t.url.toLowerCase().includes(c.search.toLowerCase()),i=c.stateId==="all"||!c.stateId||t.stateId===c.stateId||t.type!=="city"&&t.type!=="state"&&t.type!=="service-location";return a&&l&&i}),[f,c]),v=_.useMemo(()=>({all:f.length,static:f.filter(t=>t.type==="static").length,state:f.filter(t=>t.type==="state").length,city:f.filter(t=>t.type==="city").length,treatment:f.filter(t=>t.type==="treatment").length,"service-location":f.filter(t=>t.type==="service-location").length,clinic:f.filter(t=>t.type==="clinic").length,blog:f.filter(t=>t.type==="blog").length}),[f]),Le=()=>{V(!0),setTimeout(()=>{r(t=>t+50),V(!1)},300)},Fe=t=>{ne(t),re("seo");const a=ae?.find(n=>n.page_slug===t.url),l=t.url.startsWith("/")?t.url.slice(1):t.url,i=ie?.find(n=>n.slug===l||n.slug===t.url);if(a)u({meta_title:a.meta_title||"",meta_description:a.meta_description||"",keywords:a.keywords||[],og_image:a.og_image||"",noindex:a.noindex||!1,h1:a.h1||"",hero_subtitle:a.hero_subtitle||"",hero_intro:a.hero_intro||"",hero_image:a.hero_image||"",section_1_title:a.section_1_title||"",section_1_content:a.section_1_content||"",section_2_title:a.section_2_title||"",section_2_content:a.section_2_content||"",section_3_title:a.section_3_title||"",section_3_content:a.section_3_content||"",body_content:a.body_content||"",cta_text:a.cta_text||"",cta_button_text:a.cta_button_text||"",cta_button_url:a.cta_button_url||"",faqs:a.faqs||[],featured_image:a.featured_image||"",is_published:a.is_published??!0});else if(i){const n=Array.isArray(i.h2_sections)?i.h2_sections:[],H=Array.isArray(i.faqs)?i.faqs:[];u({meta_title:i.meta_title||i.title||"",meta_description:i.meta_description||"",keywords:[],og_image:"",noindex:!(i.is_indexed??!0),h1:i.h1||i.title||"",hero_subtitle:i.page_intro||"",hero_intro:"",hero_image:"",section_1_title:n[0]?.heading||"",section_1_content:n[0]?.body||"",section_2_title:n[1]?.heading||"",section_2_content:n[1]?.body||"",section_3_title:n[2]?.heading||"",section_3_content:n[2]?.body||"",body_content:i.content||"",cta_text:"",cta_button_text:"",cta_button_url:"",faqs:H,featured_image:"",is_published:!0})}else{const n=we(t.type,t.data,t.url);u({meta_title:n.h1||t.name,meta_description:n.hero_subtitle||"",keywords:[],og_image:"",noindex:!1,h1:n.h1||t.name,hero_subtitle:n.hero_subtitle||"",hero_intro:n.hero_intro||"",hero_image:n.hero_image||"",section_1_title:n.section_1_title||"",section_1_content:n.section_1_content||"",section_2_title:n.section_2_title||"",section_2_content:n.section_2_content||"",section_3_title:"",section_3_content:"",body_content:n.body_content||"",cta_text:n.cta_text||"",cta_button_text:"",cta_button_url:"",faqs:n.faqs||[],featured_image:n.featured_image||"",is_published:!0})}R(!0)},Ee=async()=>{if(p)try{await B.mutateAsync({page_slug:p.url,page_type:p.type,meta_title:s.meta_title||null,meta_description:s.meta_description||null,keywords:s.keywords||null,og_image:s.og_image||null,noindex:s.noindex||!1,h1:s.h1||null,hero_subtitle:s.hero_subtitle||null,hero_intro:s.hero_intro||null,hero_image:s.hero_image||null,section_1_title:s.section_1_title||null,section_1_content:s.section_1_content||null,section_2_title:s.section_2_title||null,section_2_content:s.section_2_content||null,section_3_title:s.section_3_title||null,section_3_content:s.section_3_content||null,body_content:s.body_content||null,cta_text:s.cta_text||null,cta_button_text:s.cta_button_text||null,cta_button_url:s.cta_button_url||null,faqs:s.faqs||null,featured_image:s.featured_image||null,is_published:s.is_published??!0}),R(!1),ne(null)}catch{}},Me=async()=>{if(!o.pageType){b.error("Please select a page type");return}let t="",a="",l=o.pageType;switch(o.pageType){case"state":{const i=M?.find(n=>n.id===o.stateId);if(!i){b.error("Please select an emirate");return}t=`/${i.slug}`,a=i.name;break}case"city":{const i=$?.find(n=>n.id===o.cityId);if(!i){b.error("Please select a city");return}t=`/${i.state?.slug}/${i.slug}`,a=`${i.name}, ${i.state?.abbreviation||i.state?.name||""}`;break}case"treatment":{const i=k?.find(n=>n.id===o.treatmentId);if(!i){b.error("Please select a treatment");return}t=`/services/${i.slug}`,a=i.name;break}case"service-location":{const i=$?.find(H=>H.id===o.cityId),n=k?.find(H=>H.id===o.treatmentId);if(!i||!n){b.error("Please select both city and treatment");return}t=`/${i.state?.slug}/${i.slug}/${n.slug}`,a=`${n.name} in ${i.name}`;break}case"custom":{if(!o.customSlug||!o.customName){b.error("Please enter page name and slug");return}t=`/${o.customSlug}`,a=o.customName,l="static";break}}try{const i=we(l,null,t);await B.mutateAsync({page_slug:t,page_type:l,h1:a,hero_subtitle:i.hero_subtitle||"",is_published:!0}),b.success("Page created successfully"),U(!1),S({pageType:"",stateId:"",cityId:"",treatmentId:"",customSlug:"",customName:""})}catch{}},le=()=>{u({...s,faqs:[...s.faqs||[],{question:"",answer:""}]})},ce=(t,a,l)=>{const i=[...s.faqs||[]];i[t]={...i[t],[a]:l},u({...s,faqs:i})},Be=t=>{const a=[...s.faqs||[]];a.splice(t,1),u({...s,faqs:a})},oe=(t,a)=>{const l=[...s.faqs||[]],i=a==="up"?t-1:t+1;i<0||i>=l.length||([l[t],l[i]]=[l[i],l[t]],u({...s,faqs:l}))},De=t=>{switch(t){case"state":return e.jsx(ee,{className:"h-4 w-4"});case"city":return e.jsx(G,{className:"h-4 w-4"});case"treatment":return e.jsx(A,{className:"h-4 w-4"});case"service-location":return e.jsx(A,{className:"h-4 w-4"});case"clinic":return e.jsx(me,{className:"h-4 w-4"});case"blog":return e.jsx(fe,{className:"h-4 w-4"});default:return e.jsx(W,{className:"h-4 w-4"})}},de=t=>{switch(t){case"state":return"bg-orange-100 text-orange-700 border-orange-200";case"city":return"bg-blue-100 text-blue-700 border-blue-200";case"treatment":return"bg-purple-100 text-purple-700 border-purple-200";case"service-location":return"bg-indigo-100 text-indigo-700 border-indigo-200";case"clinic":return"bg-teal-100 text-teal-700 border-teal-200";case"blog":return"bg-amber-100 text-amber-700 border-amber-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},He=t=>{if(ae?.some(n=>n.page_slug===t))return"cms";const l=t.startsWith("/")?t.slice(1):t;return ie?.some(n=>n.slug===l||n.slug===t)?"seo":null};return Ie?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-display font-bold text-foreground",children:"Page Manager (CMS)"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage all website pages, content, and SEO settings"})]}),e.jsxs(g,{onClick:()=>U(!0),children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Add Custom Page"]})]}),e.jsx("div",{className:"grid grid-cols-4 lg:grid-cols-8 gap-3",children:[{key:"all",label:"All",icon:Ve,color:"bg-primary/10 text-primary"},{key:"static",label:"Static",icon:W,color:"bg-muted text-muted-foreground"},{key:"state",label:"Emirates",icon:ee,color:"bg-orange-100 text-orange-600"},{key:"city",label:"Cities",icon:G,color:"bg-blue-100 text-blue-600"},{key:"treatment",label:"Services",icon:A,color:"bg-purple-100 text-purple-600"},{key:"service-location",label:"Svc+Loc",icon:A,color:"bg-indigo-100 text-indigo-600"},{key:"clinic",label:"Clinics",icon:me,color:"bg-teal-100 text-teal-600"},{key:"blog",label:"Blog",icon:fe,color:"bg-amber-100 text-amber-600"}].map(t=>e.jsx(Y,{className:`card-modern cursor-pointer hover:border-primary/50 transition-colors ${c.type===t.key?"border-primary ring-1 ring-primary":""}`,onClick:()=>{m({...c,type:t.key}),r(50)},children:e.jsxs(J,{className:"p-3 flex items-center gap-3",children:[e.jsx("div",{className:`h-10 w-10 rounded-xl ${t.color} flex items-center justify-center`,children:e.jsx(t.icon,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold",children:v[t.key]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.label})]})]})},t.key))}),e.jsx(Y,{className:"card-modern",children:e.jsx(J,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[e.jsx(ue,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(j,{placeholder:"Search pages by name or URL...",value:c.search,onChange:t=>m({...c,search:t.target.value}),className:"pl-10"})]}),e.jsxs(I,{value:c.type,onValueChange:t=>{m({...c,type:t}),r(50)},children:[e.jsx(L,{className:"w-56",children:e.jsx(F,{placeholder:"All Types"})}),e.jsxs(E,{children:[e.jsxs(h,{value:"all",children:["All Types (",v.all,")"]}),e.jsxs(h,{value:"static",children:["Static Pages (",v.static,")"]}),e.jsxs(h,{value:"state",children:["Emirates (",v.state,")"]}),e.jsxs(h,{value:"city",children:["City Pages (",v.city,")"]}),e.jsxs(h,{value:"treatment",children:["Service Pages (",v.treatment,")"]}),e.jsxs(h,{value:"service-location",children:["Service+Location (",v["service-location"],")"]}),e.jsxs(h,{value:"clinic",children:["Clinic Pages (",v.clinic,")"]}),e.jsxs(h,{value:"blog",children:["Blog Posts (",v.blog,")"]})]})]}),e.jsxs(I,{value:c.stateId,onValueChange:t=>{m({...c,stateId:t}),r(50)},children:[e.jsx(L,{className:"w-52",children:e.jsx(F,{placeholder:"All Emirates"})}),e.jsxs(E,{children:[e.jsx(h,{value:"all",children:"All Emirates"}),M?.map(t=>e.jsx(h,{value:t.id,children:t.name},t.id))]})]})]})})}),e.jsxs(Y,{className:"card-modern",children:[e.jsx(Ye,{children:e.jsxs(Je,{className:"text-lg",children:[c.type==="all"?"All Pages":`${c.type.charAt(0).toUpperCase()+c.type.slice(1)} Pages`,e.jsxs("span",{className:"text-muted-foreground font-normal ml-2",children:["(",D.length,")"]})]})}),e.jsxs(J,{className:"p-0",children:[e.jsxs(et,{children:[e.jsx(tt,{children:e.jsxs(Z,{children:[e.jsx(q,{className:"w-12"}),e.jsx(q,{children:"Page Name"}),e.jsx(q,{children:"Type"}),e.jsx(q,{children:"URL"}),e.jsx(q,{children:"Status"}),e.jsx(q,{children:"Content"}),e.jsx(q,{className:"text-right",children:"Actions"})]})}),e.jsxs(st,{children:[D.slice(0,x).map(t=>{const a=He(t.url);return e.jsxs(Z,{children:[e.jsx(w,{children:e.jsx("div",{className:"w-8 h-8 rounded-lg bg-muted flex items-center justify-center",children:De(t.type)})}),e.jsx(w,{children:e.jsx("div",{className:"font-medium",children:t.name})}),e.jsx(w,{children:e.jsx(T,{variant:"outline",className:`capitalize ${de(t.type)}`,children:t.type==="service-location"?"Svc+Loc":t.type})}),e.jsx(w,{className:"text-muted-foreground text-sm max-w-xs",children:e.jsx("code",{className:"text-xs truncate block",children:t.url})}),e.jsx(w,{children:t.published?e.jsxs(T,{className:"bg-primary text-primary-foreground",children:[e.jsx(at,{className:"h-3 w-3 mr-1"}),"Published"]}):e.jsxs(T,{variant:"secondary",children:[e.jsx(it,{className:"h-3 w-3 mr-1"}),"Draft"]})}),e.jsx(w,{children:a==="cms"?e.jsx(T,{variant:"outline",className:"text-emerald-600 border-emerald-200 bg-emerald-50",children:"CMS Content"}):a==="seo"?e.jsx(T,{variant:"outline",className:"text-blue-600 border-blue-200 bg-blue-50",children:"Live Content"}):e.jsx(T,{variant:"outline",className:"text-muted-foreground",children:"Default"})}),e.jsx(w,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>Fe(t),children:e.jsx(ve,{className:"h-4 w-4"})}),e.jsx(g,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",children:e.jsx(nt,{className:"h-4 w-4"})})})]})})]},t.id)}),D.length===0&&e.jsx(Z,{children:e.jsxs(w,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:[e.jsx(W,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No pages found"})]})})]})]}),D.length>x&&e.jsx("div",{className:"p-4 text-center border-t",children:e.jsx(g,{variant:"outline",onClick:Le,disabled:N,children:N?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"h-4 w-4 mr-2 animate-spin"}),"Loading..."]}):e.jsxs(e.Fragment,{children:["Load More (",D.length-x," remaining)"]})})})]})]}),e.jsx(xe,{open:Pe,onOpenChange:U,children:e.jsxs(pe,{className:"max-w-lg",children:[e.jsx(ge,{children:e.jsxs(_e,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5"}),"Add Custom Page"]})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Page Type"}),e.jsxs(I,{value:o.pageType,onValueChange:t=>S({...o,pageType:t}),children:[e.jsx(L,{children:e.jsx(F,{placeholder:"Select page type..."})}),e.jsxs(E,{children:[e.jsx(h,{value:"state",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Emirate Page"]})}),e.jsx(h,{value:"city",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),"City Page"]})}),e.jsx(h,{value:"treatment",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),"Service/Treatment Page"]})}),e.jsx(h,{value:"service-location",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),"Service + Location Page"]})}),e.jsx(h,{value:"custom",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),"Custom Static Page"]})})]})]})]}),o.pageType==="state"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Select Emirate"}),e.jsxs(I,{value:o.stateId,onValueChange:t=>S({...o,stateId:t}),children:[e.jsx(L,{children:e.jsx(F,{placeholder:"Choose an emirate..."})}),e.jsx(E,{children:M?.map(t=>e.jsxs(h,{value:t.id,children:[t.name," (",t.abbreviation,")"]},t.id))})]})]}),(o.pageType==="city"||o.pageType==="service-location")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Select City"}),e.jsxs(I,{value:o.cityId,onValueChange:t=>S({...o,cityId:t}),children:[e.jsx(L,{children:e.jsx(F,{placeholder:"Choose a city..."})}),e.jsx(E,{children:$?.map(t=>e.jsxs(h,{value:t.id,children:[t.name,", ",t.state?.abbreviation||t.state?.name||""]},t.id))})]})]}),(o.pageType==="treatment"||o.pageType==="service-location")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Select Service/Treatment"}),e.jsxs(I,{value:o.treatmentId,onValueChange:t=>S({...o,treatmentId:t}),children:[e.jsx(L,{children:e.jsx(F,{placeholder:"Choose a service..."})}),e.jsx(E,{children:k?.map(t=>e.jsx(h,{value:t.id,children:t.name},t.id))})]})]}),o.pageType==="custom"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Page Name"}),e.jsx(j,{value:o.customName,onChange:t=>S({...o,customName:t.target.value}),placeholder:"e.g., Our Team"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"URL Slug"}),e.jsx(j,{value:o.customSlug,onChange:t=>S({...o,customSlug:t.target.value.toLowerCase().replace(/\s+/g,"-")}),placeholder:"e.g., our-team"})]})]})]}),e.jsxs(Re,{children:[e.jsx(g,{variant:"outline",onClick:()=>U(!1),children:"Cancel"}),e.jsxs(g,{onClick:Me,disabled:B.isPending,children:[B.isPending?e.jsx(he,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Create Page"]})]})]})}),e.jsx(xe,{open:ke,onOpenChange:R,children:e.jsxs(pe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ge,{children:e.jsxs(_e,{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5"}),"Edit Page: ",p?.name]})}),e.jsx("div",{className:"p-3 rounded-xl bg-muted/50 mb-4",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["URL: ",e.jsx("code",{className:"text-primary font-mono",children:p?.url})]})}),e.jsxs(Xe,{value:Ae,onValueChange:re,className:"w-full",children:[e.jsxs(Ze,{className:"grid w-full grid-cols-5 mb-4",children:[e.jsxs(O,{value:"seo",className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-4 w-4"}),"SEO"]}),e.jsxs(O,{value:"hero",className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4"}),"Hero"]}),e.jsxs(O,{value:"content",className:"flex items-center gap-2",children:[e.jsx(rt,{className:"h-4 w-4"}),"Content"]}),e.jsxs(O,{value:"faqs",className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4"}),"FAQs"]}),e.jsxs(O,{value:"media",className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4"}),"Media"]})]}),e.jsxs(z,{value:"seo",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4 text-muted-foreground"}),"SEO Title (Browser Tab)"]}),e.jsx(j,{value:s.meta_title||"",onChange:t=>u({...s,meta_title:t.target.value}),placeholder:"Page title for SEO (max 60 chars)"}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Appears in browser tab and search results"}),e.jsxs("span",{className:(s.meta_title?.length||0)>60?"text-destructive":"text-muted-foreground",children:[s.meta_title?.length||0,"/60"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Meta Description"}),e.jsx(y,{value:s.meta_description||"",onChange:t=>u({...s,meta_description:t.target.value}),placeholder:"Meta description for SEO (max 160 chars)",rows:3}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Appears in search engine results"}),e.jsxs("span",{className:(s.meta_description?.length||0)>160?"text-destructive":"text-muted-foreground",children:[s.meta_description?.length||0,"/160"]})]})]}),e.jsxs("div",{className:"p-4 rounded-xl border bg-card",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Google Preview"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-blue-600 text-lg hover:underline cursor-pointer truncate",children:s.meta_title||s.h1||"Page Title"}),e.jsxs("p",{className:"text-green-700 text-sm truncate",children:["appointpanda.ae",p?.url]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.meta_description||"No meta description set..."})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[e.jsxs("div",{children:[e.jsx(d,{className:"text-sm",children:"No Index"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Hide from search engines"})]}),e.jsx(X,{checked:s.noindex||!1,onCheckedChange:t=>u({...s,noindex:t})})]})]}),e.jsxs(z,{value:"hero",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"H1 Heading (Main Title)"}),e.jsx(j,{value:s.h1||"",onChange:t=>u({...s,h1:t.target.value}),placeholder:"Main page heading visible to users"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"The main visible heading on the page"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Hero Subtitle"}),e.jsx(y,{value:s.hero_subtitle||"",onChange:t=>u({...s,hero_subtitle:t.target.value}),placeholder:"Subtitle or tagline shown below the main heading...",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Introduction Text"}),e.jsx(y,{value:s.hero_intro||"",onChange:t=>u({...s,hero_intro:t.target.value}),placeholder:"Brief introduction or summary shown at the top of the page...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Hero Image URL"}),e.jsx(j,{value:s.hero_image||"",onChange:t=>u({...s,hero_image:t.target.value}),placeholder:"https://example.com/hero-image.jpg"})]})]}),e.jsxs(z,{value:"content",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Section 1 Title"}),e.jsx(j,{value:s.section_1_title||"",onChange:t=>u({...s,section_1_title:t.target.value}),placeholder:"e.g., Why Choose Us"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Section 2 Title"}),e.jsx(j,{value:s.section_2_title||"",onChange:t=>u({...s,section_2_title:t.target.value}),placeholder:"e.g., Our Services"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Section 1 Content"}),e.jsx(y,{value:s.section_1_content||"",onChange:t=>u({...s,section_1_content:t.target.value}),placeholder:"Content for section 1...",rows:4})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Section 2 Content"}),e.jsx(y,{value:s.section_2_content||"",onChange:t=>u({...s,section_2_content:t.target.value}),placeholder:"Content for section 2...",rows:4})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Section 3 Title"}),e.jsx(j,{value:s.section_3_title||"",onChange:t=>u({...s,section_3_title:t.target.value}),placeholder:"e.g., Additional Info"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Section 3 Content"}),e.jsx(y,{value:s.section_3_content||"",onChange:t=>u({...s,section_3_content:t.target.value}),placeholder:"Content for section 3...",rows:3})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Main Body Content"}),e.jsx(y,{value:s.body_content||"",onChange:t=>u({...s,body_content:t.target.value}),placeholder:"Main page content. Supports Markdown formatting...",rows:8,className:"font-mono text-sm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Call-to-Action Text"}),e.jsx(y,{value:s.cta_text||"",onChange:t=>u({...s,cta_text:t.target.value}),placeholder:"Call-to-action or footer content...",rows:2})]})]}),e.jsxs(z,{value:"faqs",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(d,{className:"text-base font-semibold",children:"Frequently Asked Questions"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(s.faqs||[]).length," FAQ(s) â€” Add, edit, reorder, or remove"]})]}),e.jsxs(g,{onClick:le,size:"sm",children:[e.jsx(Q,{className:"h-4 w-4 mr-1"}),"Add FAQ"]})]}),(s.faqs||[]).length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-xl",children:[e.jsx(be,{className:"h-10 w-10 mx-auto mb-2 opacity-40"}),e.jsx("p",{children:'No FAQs yet. Click "Add FAQ" to create one.'})]}),e.jsx("div",{className:"space-y-4",children:(s.faqs||[]).map((t,a)=>e.jsxs("div",{className:"p-4 rounded-xl border bg-card space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-semibold text-muted-foreground",children:["FAQ #",a+1]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(g,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>oe(a,"up"),disabled:a===0,children:e.jsx(lt,{className:"h-3 w-3"})}),e.jsx(g,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>oe(a,"down"),disabled:a===(s.faqs||[]).length-1,children:e.jsx(ct,{className:"h-3 w-3"})}),e.jsx(g,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>Be(a),children:e.jsx(ot,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{className:"text-sm",children:"Question"}),e.jsx(j,{value:t.question,onChange:l=>ce(a,"question",l.target.value),placeholder:"Enter the question..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{className:"text-sm",children:"Answer"}),e.jsx(y,{value:t.answer,onChange:l=>ce(a,"answer",l.target.value),placeholder:"Enter the answer...",rows:3})]})]},a))}),(s.faqs||[]).length>0&&e.jsxs(g,{onClick:le,variant:"outline",className:"w-full",children:[e.jsx(Q,{className:"h-4 w-4 mr-1"}),"Add Another FAQ"]})]}),e.jsxs(z,{value:"media",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4 text-muted-foreground"}),"Featured Image URL"]}),e.jsx(j,{value:s.featured_image||"",onChange:t=>u({...s,featured_image:t.target.value}),placeholder:"https://example.com/image.jpg"}),s.featured_image&&e.jsx("div",{className:"mt-2 rounded-xl overflow-hidden border",children:e.jsx("img",{src:s.featured_image,alt:"Featured",className:"w-full h-48 object-cover",onError:t=>{t.target.style.display="none"}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"OG Image URL (Social Share)"}),e.jsx(j,{value:s.og_image||"",onChange:t=>u({...s,og_image:t.target.value}),placeholder:"https://example.com/og-image.jpg"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 rounded-xl border bg-muted/30",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-background",children:[e.jsxs("div",{children:[e.jsx(d,{className:"text-sm",children:"Published"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Make page visible"})]}),e.jsx(X,{checked:s.is_published??!0,onCheckedChange:t=>u({...s,is_published:t})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-background",children:[e.jsxs("div",{children:[e.jsx(d,{className:"text-sm",children:"No Index (SEO)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Hide from search"})]}),e.jsx(X,{checked:s.noindex||!1,onCheckedChange:t=>u({...s,noindex:t})})]})]}),e.jsxs("div",{className:"p-4 rounded-xl border bg-muted/30",children:[e.jsxs("p",{className:"text-sm font-medium mb-2",children:["Page Type: ",e.jsx(T,{variant:"outline",className:`ml-2 capitalize ${de(p?.type||"")}`,children:p?.type})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[p?.type==="static"&&"Core website page - content fully customizable",p?.type==="state"&&"Emirate location page - shows cities in this emirate",p?.type==="city"&&"City location page - shows clinics in this city",p?.type==="treatment"&&"Treatment/service page - describes this dental service",p?.type==="service-location"&&'Service in Location - e.g., "Teeth Whitening in Dubai Marina"',p?.type==="clinic"&&"Clinic profile page - supplements clinic data",p?.type==="blog"&&"Blog post - edit in Blog Manager for full control"]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(g,{variant:"outline",onClick:()=>R(!1),children:"Cancel"}),e.jsxs(g,{onClick:Ee,disabled:B.isPending,children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})})]})}export{Ut as default};
