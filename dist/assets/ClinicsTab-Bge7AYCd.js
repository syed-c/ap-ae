import{b as Q,c as H,u as _e,j as e}from"./chunk-CPh6voF3.js";import{r as c}from"./chunk-CffrGP6S.js";import{f as ws,s as f,b,af as Ss,a9 as G,bc as De,B as j,aa as z,ab as X,ac as K,a as n,I as g,a2 as C,a3 as y,a5 as w,a6 as S,a7 as l,w as Ae,U as ne,o as bs,n as re,G as ke,p as Ie,b7 as Te,x as _s,P as Ds,A as As,i as E,D as ks,h as Is,j as Ts,V as k,W as Pe,bC as Ps,bA as Vs,H as Es,F as Fs,X as qs,L as Ve,y as Ee,ad as Ls,S as Us,C as Os}from"./index-DflORfjh.js";import{u as Ms,a as Rs,b as Bs,c as Gs,d as zs}from"./chunk-Bt-k3HAA.js";import{c as W}from"./chunk-BSjc5zjM.js";import{k as Xs,b as Ks}from"./chunk-DlLtMEml.js";import{u as Qs}from"./chunk-LOsYkUiN.js";import{C as T,d as P}from"./chunk-Dwq_v72W.js";import{S as ce}from"./chunk-DfjE-bP6.js";import{A as Fe,h as Hs,a as qe,b as Le,c as Ue,d as Oe,e as Me,f as Re,g as Be}from"./chunk--UsBvJF_.js";import{T as Ge,a as ze,b as L,c as p,d as Xe,e as m}from"./chunk-NLs5Ye4A.js";import{T as Ws,a as $s,b as Ke,c as Qe}from"./chunk-k8HiDHrE.js";import{P as He}from"./chunk-HAC-i_a2.js";import{R as Ys}from"./chunk-BOvFDp2b.js";import{E as Zs}from"./chunk-CzCas5F3.js";import{S as Js}from"./chunk-B51FxpoB.js";import{S as ea}from"./chunk-CTiJdJKN.js";import{U as sa}from"./chunk-B-oTuC6Z.js";import{U as aa}from"./chunk-D2X27E5n.js";import{T as ia}from"./chunk-BRVan1jG.js";import{F as ta}from"./chunk-BaL04tya.js";import"./chunk-B8auUmee.js";import"./chunk-DK8nT4cj.js";import"./chunk-Drd-rt-S.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=ws("ShieldX",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]]);function na(){const t=Q();return H({mutationFn:async({id:i,isPaused:a})=>{const{data:u}=await f.from("clinics").select("*").eq("id",i).single(),{error:x}=await f.from("clinics").update({is_active:!a,updated_at:new Date().toISOString()}).eq("id",i);if(x)throw x;await W({action:a?"PAUSE_CLINIC":"UNPAUSE_CLINIC",entityType:"clinic",entityId:i,oldValues:u,newValues:{is_active:!a}})},onSuccess:(i,{isPaused:a})=>{t.invalidateQueries({queryKey:["admin-clinics"]}),b.success(a?"Clinic paused":"Clinic reactivated")},onError:i=>b.error("Failed: "+i.message)})}function ra(){const t=Q();return H({mutationFn:async i=>{const{data:a}=await f.from("clinics").select("*").eq("id",i).single(),{error:u}=await f.from("clinics").delete().eq("id",i);if(u)throw u;await W({action:"DELETE",entityType:"clinic",entityId:i,oldValues:a})},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-clinics"]}),b.success("Clinic deleted")},onError:i=>b.error("Failed: "+i.message)})}function ca(){const t=Q();return H({mutationFn:async({id:i,verified:a})=>{const{data:u}=await f.from("clinics").select("*").eq("id",i).single(),{error:x}=await f.from("clinics").update({verification_status:a?"verified":"unverified",updated_at:new Date().toISOString()}).eq("id",i);if(x)throw x;await W({action:a?"VERIFY_CLINIC":"UNVERIFY_CLINIC",entityType:"clinic",entityId:i,oldValues:u,newValues:{verification_status:a?"verified":"unverified"}})},onSuccess:(i,{verified:a})=>{t.invalidateQueries({queryKey:["admin-clinics"]}),b.success(a?"Clinic verified":"Verification revoked")},onError:i=>b.error("Failed: "+i.message)})}function da(){const t=Q();return H({mutationFn:async({id:i,userId:a})=>{const{data:u}=await f.from("clinics").select("*").eq("id",i).single(),{error:x}=await f.from("clinics").update({claim_status:a?"claimed":"unclaimed",claimed_by:a,claimed_at:a?new Date().toISOString():null,updated_at:new Date().toISOString()}).eq("id",i);if(x)throw x;if(a){const{data:$}=await f.from("user_roles").select("id").eq("user_id",a).eq("role","dentist").maybeSingle();$||await f.from("user_roles").insert({user_id:a,role:"dentist"})}await W({action:a?"ASSIGN_CLAIM":"REVOKE_CLAIM",entityType:"clinic",entityId:i,oldValues:u,newValues:{claim_status:a?"claimed":"unclaimed",claimed_by:a}})},onSuccess:(i,{userId:a})=>{t.invalidateQueries({queryKey:["admin-clinics"]}),t.invalidateQueries({queryKey:["admin-users"]}),b.success(a?"Clinic assigned to user":"Claim revoked")},onError:i=>b.error("Failed: "+i.message)})}const oa=[100,200,300,400,500],xa=[50,100,200,500,1e3];function Oa(){const[t,i]=c.useState({search:"",verificationStatus:"",claimStatus:"",source:"",cityId:""}),[a,u]=c.useState(1),[x,$]=c.useState(100),{data:I,isLoading:We,refetch:de}=Ms({search:t.search,verificationStatus:t.verificationStatus||void 0,claimStatus:t.claimStatus||void 0,source:t.source||void 0,cityId:t.cityId||void 0}),{data:Y,refetch:$e}=Rs(),{data:Z}=Xs();Ss();const[Ye,Ze]=c.useState(""),{data:Je}=Ks(Ye||void 0),{data:oe=0}=_e({queryKey:["total-clinic-count"],queryFn:async()=>{const{count:s}=await f.from("clinics").select("*",{count:"exact",head:!0});return s||0}}),{data:es=0}=_e({queryKey:["total-dentist-count"],queryFn:async()=>{const{count:s}=await f.from("dentists").select("*",{count:"exact",head:!0});return s||0}}),J=Bs(),xe=na(),ss=ra(),he=ca(),me=da(),ue=Gs(),je=zs(),{data:as}=Qs(),[is,ee]=c.useState(!1),[ts,ge]=c.useState(!1),[ls,pe]=c.useState(!1),[ns,se]=c.useState(!1),[M,R]=c.useState(null),[d,_]=c.useState({}),[r,D]=c.useState({name:"",slug:"",phone:"",email:"",address:"",city_id:"",area_id:"",website:""}),[v,F]=c.useState({name:"",slug:"",title:"",clinic_id:"",experience_years:0,bio:""}),[B,fe]=c.useState(""),[rs,ve]=c.useState(!1),[A,U]=c.useState(new Set),[ae,cs]=c.useState(200),[Ne,Ce]=c.useState(!1),[ds,ie]=c.useState(!1),os=s=>{U(h=>{const o=new Set(h);return o.has(s)?o.delete(s):o.add(s),o})},xs=()=>{A.size===q.length?U(new Set):U(new Set(q.map(s=>s.id)))},hs=()=>{U(new Set)},ms=async()=>{if(A.size===0)return;Ce(!0),ie(!1);const s=25,h=Array.from(A),o=[];for(let N=0;N<h.length;N+=s)o.push(h.slice(N,N+s));let we=0,le=0;try{for(let N=0;N<o.length;N++){const{data:Se,error:be}=await f.functions.invoke("batch-enrich-clinics",{body:{action:"generate_bulk_descriptions",clinicIds:o[N],wordCount:ae}});if(be)throw be;we+=Se?.processed||0,le+=Se?.errors||0,await new Promise(ys=>setTimeout(ys,150))}b.success(`Generated descriptions for ${we} clinics`,{description:le>0?`${le} clinics had errors`:void 0}),U(new Set),de()}catch(N){console.error("Bulk generation error:",N),b.error("Failed to generate descriptions")}finally{Ce(!1)}},ye=as?.filter(s=>{if(!B)return!0;const h=B.toLowerCase();return s.email?.toLowerCase().includes(h)||s.full_name?.toLowerCase().includes(h)})||[],us=s=>{R(s),fe(""),se(!0)},js=async s=>{if(M){ve(!0);try{await me.mutateAsync({id:M.id,userId:s}),se(!1),R(null)}catch{}finally{ve(!1)}}},te=I?.length||0,V=Math.ceil(te/x),q=I?.slice((a-1)*x,a*x)||[],gs=s=>{$(parseInt(s)),u(1)},O=s=>{i(s),u(1)},ps=s=>{R(s),_({name:s.name,email:s.email||"",phone:s.phone||"",address:s.address||"",is_featured:s.is_featured,is_suspended:s.is_suspended,seo_visible:s.seo_visible,verification_status:s.verification_status}),ee(!0)},fs=async()=>{await J.mutateAsync({id:M.id,updates:d}),ee(!1),R(null)},vs=async()=>{const s=r.name.toLowerCase().replace(/\s+/g,"-")+"-"+Date.now().toString(36);await ue.mutateAsync({...r,slug:s}),ge(!1),D({name:"",slug:"",phone:"",email:"",address:"",city_id:"",area_id:"",website:""})},Ns=async()=>{const s=v.name.toLowerCase().replace(/\s+/g,"-")+"-"+Date.now().toString(36);await je.mutateAsync({...v,slug:s,experience_years:v.experience_years||null}),pe(!1),F({name:"",slug:"",title:"",clinic_id:"",experience_years:0,bio:""})},Cs=s=>{switch(s){case"verified":return e.jsxs(E,{className:"bg-primary text-primary-foreground",children:[e.jsx(Os,{className:"h-3 w-3 mr-1"}),"Verified"]});case"pending":return e.jsx(E,{variant:"outline",className:"text-gold border-gold",children:"Pending"});case"expired":return e.jsx(E,{variant:"destructive",children:"Expired"});default:return e.jsx(E,{variant:"secondary",children:"Unverified"})}};return We?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-display font-bold text-foreground",children:"Dental Offices"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage clinics and dentists"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(G,{open:ts,onOpenChange:ge,children:[e.jsx(De,{asChild:!0,children:e.jsxs(j,{onClick:()=>D({name:"",slug:"",phone:"",email:"",address:"",city_id:Z?.[0]?.id||"",area_id:"",website:""}),children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Add Clinic"]})}),e.jsxs(z,{children:[e.jsx(X,{children:e.jsx(K,{children:"Add Clinic"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Name"}),e.jsx(g,{value:r.name,onChange:s=>D({...r,name:s.target.value}),placeholder:"Clinic name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"City"}),e.jsxs(C,{value:r.city_id,onValueChange:s=>{D({...r,city_id:s,area_id:""}),Ze(s)},children:[e.jsx(y,{children:e.jsx(w,{placeholder:"Select city"})}),e.jsx(S,{children:Z?.map(s=>e.jsx(l,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Area"}),e.jsxs(C,{value:r.area_id,onValueChange:s=>D({...r,area_id:s}),disabled:!r.city_id,children:[e.jsx(y,{children:e.jsx(w,{placeholder:"Select area"})}),e.jsx(S,{children:Je?.map(s=>e.jsx(l,{value:s.id,children:s.name},s.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Phone"}),e.jsx(g,{value:r.phone,onChange:s=>D({...r,phone:s.target.value}),placeholder:"+971 4 XXX XXXX"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Email"}),e.jsx(g,{value:r.email,onChange:s=>D({...r,email:s.target.value}),placeholder:"clinic@email.com"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Address"}),e.jsx(g,{value:r.address,onChange:s=>D({...r,address:s.target.value}),placeholder:"Full address"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Website"}),e.jsx(g,{value:r.website,onChange:s=>D({...r,website:s.target.value}),placeholder:"https://..."})]}),e.jsx(j,{onClick:vs,className:"w-full",disabled:!r.name||ue.isPending,children:"Create Clinic"})]})]})]}),e.jsxs(G,{open:ls,onOpenChange:pe,children:[e.jsx(De,{asChild:!0,children:e.jsxs(j,{variant:"outline",onClick:()=>F({name:"",slug:"",title:"",clinic_id:I?.[0]?.id||"",experience_years:0,bio:""}),children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Add Dentist"]})}),e.jsxs(z,{children:[e.jsx(X,{children:e.jsx(K,{children:"Add Dentist"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Name"}),e.jsx(g,{value:v.name,onChange:s=>F({...v,name:s.target.value}),placeholder:"Dr. Name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Title"}),e.jsx(g,{value:v.title,onChange:s=>F({...v,title:s.target.value}),placeholder:"General Dentist, Orthodontist, etc."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Clinic"}),e.jsxs(C,{value:v.clinic_id,onValueChange:s=>F({...v,clinic_id:s}),children:[e.jsx(y,{children:e.jsx(w,{placeholder:"Select clinic"})}),e.jsx(S,{children:I?.map(s=>e.jsx(l,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Experience (years)"}),e.jsx(g,{type:"number",value:v.experience_years,onChange:s=>F({...v,experience_years:parseInt(s.target.value)||0})})]}),e.jsx(j,{onClick:Ns,className:"w-full",disabled:!v.name||je.isPending,children:"Create Dentist"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsx(T,{className:"card-modern",children:e.jsxs(P,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-primary/10 flex items-center justify-center",children:e.jsx(Ae,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:oe.toLocaleString()}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Clinics"})]})]})}),e.jsx(T,{className:"card-modern",children:e.jsxs(P,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-blue-light flex items-center justify-center",children:e.jsx(ne,{className:"h-6 w-6 text-blue-custom"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:es.toLocaleString()}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Dentists"})]})]})}),e.jsx(T,{className:"card-modern",children:e.jsxs(P,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-teal-light flex items-center justify-center",children:e.jsx(bs,{className:"h-6 w-6 text-teal"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:I?.filter(s=>s.verification_status==="verified").length||0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Verified"})]})]})}),e.jsx(T,{className:"card-modern",children:e.jsxs(P,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-gold-light flex items-center justify-center",children:e.jsx(re,{className:"h-6 w-6 text-gold"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:I?.filter(s=>s.claim_status==="claimed").length||0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Claimed"})]})]})}),e.jsx(T,{className:"card-modern",children:e.jsxs(P,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-purple-light flex items-center justify-center",children:e.jsx(ke,{className:"h-6 w-6 text-purple"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:I?.filter(s=>s.source==="gmb").length||0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"GMB Imported"})]})]})})]}),e.jsx(T,{className:"card-modern",children:e.jsxs(P,{className:"p-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex-1 relative min-w-[200px]",children:[e.jsx(Ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(g,{placeholder:"Search clinics...",value:t.search,onChange:s=>O({...t,search:s.target.value}),className:"pl-10"})]}),e.jsxs(C,{value:t.cityId||"",onValueChange:s=>O({...t,cityId:s==="all"?"":s}),children:[e.jsx(y,{className:"w-48",children:e.jsx(w,{placeholder:"Filter by City"})}),e.jsxs(S,{children:[e.jsx(l,{value:"all",children:"All Cities"}),Z?.map(s=>e.jsx(l,{value:s.id,children:s.name},s.id))]})]}),e.jsxs(C,{value:t.verificationStatus,onValueChange:s=>O({...t,verificationStatus:s==="all"?"":s}),children:[e.jsx(y,{className:"w-40",children:e.jsx(w,{placeholder:"Verification"})}),e.jsxs(S,{children:[e.jsx(l,{value:"all",children:"All Statuses"}),e.jsx(l,{value:"verified",children:"Verified"}),e.jsx(l,{value:"pending",children:"Pending"}),e.jsx(l,{value:"unverified",children:"Unverified"}),e.jsx(l,{value:"expired",children:"Expired"})]})]}),e.jsxs(C,{value:t.claimStatus||"",onValueChange:s=>O({...t,claimStatus:s==="all"?"":s}),children:[e.jsx(y,{className:"w-36",children:e.jsx(w,{placeholder:"Claim Status"})}),e.jsxs(S,{children:[e.jsx(l,{value:"all",children:"All Claims"}),e.jsx(l,{value:"claimed",children:"Claimed"}),e.jsx(l,{value:"unclaimed",children:"Unclaimed"})]})]}),e.jsxs(C,{value:t.source||"",onValueChange:s=>O({...t,source:s==="all"?"":s}),children:[e.jsx(y,{className:"w-32",children:e.jsx(w,{placeholder:"Source"})}),e.jsxs(S,{children:[e.jsx(l,{value:"all",children:"All Sources"}),e.jsx(l,{value:"gmb",children:"GMB Import"}),e.jsx(l,{value:"manual",children:"Manual"})]})]}),e.jsx(j,{variant:"outline",size:"icon",onClick:()=>{de(),$e()},title:"Refresh data",children:e.jsx(Ys,{className:"h-4 w-4"})})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Showing ",I?.length.toLocaleString()||0," of ",oe.toLocaleString()," total clinics"]})]})}),e.jsxs(Ws,{defaultValue:"clinics",className:"space-y-4",children:[e.jsxs($s,{children:[e.jsx(Ke,{value:"clinics",children:"Clinics"}),e.jsx(Ke,{value:"dentists",children:"Dentists"})]}),e.jsxs(Qe,{value:"clinics",children:[e.jsx(T,{className:"card-modern",children:e.jsxs(P,{className:"p-0",children:[e.jsxs(Ge,{children:[e.jsx(ze,{children:e.jsxs(L,{children:[e.jsx(p,{className:"w-12",children:e.jsx(Te,{checked:A.size===q.length&&q.length>0,onCheckedChange:xs})}),e.jsx(p,{children:"Clinic"}),e.jsx(p,{children:"Location"}),e.jsx(p,{children:"Contact"}),e.jsx(p,{children:"Rating"}),e.jsx(p,{children:"Status"}),e.jsx(p,{children:"Claim"}),e.jsx(p,{className:"text-right",children:"Actions"})]})}),e.jsxs(Xe,{children:[q.map(s=>e.jsxs(L,{className:A.has(s.id)?"bg-primary/5":"",children:[e.jsx(m,{children:e.jsx(Te,{checked:A.has(s.id),onCheckedChange:()=>os(s.id)})}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-primary/10 flex items-center justify-center",children:e.jsx(Ae,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.slug})]})]})}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(_s,{className:"h-3 w-3"}),s.city?.name||"-",", ",s.area?.name||"-"]})}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-1 text-sm",children:[s.phone&&e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(Ds,{className:"h-3 w-3"}),s.phone]}),s.email&&e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(As,{className:"h-3 w-3"}),s.email]})]})}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(re,{className:"h-4 w-4 fill-gold text-gold"}),e.jsx("span",{className:"font-medium",children:s.rating?.toFixed(1)||"-"}),e.jsxs("span",{className:"text-muted-foreground text-sm",children:["(",s.review_count||0,")"]})]})}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[Cs(s.verification_status||"unverified"),s.verification_status!=="verified"&&e.jsx(j,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-primary hover:bg-primary/10",onClick:()=>J.mutateAsync({id:s.id,updates:{verification_status:"verified"}}),children:"Verify"})]})}),e.jsx(m,{children:e.jsx(E,{variant:s.claim_status==="claimed"?"default":"outline",children:s.claim_status||"unclaimed"})}),e.jsx(m,{className:"text-right",children:e.jsxs(ks,{children:[e.jsx(Is,{asChild:!0,children:e.jsx(j,{variant:"ghost",size:"sm",children:e.jsx(Zs,{className:"h-4 w-4"})})}),e.jsxs(Ts,{align:"end",className:"w-48",children:[e.jsxs(k,{onClick:()=>window.open(`/clinic/${s.slug}`,"_blank","noopener,noreferrer"),children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"View Public Profile"]}),e.jsxs(k,{onClick:()=>ps(s),children:[e.jsx(Js,{className:"h-4 w-4 mr-2"}),"Edit Details"]}),e.jsx(Pe,{}),s.verification_status==="verified"?e.jsxs(k,{onClick:()=>he.mutate({id:s.id,verified:!1}),className:"text-coral",children:[e.jsx(la,{className:"h-4 w-4 mr-2"}),"Revoke Verification"]}):e.jsxs(k,{onClick:()=>he.mutate({id:s.id,verified:!0}),className:"text-teal",children:[e.jsx(ea,{className:"h-4 w-4 mr-2"}),"Verify Clinic"]}),s.is_active?e.jsxs(k,{onClick:()=>xe.mutate({id:s.id,isPaused:!0}),className:"text-gold",children:[e.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Pause Clinic"]}):e.jsxs(k,{onClick:()=>xe.mutate({id:s.id,isPaused:!1}),className:"text-teal",children:[e.jsx(Vs,{className:"h-4 w-4 mr-2"}),"Reactivate Clinic"]}),s.claim_status==="claimed"?e.jsxs(k,{onClick:()=>me.mutate({id:s.id,userId:null}),children:[e.jsx(sa,{className:"h-4 w-4 mr-2"}),"Revoke Claim"]}):e.jsxs(k,{onClick:()=>us(s),children:[e.jsx(aa,{className:"h-4 w-4 mr-2"}),"Assign Owner"]}),e.jsx(Pe,{}),e.jsxs(Fe,{children:[e.jsx(Hs,{asChild:!0,children:e.jsxs(k,{className:"text-destructive",onSelect:h=>h.preventDefault(),children:[e.jsx(ia,{className:"h-4 w-4 mr-2"}),"Delete Clinic"]})}),e.jsxs(qe,{children:[e.jsxs(Le,{children:[e.jsx(Ue,{children:"Delete Clinic"}),e.jsxs(Oe,{children:['Are you sure you want to delete "',s.name,'"? This action cannot be undone.']})]}),e.jsxs(Me,{children:[e.jsx(Re,{children:"Cancel"}),e.jsx(Be,{onClick:()=>ss.mutate(s.id),className:"bg-destructive text-destructive-foreground",children:"Delete"})]})]})]})]})]})})]},s.id)),q.length===0&&e.jsx(L,{children:e.jsx(m,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No clinics found"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",(a-1)*x+1," - ",Math.min(a*x,te)," of ",te.toLocaleString()," clinics"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Per page:"}),e.jsxs(C,{value:x.toString(),onValueChange:gs,children:[e.jsx(y,{className:"w-20 h-8",children:e.jsx(w,{})}),e.jsx(S,{children:xa.map(s=>e.jsx(l,{value:s.toString(),children:s},s))})]})]})]}),V>1&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(j,{variant:"outline",size:"sm",onClick:()=>u(s=>Math.max(1,s-1)),disabled:a===1,children:[e.jsx(Es,{className:"h-4 w-4 mr-1"}),"Previous"]}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,V)},(s,h)=>{let o;return V<=5||a<=3?o=h+1:a>=V-2?o=V-4+h:o=a-2+h,e.jsx(j,{variant:a===o?"default":"outline",size:"sm",className:"w-8 h-8 p-0",onClick:()=>u(o),children:o},o)})}),e.jsxs(j,{variant:"outline",size:"sm",onClick:()=>u(s=>Math.min(V,s+1)),disabled:a===V,children:["Next",e.jsx(Fs,{className:"h-4 w-4 ml-1"})]})]})]})]})}),A.size>0&&e.jsxs("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 bg-background border border-border shadow-xl rounded-xl p-4 flex items-center gap-4 animate-in slide-in-from-bottom-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(ta,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[A.size," clinics selected"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ready to generate descriptions"})]})]}),e.jsx("div",{className:"h-8 w-px bg-border"}),e.jsxs(j,{variant:"outline",size:"sm",onClick:hs,children:[e.jsx(qs,{className:"h-4 w-4 mr-1"}),"Clear"]}),e.jsxs(C,{value:ae.toString(),onValueChange:s=>cs(parseInt(s)),children:[e.jsx(y,{className:"w-32",children:e.jsx(w,{})}),e.jsx(S,{children:oa.map(s=>e.jsxs(l,{value:s.toString(),children:[s," words"]},s))})]}),e.jsx(j,{onClick:()=>ie(!0),disabled:Ne,className:"gap-2",children:Ne?e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"h-4 w-4 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"h-4 w-4"}),"Generate Descriptions"]})})]})]}),e.jsx(Qe,{value:"dentists",children:e.jsx(T,{className:"card-modern",children:e.jsx(P,{className:"p-0",children:e.jsxs(Ge,{children:[e.jsx(ze,{children:e.jsxs(L,{children:[e.jsx(p,{children:"Dentist"}),e.jsx(p,{children:"Title"}),e.jsx(p,{children:"Experience"}),e.jsx(p,{children:"Rating"}),e.jsx(p,{children:"Status"})]})}),e.jsxs(Xe,{children:[Y?.map(s=>e.jsxs(L,{children:[e.jsx(m,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-light flex items-center justify-center",children:e.jsx(ne,{className:"h-5 w-5 text-blue-custom"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.slug})]})]})}),e.jsx(m,{children:s.title||"-"}),e.jsx(m,{children:s.years_experience?`${s.years_experience} years`:"-"}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(re,{className:"h-4 w-4 fill-gold text-gold"}),e.jsx("span",{children:s.rating?.toFixed(1)||"-"})]})}),e.jsx(m,{children:e.jsx(E,{variant:s.is_active?"default":"secondary",children:s.is_active?"Active":"Inactive"})})]},s.id)),(!Y||Y.length===0)&&e.jsx(L,{children:e.jsx(m,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No dentists found"})})]})]})})})})]}),e.jsx(G,{open:is,onOpenChange:ee,children:e.jsxs(z,{className:"max-w-lg",children:[e.jsx(X,{children:e.jsx(K,{children:"Edit Clinic"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Name"}),e.jsx(g,{value:d.name||"",onChange:s=>_({...d,name:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Email"}),e.jsx(g,{value:d.email||"",onChange:s=>_({...d,email:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Phone"}),e.jsx(g,{value:d.phone||"",onChange:s=>_({...d,phone:s.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Address"}),e.jsx(g,{value:d.address||"",onChange:s=>_({...d,address:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Verification Status"}),e.jsxs(C,{value:d.verification_status,onValueChange:s=>_({...d,verification_status:s}),children:[e.jsx(y,{children:e.jsx(w,{})}),e.jsxs(S,{children:[e.jsx(l,{value:"unverified",children:"Unverified"}),e.jsx(l,{value:"pending",children:"Pending"}),e.jsx(l,{value:"verified",children:"Verified"}),e.jsx(l,{value:"expired",children:"Expired"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{children:"Featured"}),e.jsx(ce,{checked:d.is_featured,onCheckedChange:s=>_({...d,is_featured:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{children:"SEO Visible"}),e.jsx(ce,{checked:d.seo_visible,onCheckedChange:s=>_({...d,seo_visible:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{children:"Suspended"}),e.jsx(ce,{checked:d.is_suspended,onCheckedChange:s=>_({...d,is_suspended:s})})]}),e.jsx(j,{onClick:fs,className:"w-full",disabled:J.isPending,children:"Save Changes"})]})]})}),e.jsx(Fe,{open:ds,onOpenChange:ie,children:e.jsxs(qe,{children:[e.jsxs(Le,{children:[e.jsx(Ue,{children:"Generate Descriptions"}),e.jsxs(Oe,{children:["This will generate AI-powered descriptions (",ae," words each) for ",A.size," selected clinics. Existing descriptions will be overwritten. This action may take a few minutes."]})]}),e.jsxs(Me,{children:[e.jsx(Re,{children:"Cancel"}),e.jsxs(Be,{onClick:ms,children:[e.jsx(Ee,{className:"h-4 w-4 mr-2"}),"Generate Now"]})]})]})}),e.jsx(G,{open:ns,onOpenChange:se,children:e.jsxs(z,{className:"sm:max-w-lg",children:[e.jsxs(X,{children:[e.jsx(K,{children:"Assign Clinic Owner"}),e.jsxs(Ls,{children:['Select a user to assign ownership of "',M?.name,'"']})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(g,{placeholder:"Search users by name or email...",value:B,onChange:s=>fe(s.target.value),className:"pl-10"})]}),e.jsx(Us,{className:"h-[300px] border rounded-lg",children:ye.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:B?"No users found":"Start typing to search users"}):e.jsx("div",{className:"divide-y",children:ye.slice(0,50).map(s=>e.jsxs("div",{className:"p-3 hover:bg-muted/50 cursor-pointer transition-colors flex items-center justify-between",onClick:()=>js(s.id),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(ne,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.full_name||"No Name"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{variant:"outline",className:"text-xs",children:s.roles?.[0]||"patient"}),rs?e.jsx(Ve,{className:"h-4 w-4 animate-spin"}):e.jsx(j,{size:"sm",variant:"outline",className:"h-7 text-xs",children:"Assign"})]})]},s.id))})}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"This will assign the dentist role and link the clinic to the selected user."})]})]})})]})}export{Oa as default};
