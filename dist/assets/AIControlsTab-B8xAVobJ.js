import{b as B,u as C,c as F,j as e}from"./chunk-CPh6voF3.js";import{r as A}from"./chunk-CffrGP6S.js";import{f as H,bz as k,B as u,C as K,y as Q,i as d,a as p,E as S,t as V,o as T,S as P,Q as Z,s as j,b as I,Z as X}from"./index-DflORfjh.js";import{C as i,d as r,a as n,b as l,c as g}from"./chunk-Dwq_v72W.js";import{S as f}from"./chunk-DfjE-bP6.js";import{S as b}from"./chunk-FxOzQZIr.js";import{T as $,a as G,b as N,c as y}from"./chunk-k8HiDHrE.js";import{T as J,a as U,b as M,c as o,d as W,e as m}from"./chunk-NLs5Ye4A.js";import{S as Y,A as ee}from"./chunk-C2VW2Ml6.js";import{T as _}from"./chunk-DbdCK11k.js";import{B as se}from"./chunk-Bl7VVhKV.js";import{T as te}from"./chunk-C2a9wZiP.js";import{D}from"./chunk-CedtSHBb.js";import{C as ae}from"./chunk-CbEmr7WL.js";import{R as ie}from"./chunk-BOvFDp2b.js";import{M as re}from"./chunk-B7d2qnKb.js";import"./chunk-B8auUmee.js";import"./chunk-DK8nT4cj.js";import"./chunk-Drd-rt-S.js";import"./chunk-BEQ5VEiB.js";import"./chunk-yff5u8mE.js";import"./chunk-xExVBHTi.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=H("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);function Ie(){const z=B(),[a,x]=A.useState({reputationAlert:30,seoConfidence:70,automationDelay:5});C({queryKey:["ai-settings"],queryFn:async()=>{const{data:s}=await j.from("global_settings").select("*").eq("key","ai_config").maybeSingle();return s?.value||{}}});const{data:h=[],isLoading:q}=C({queryKey:["ai-decision-logs"],queryFn:async()=>{const{data:s}=await j.from("audit_logs").select("*").or("action.ilike.%ai%,action.ilike.%automated%,action.ilike.%suggestion%").order("created_at",{ascending:!1}).limit(100);return s||[]}}),v=[{id:"reputation_insights",name:"Reputation Insights",description:"AI analyzes review patterns and suggests actions",enabled:!0,category:"reputation"},{id:"review_timing",name:"Smart Review Timing",description:"AI recommends optimal times to request reviews",enabled:!0,category:"reputation"},{id:"feedback_analysis",name:"Feedback Analysis",description:"AI summarizes common themes in negative feedback",enabled:!0,category:"reputation"},{id:"seo_copilot",name:"SEO Copilot",description:"AI suggests SEO improvements and content gaps",enabled:!0,category:"seo"},{id:"ranking_optimizer",name:"Ranking Optimizer",description:"AI adjusts ranking weights based on performance",enabled:!1,category:"seo"},{id:"lead_scorer",name:"Lead Scoring",description:"AI scores and prioritizes incoming leads",enabled:!0,category:"automation"},{id:"duplicate_detector",name:"Duplicate Detection",description:"AI identifies potential duplicate listings",enabled:!0,category:"automation"},{id:"support_categorizer",name:"Support Ticket AI",description:"AI categorizes and suggests responses for tickets",enabled:!0,category:"support"}],[c,L]=A.useState(Object.fromEntries(v.map(s=>[s.id,s.enabled]))),w=F({mutationFn:async()=>{const{error:s}=await j.from("global_settings").upsert({key:"ai_config",value:{modules:c,thresholds:a,updated_at:new Date().toISOString()},description:"AI module configuration and thresholds"},{onConflict:"key"});if(s)throw s},onSuccess:()=>{z.invalidateQueries({queryKey:["ai-settings"]}),I.success("AI settings saved")},onError:s=>{I.error(s.message||"Failed to save settings")}}),E=s=>{L(t=>({...t,[s]:!t[s]}))},O={reputation:re,seo:S,automation:X,support:T},R={reputation:"bg-teal-100 text-teal-700",seo:"bg-blue-100 text-blue-700",automation:"bg-purple-100 text-purple-700",support:"bg-amber-100 text-amber-700"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-display font-bold flex items-center gap-2",children:[e.jsx(k,{className:"h-6 w-6 text-primary"}),"AI Oversight & Controls"]}),e.jsx("p",{className:"text-muted-foreground",children:"Configure AI modules, view decisions, and set thresholds"})]}),e.jsxs(u,{onClick:()=>w.mutate(),disabled:w.isPending,children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Save Configuration"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(i,{className:"bg-gradient-to-br from-teal-50 to-white border-teal-200",children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-teal-100 flex items-center justify-center",children:e.jsx(K,{className:"h-5 w-5 text-teal-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:Object.values(c).filter(Boolean).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active Modules"})]})]})})}),e.jsx(i,{className:"bg-gradient-to-br from-blue-50 to-white border-blue-200",children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-blue-100 flex items-center justify-center",children:e.jsx(ee,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:h.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Decisions Today"})]})]})})}),e.jsx(i,{className:"bg-gradient-to-br from-amber-50 to-white border-amber-200",children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-amber-100 flex items-center justify-center",children:e.jsx(_,{className:"h-5 w-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending Reviews"})]})]})})}),e.jsx(i,{className:"bg-gradient-to-br from-emerald-50 to-white border-emerald-200",children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-emerald-100 flex items-center justify-center",children:e.jsx(ne,{className:"h-5 w-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:"Online"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"System Status"})]})]})})})]}),e.jsxs($,{defaultValue:"modules",children:[e.jsxs(G,{className:"grid w-full grid-cols-3 rounded-xl",children:[e.jsxs(N,{value:"modules",className:"rounded-xl",children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Modules"]}),e.jsxs(N,{value:"thresholds",className:"rounded-xl",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Thresholds"]}),e.jsxs(N,{value:"logs",className:"rounded-xl",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Decision Logs"]})]}),e.jsx(y,{value:"modules",className:"mt-4",children:e.jsx("div",{className:"grid gap-4",children:["reputation","seo","automation","support"].map(s=>e.jsxs(i,{children:[e.jsx(n,{className:"pb-3",children:e.jsxs(l,{className:"flex items-center gap-2 capitalize",children:[(()=>{const t=O[s];return e.jsx(t,{className:"h-5 w-5"})})(),s," AI"]})}),e.jsx(r,{children:e.jsx("div",{className:"grid gap-3",children:v.filter(t=>t.category===s).map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl border bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`h-8 w-8 rounded-lg flex items-center justify-center ${R[s]}`,children:e.jsx(Q,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{variant:c[t.id]?"default":"secondary",children:c[t.id]?"Active":"Disabled"}),e.jsx(f,{checked:c[t.id],onCheckedChange:()=>E(t.id)})]})]},t.id))})})]},s))})}),e.jsx(y,{value:"thresholds",className:"mt-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-amber-500"}),"Reputation Alert Threshold"]}),e.jsx(g,{children:"Trigger alerts when reputation score drops below this value"})]}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(p,{children:["Threshold: ",a.reputationAlert,"%"]}),e.jsx(d,{variant:a.reputationAlert<40?"destructive":"secondary",children:a.reputationAlert<40?"Aggressive":"Normal"})]}),e.jsx(b,{value:[a.reputationAlert],onValueChange:([s])=>x(t=>({...t,reputationAlert:s})),max:100,min:10,step:5}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Clinics with reputation score below ",a.reputationAlert,"% will be flagged."]})]})]}),e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5 text-blue-500"}),"SEO Confidence Threshold"]}),e.jsx(g,{children:"Minimum AI confidence to auto-apply SEO suggestions"})]}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(p,{children:["Confidence: ",a.seoConfidence,"%"]}),e.jsx(d,{variant:a.seoConfidence>80?"default":"secondary",children:a.seoConfidence>80?"Conservative":"Moderate"})]}),e.jsx(b,{value:[a.seoConfidence],onValueChange:([s])=>x(t=>({...t,seoConfidence:s})),max:100,min:50,step:5}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Only suggestions with â‰¥",a.seoConfidence,"% confidence will be shown."]})]})]}),e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5 text-purple-500"}),"Automation Delay"]}),e.jsx(g,{children:"Minutes to wait before executing automated actions"})]}),e.jsxs(r,{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(p,{children:["Delay: ",a.automationDelay," minutes"]})}),e.jsx(b,{value:[a.automationDelay],onValueChange:([s])=>x(t=>({...t,automationDelay:s})),max:30,min:0,step:1}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Allows time to review and cancel before action is taken."})]})]}),e.jsxs(i,{className:"border-primary/20 bg-primary/5",children:[e.jsx(n,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5 text-primary"}),"Safety Controls"]})}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-background rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Require approval for bulk actions"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"AI cannot execute bulk changes without admin"})]}),e.jsx(f,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-background rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Log all AI decisions"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Keep full audit trail of AI actions"})]}),e.jsx(f,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-background rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Emergency stop"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pause all AI operations immediately"})]}),e.jsxs(u,{variant:"destructive",size:"sm",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Stop All"]})]})]})]})]})}),e.jsx(y,{value:"logs",className:"mt-4",children:e.jsxs(i,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between",children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),"AI Decision Logs"]}),e.jsxs(u,{variant:"outline",size:"sm",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsx(r,{children:q?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary border-t-transparent rounded-full"})}):h.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(k,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No AI decision logs yet"}),e.jsx("p",{className:"text-sm",children:"AI actions will appear here when modules are active"})]}):e.jsx(P,{className:"h-96",children:e.jsxs(J,{children:[e.jsx(U,{children:e.jsxs(M,{children:[e.jsx(o,{children:"Time"}),e.jsx(o,{children:"Module"}),e.jsx(o,{children:"Action"}),e.jsx(o,{children:"Entity"}),e.jsx(o,{children:"Status"})]})}),e.jsx(W,{children:h.map(s=>e.jsxs(M,{children:[e.jsx(m,{className:"text-sm text-muted-foreground",children:Z(new Date(s.created_at),"MMM d, HH:mm")}),e.jsx(m,{children:e.jsx(d,{variant:"outline",children:s.entity_type})}),e.jsx(m,{className:"font-medium",children:s.action}),e.jsx(m,{className:"text-sm",children:s.entity_id?.slice(0,8)||"-"}),e.jsx(m,{children:e.jsx(d,{variant:"secondary",children:"Logged"})})]},s.id))})]})})})]})})]})]})}export{Ie as default};
